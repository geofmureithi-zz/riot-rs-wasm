{"version":3,"sources":["../node_modules/riot/riot.esm.js","../node_modules/@riotjs/lazy/index.next.js","../node_modules/node-libs-browser/node_modules/punycode/punycode.js","../node_modules/url/util.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js","../node_modules/querystring-es3/index.js","../node_modules/url/url.js","../node_modules/@riotjs/route/route.esm.js","../web/Loader.riot","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","../web/App.riot","../web/index.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js","../.cache/.cargo-web/loader-d20feded5cd4b4e8741163e1095849df.js","../.cache/.cargo-web/bundle-loader-d20feded5cd4b4e8741163e1095849df.js","../node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["camelToDashCase","string","replace","toLowerCase","dashToCamelCase","_","c","toUpperCase","DOMattributesToObject","element","Array","from","attributes","reduce","acc","attribute","name","value","moveChildren","source","target","firstChild","appendChild","cleanNode","node","clearChildren","childNodes","children","forEach","removeNode","parentNode","remove","removeChild","EACH","IF","SIMPLE","TAG","SLOT","bindingTypes","ATTRIBUTE","EVENT","TEXT","VALUE","expressionTypes","createTemplateMeta","componentTemplate","fragment","dom","cloneNode","avoidDOMInjection","indexOf","slice","append","get","parent","start","end","before","isSelect","noSelection","child","insertBefore","selected","selectedIndex","call","querySelectorAll","eqeq","a","b","identity","O","indexOf$1","moreNodes","moreStart","moreEnd","lessNodes","lessStart","lessEnd","compare","length","m","l","isReversed","futureNodes","futureEnd","currentNodes","currentStart","currentEnd","next","list","i","nextSibling","drop","DELETION","INSERTION","SKIP","SKIP_OND","HS","futureStart","futureChanges","currentChanges","k","minLen","link","tresh","nodes","index","idxInOld","findK","newi","oldi","prev","diff","ptr","OND","rows","cols","v","d","r","pv","cv","pd","outer","diffIdx","applyDiff","currentLength","live","currentIndex","push","ktr","j","lo","hi","mid","smartDiff","dropChild","domdiff","options","currentSame","futureSame","checkType","type","isSvg","el","owner","ownerSVGElement","isTemplate","isNil","content","isFunction","isBoolean","isObject","undefined","UNMOUNT_SCOPE","Symbol","EachBinding","Object","seal","mount","scope","parentScope","update","placeholder","childrenMap","collection","evaluate","items","createPatch","newChildrenMap","batches","patch","values","fn","unmount","redundant","item","info","pop","template","context","mustFilterItem","condition","Boolean","extendScope","_ref","itemName","indexName","binding","getKey","root","isTemplateTag","Map","create","key","oldItem","clone","mustMount","meta","delete","set","_ref2","document","createTextNode","assign","createDOM","IfBinding","mustUnmount","pristine","create$1","panic","message","Error","memoize","cache","cached","val","has","evaluateAttributeExpressions","REMOVE_ATTRIBUTE","SET_ATTIBUTE","ElementProto","Element","prototype","isNativeHtmlProperty","hasOwnProperty","setAllAttributes","entries","attributeExpression","removeAllAttributes","newAttributes","oldAttributes","newKeys","keys","filter","includes","removeAttribute","oldValue","getMethod","normalizeValue","RE_EVENTS_PREFIX","getCallbackAndOptions","isArray","EventListener","handleEvent","event","ListenersWeakMap","WeakMap","createListener","listener","eventExpression","normalizedEventName","eventListener","callback","handler","mustRemoveEvent","mustAddEvent","removeEventListener","addEventListener","normalizeStringValue","getTextNode","childNodeIndex","nodeType","Node","COMMENT_NODE","textNode","replaceChild","textExpression","data","valueExpression","expression","expressions","Expression","apply","create$2","flattenCollectionMethods","methods","method","map","create$3","COMPONENTS_IMPLEMENTATION_MAP","DOM_COMPONENT_INSTANCE_PROPERTY","PLUGINS_SET","Set","IS_DIRECTIVE","VALUE_ATTRIBUTE","MOUNT_METHOD_KEY","UPDATE_METHOD_KEY","UNMOUNT_METHOD_KEY","SHOULD_UPDATE_KEY","ON_BEFORE_MOUNT_KEY","ON_MOUNTED_KEY","ON_BEFORE_UPDATE_KEY","ON_UPDATED_KEY","ON_BEFORE_UNMOUNT_KEY","ON_UNMOUNTED_KEY","PROPS_KEY","STATE_KEY","SLOTS_KEY","ROOT_KEY","IS_PURE_SYMBOL","for","PARENT_KEY_SYMBOL","ATTRIBUTES_KEY_SYMBOL","TEMPLATE_KEY_SYMBOL","globals","freeze","__proto__","extendParentScope","attr","getRealParent","SlotBinding","getTemplateScope","templateData","slots","find","id","realParent","create$6","html","bindings","moveSlotInnerContent","mustRemoveRoot","slot","createSlot","getTag","component","slotsToMarkup","slotBindings","concat","TagBinding","tag","getComponent","keepRootTag","create$4","fixTextExpressionsOffset","textExpressionsOffset","e","create$5","templateTagOffset","selector","redundantAttribute","querySelector","bindingExpressions","createHTMLTree","createElement","innerHTML","createSVGTree","container","svgNode","ownerDocument","importNode","window","DOMParser","parseFromString","documentElement","createDOMTree","injectDOM","createTemplateDOM","TemplateChunk","Math","max","bindingsData","DOMBindings","createBinding","createExpression","noop","autobindMethods","bind","callOrAssign","constructor","defineProperty","enumerable","writable","configurable","defineProperties","properties","defineDefaults","defaults","domToArray","els","test","toString","$","ctx","normalize","parseNodes","names","n","attrs","props","prop","setAttribute","CSS_BY_NAME","STYLE_NODE_SELECTOR","getStyleNode","style","head","cssManager","add","css","inject","join","curry","_len","arguments","_key","_len2","args","_key2","getName","tagName","COMPONENT_CORE_HELPERS","$$","PURE_COMPONENT_API","COMPONENT_LIFECYCLE_METHODS","MOCKED_TEMPLATE_INTERFACE","evaluateInitialProps","initialProps","bindDOMNodeToComponentObject","createCoreAPIMethods","mapFunction","componentTemplateFactory","components","createPureComponent","pureFactoryFunction","createComponent","exports","templateFn","createSubcomponents","_ref3","componentAPI","defineComponent","state","preserveRoot","_ref4","enhanceComponentAPI","createAttributeBindings","_ref5","runPlugins","computeState","oldState","newState","addCssHook","_ref6","newProps","mountComponent","componentName","compose","fns","f","g","DOM_COMPONENT_INSTANCE_PROPERTY$1","COMPONENTS_IMPLEMENTATION_MAP$1","PLUGINS_SET$1","register","unregister","keepRootElement","install","plugin","uninstall","implementation","_temp","pure","func","version","__","lazy","export","lazyExport","Loader","Component","hasLoader","LazyComponent","load","Promise","resolve","cachedComponent","isMounted","mountLazyComponent","createManagedComponent","then","default","Child","obj","module","qs","sep","eq","regexp","split","maxKeys","len","x","idx","kstr","vstr","substr","decodeURIComponent","xs","stringifyPrimitive","isFinite","objectKeys","ks","encodeURIComponent","res","decode","parse","require","encode","stringify","lexer","str","tokens","char","code","charCodeAt","TypeError","count","pattern","_a","prefixes","defaultPattern","escapeString","delimiter","result","path","tryConsume","mustConsume","nextType","consumeText","prefix","suffix","modifier","open","name_1","pattern_1","compile","tokensToFunction","reFlags","flags","_b","validate","matches","token","RegExp","optional","repeat","segment","String","typeOfMessage","sensitive","regexpToRegexp","groups","match","arrayToRegexp","paths","parts","pathToRegexp","stringToRegexp","tokensToRegexp","strict","_c","_d","endsWith","route","_i","tokens_1","mod","endToken","isEndDelimited","CANCEL","ruit","cancel","tasks","reverse","reject","run","queue","task","rest","done","API_METHODS","UNSUBSCRIBE_SYMBOL","UNSUBSCRIBE_METHOD","CANCEL_METHOD","createStream","modifiers","stream","input","dispatch","callbacks","erre","success","error","generator","addToCollection","deleteFromCollection","on","off","connect","err","return","clear","fork","hasWindow","isString","parseURL","URL","replaceBase","base","matchOrSkip","pathRegExp","joinStreams","dispatcherStream","receiverStream","panic$1","silentErrors","filterStrings","router","mergeOptions","toRegexp","toPath","params","toURL","exec","url","createURLStreamPipe","createRoute","URLStream","getCurrentRoute","currentRoute","getInitialRouteValue","routeHoc","onBeforeMount","onBeforeRoute","onRoute","callLifecycleProperty","onUnmounted","setBase","panic$2","manageEvents","evList","cb","WINDOW_EVENTS","CLICK_EVENT","DOWNLOAD_LINK_ATTRIBUTE","HREF_LINK_ATTRIBUTE","TARGET_SELF_LINK_ATTRIBUTE","LINK_TAG_NAME","HASH","RE_ORIGIN","getWindow","getDocument","getHistorty","history","getLocation","win","hist","location","onWindowEvent","normalizePath","href","onRouterPush","loc","doc","pushState","title","getLinkElement","isLinkNode","nodeName","isCrossOriginLink","isTargetSelfLink","isEventForbidden","which","metaKey","ctrlKey","shiftKey","defaultPrevented","isForbiddenLink","isHashLink","isInBase","onClick","preventDefault","initDomListeners","BASE_ATTRIBUTE_NAME","ON_STARTED_ATTRIBUTE_NAME","defer","requestAnimationFrame","setTimeout","cancelDefer","cancelAnimationFrame","clearTimeout","wasInitialized","routerHoc","getAttribute","teardown","onFirstRoute","onStartedAttr","deferred","getBase","baseAttr","protocol","host","bundleURL","getBundleURLCached","getBundleURL","stack","getBaseURL","loadBundlesLazy","bundles","LazyPromise","loadBundles","all","loadBundle","bundleLoaders","registerBundleLoader","loader","bundle","substring","lastIndexOf","bundleLoader","resolved","catch","executor","promise","onSuccess","onError","Router","Route","Counter","Books","Home","Contact","App","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","ws","onmessage","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","overlay","createErrorOverlay","body","getElementById","stackTrace","innerText","getParents","modules","parents","dep","Function","deps","some","__initialize","__wasm_module","__load_asynchronously","module_factory","instance","WebAssembly","instantiate","imports","wasm_instance","initialize","Instance","STDWEB_PRIVATE","to_utf8","addr","HEAPU8","u","to_js","address","kind","HEAP32","HEAPF64","pointer","HEAPU32","to_js_string","arena","output","value_array_pointer","key_array_pointer","key_pointer","key_length","acquire_js_reference","adapter_pointer","deallocator_pointer","num_ongoing_calls","drop_queued","ReferenceError","function_pointer","alloc","serialize_array","dyncall","tmp","array_kind","pointer_end","subarray","HEAP8","HEAPU16","HEAP16","HEAPF32","get_raw_value","serialize_object","key_address","to_utf8_string","from_js","cachedEncoder","TextEncoder","util","buffer","utf8_len","register_raw_value","refid","acquire_rust_reference","cachedDecoder","TextDecoder","fromCharCode","init","y","ch","z","y_z","w","id_to_ref_map","id_to_refcount_map","ref_to_id_map","ref_to_id_map_fallback","last_refid","id_to_raw_value_map","last_raw_value_id","reference","increment_refcount","decrement_refcount","unregister_raw_value","size","web_malloc","signature","web_table","prepare_any_arg","arg","acquire_tmp","dummy","__web_on_grow","memory","Int8Array","Int16Array","Int32Array","Uint8Array","Uint16Array","Uint32Array","Float32Array","Float64Array","env","$0","alert","$1","o","array","object","__web_malloc","__web_free","__indirect_function_table","books_state","books_dispatch","action","contact_state","contact_dispatch","counter_state","counter_dispatch","fetch","response","arrayBuffer","bytes","loadJSBundle","script","async","charset","src","onerror","onload","getElementsByTagName"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5tBA;;AAEA;;;AAGA,SAASG,KAAT,CAAeC,GAAf,EAAoB;AAClB,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIva,CAAC,GAAG,CAAR;;AAEA,SAAOA,CAAC,GAAGsa,GAAG,CAACjb,MAAf,EAAuB;AACrB,QAAImb,IAAI,GAAGF,GA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","file":"web.9203f2de.js","sourceRoot":"../public","sourcesContent":["/* Riot v4.13.4, @license MIT */\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\nfunction camelToDashCase(string) {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n\n/**\n * Get all the element attributes as object\n * @param   {HTMLElement} element - DOM node we want to parse\n * @returns {Object} all the attributes found as a key value pairs\n */\n\nfunction DOMattributesToObject(element) {\n  return Array.from(element.attributes).reduce((acc, attribute) => {\n    acc[dashToCamelCase(attribute.name)] = attribute.value;\n    return acc;\n  }, {});\n}\n/**\n * Move all the child nodes from a source tag to another\n * @param   {HTMLElement} source - source node\n * @param   {HTMLElement} target - target node\n * @returns {undefined} it's a void method ¯\\_(ツ)_/¯\n */\n// Ignore this helper because it's needed only for svg tags\n\nfunction moveChildren(source, target) {\n  if (source.firstChild) {\n    target.appendChild(source.firstChild);\n    moveChildren(source, target);\n  }\n}\n/**\n * Remove the child nodes from any DOM node\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction cleanNode(node) {\n  clearChildren(node.childNodes);\n}\n/**\n * Clear multiple children in a node\n * @param   {HTMLElement[]} children - direct children nodes\n * @returns {undefined}\n */\n\nfunction clearChildren(children) {\n  Array.from(children).forEach(removeNode);\n}\n/**\n * Remove a node from the DOM\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction removeNode(node) {\n  const {\n    parentNode\n  } = node;\n  if (node.remove) node.remove();\n  /* istanbul ignore else */\n  else if (parentNode) parentNode.removeChild(node);\n}\n\nconst EACH = 0;\nconst IF = 1;\nconst SIMPLE = 2;\nconst TAG = 3;\nconst SLOT = 4;\nvar bindingTypes = {\n  EACH,\n  IF,\n  SIMPLE,\n  TAG,\n  SLOT\n};\n\nconst ATTRIBUTE = 0;\nconst EVENT = 1;\nconst TEXT = 2;\nconst VALUE = 3;\nvar expressionTypes = {\n  ATTRIBUTE,\n  EVENT,\n  TEXT,\n  VALUE\n};\n\n/**\n * Create the template meta object in case of <template> fragments\n * @param   {TemplateChunk} componentTemplate - template chunk object\n * @returns {Object} the meta property that will be passed to the mount function of the TemplateChunk\n */\nfunction createTemplateMeta(componentTemplate) {\n  const fragment = componentTemplate.dom.cloneNode(true);\n  return {\n    avoidDOMInjection: true,\n    fragment,\n    children: Array.from(fragment.childNodes)\n  };\n}\n\nconst {\n  indexOf,\n  slice\n} = [];\n\nconst append = (get, parent, children, start, end, before) => {\n  const isSelect = ('selectedIndex' in parent);\n  let noSelection = isSelect;\n\n  while (start < end) {\n    const child = get(children[start], 1);\n    parent.insertBefore(child, before);\n\n    if (isSelect && noSelection && child.selected) {\n      noSelection = !noSelection;\n      let {\n        selectedIndex\n      } = parent;\n      parent.selectedIndex = selectedIndex < 0 ? start : indexOf.call(parent.querySelectorAll('option'), child);\n    }\n\n    start++;\n  }\n};\nconst eqeq = (a, b) => a == b;\nconst identity = O => O;\nconst indexOf$1 = (moreNodes, moreStart, moreEnd, lessNodes, lessStart, lessEnd, compare) => {\n  const length = lessEnd - lessStart;\n  /* istanbul ignore if */\n\n  if (length < 1) return -1;\n\n  while (moreEnd - moreStart >= length) {\n    let m = moreStart;\n    let l = lessStart;\n\n    while (m < moreEnd && l < lessEnd && compare(moreNodes[m], lessNodes[l])) {\n      m++;\n      l++;\n    }\n\n    if (l === lessEnd) return moreStart;\n    moreStart = m + 1;\n  }\n\n  return -1;\n};\nconst isReversed = (futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare) => {\n  while (currentStart < currentEnd && compare(currentNodes[currentStart], futureNodes[futureEnd - 1])) {\n    currentStart++;\n    futureEnd--;\n  }\n  return futureEnd === 0;\n};\nconst next = (get, list, i, length, before) => i < length ? get(list[i], 0) : 0 < i ? get(list[i - 1], -0).nextSibling : before;\nconst remove = (get, children, start, end) => {\n  while (start < end) drop(get(children[start++], -1));\n}; // - - - - - - - - - - - - - - - - - - -\n// diff related constants and utilities\n// - - - - - - - - - - - - - - - - - - -\n\nconst DELETION = -1;\nconst INSERTION = 1;\nconst SKIP = 0;\nconst SKIP_OND = 50;\n\nconst HS = (futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges) => {\n  let k = 0;\n  /* istanbul ignore next */\n\n  let minLen = futureChanges < currentChanges ? futureChanges : currentChanges;\n  const link = Array(minLen++);\n  const tresh = Array(minLen);\n  tresh[0] = -1;\n\n  for (let i = 1; i < minLen; i++) tresh[i] = currentEnd;\n\n  const nodes = currentNodes.slice(currentStart, currentEnd);\n\n  for (let i = futureStart; i < futureEnd; i++) {\n    const index = nodes.indexOf(futureNodes[i]);\n\n    if (-1 < index) {\n      const idxInOld = index + currentStart;\n      k = findK(tresh, minLen, idxInOld);\n      /* istanbul ignore else */\n\n      if (-1 < k) {\n        tresh[k] = idxInOld;\n        link[k] = {\n          newi: i,\n          oldi: idxInOld,\n          prev: link[k - 1]\n        };\n      }\n    }\n  }\n\n  k = --minLen;\n  --currentEnd;\n\n  while (tresh[k] > currentEnd) --k;\n\n  minLen = currentChanges + futureChanges - k;\n  const diff = Array(minLen);\n  let ptr = link[k];\n  --futureEnd;\n\n  while (ptr) {\n    const {\n      newi,\n      oldi\n    } = ptr;\n\n    while (futureEnd > newi) {\n      diff[--minLen] = INSERTION;\n      --futureEnd;\n    }\n\n    while (currentEnd > oldi) {\n      diff[--minLen] = DELETION;\n      --currentEnd;\n    }\n\n    diff[--minLen] = SKIP;\n    --futureEnd;\n    --currentEnd;\n    ptr = ptr.prev;\n  }\n\n  while (futureEnd >= futureStart) {\n    diff[--minLen] = INSERTION;\n    --futureEnd;\n  }\n\n  while (currentEnd >= currentStart) {\n    diff[--minLen] = DELETION;\n    --currentEnd;\n  }\n\n  return diff;\n}; // this is pretty much the same petit-dom code without the delete map part\n// https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L556-L561\n\n\nconst OND = (futureNodes, futureStart, rows, currentNodes, currentStart, cols, compare) => {\n  const length = rows + cols;\n  const v = [];\n  let d, k, r, c, pv, cv, pd;\n\n  outer: for (d = 0; d <= length; d++) {\n    /* istanbul ignore if */\n    if (d > SKIP_OND) return null;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    cv = v[d] = [];\n\n    for (k = -d; k <= d; k += 2) {\n      if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n        c = pv[pd + k + 1];\n      } else {\n        c = pv[pd + k - 1] + 1;\n      }\n\n      r = c - k;\n\n      while (c < cols && r < rows && compare(currentNodes[currentStart + c], futureNodes[futureStart + r])) {\n        c++;\n        r++;\n      }\n\n      if (c === cols && r === rows) {\n        break outer;\n      }\n\n      cv[d + k] = c;\n    }\n  }\n\n  const diff = Array(d / 2 + length / 2);\n  let diffIdx = diff.length - 1;\n\n  for (d = v.length - 1; d >= 0; d--) {\n    while (c > 0 && r > 0 && compare(currentNodes[currentStart + c - 1], futureNodes[futureStart + r - 1])) {\n      // diagonal edge = equality\n      diff[diffIdx--] = SKIP;\n      c--;\n      r--;\n    }\n\n    if (!d) break;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    k = c - r;\n\n    if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n      // vertical edge = insertion\n      r--;\n      diff[diffIdx--] = INSERTION;\n    } else {\n      // horizontal edge = deletion\n      c--;\n      diff[diffIdx--] = DELETION;\n    }\n  }\n\n  return diff;\n};\n\nconst applyDiff = (diff, get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before) => {\n  const live = [];\n  const length = diff.length;\n  let currentIndex = currentStart;\n  let i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        futureStart++;\n        currentIndex++;\n        break;\n\n      case INSERTION:\n        // TODO: bulk appends for sequential nodes\n        live.push(futureNodes[futureStart]);\n        append(get, parentNode, futureNodes, futureStart++, futureStart, currentIndex < currentLength ? get(currentNodes[currentIndex], 0) : before);\n        break;\n\n      case DELETION:\n        currentIndex++;\n        break;\n    }\n  }\n\n  i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        currentStart++;\n        break;\n\n      case DELETION:\n        // TODO: bulk removes for sequential nodes\n        if (-1 < live.indexOf(currentNodes[currentStart])) currentStart++;else remove(get, currentNodes, currentStart++, currentStart);\n        break;\n    }\n  }\n};\n\nconst findK = (ktr, length, j) => {\n  let lo = 1;\n  let hi = length;\n\n  while (lo < hi) {\n    const mid = (lo + hi) / 2 >>> 0;\n    if (j < ktr[mid]) hi = mid;else lo = mid + 1;\n  }\n\n  return lo;\n};\n\nconst smartDiff = (get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before) => {\n  applyDiff(OND(futureNodes, futureStart, futureChanges, currentNodes, currentStart, currentChanges, compare) || HS(futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges), get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before);\n};\n\nconst drop = node => (node.remove || dropChild).call(node);\n\nfunction dropChild() {\n  const {\n    parentNode\n  } = this;\n  /* istanbul ignore else */\n\n  if (parentNode) parentNode.removeChild(this);\n}\n\n/*! (c) 2018 Andrea Giammarchi (ISC) */\n\nconst domdiff = (parentNode, // where changes happen\ncurrentNodes, // Array of current items/nodes\nfutureNodes, // Array of future items/nodes\noptions // optional object with one of the following properties\n//  before: domNode\n//  compare(generic, generic) => true if same generic\n//  node(generic) => Node\n) => {\n  if (!options) options = {};\n  const compare = options.compare || eqeq;\n  const get = options.node || identity;\n  const before = options.before == null ? null : get(options.before, 0);\n  const currentLength = currentNodes.length;\n  let currentEnd = currentLength;\n  let currentStart = 0;\n  let futureEnd = futureNodes.length;\n  let futureStart = 0; // common prefix\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentStart], futureNodes[futureStart])) {\n    currentStart++;\n    futureStart++;\n  } // common suffix\n\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentEnd - 1], futureNodes[futureEnd - 1])) {\n    currentEnd--;\n    futureEnd--;\n  }\n\n  const currentSame = currentStart === currentEnd;\n  const futureSame = futureStart === futureEnd; // same list\n\n  if (currentSame && futureSame) return futureNodes; // only stuff to add\n\n  if (currentSame && futureStart < futureEnd) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentStart, currentLength, before));\n    return futureNodes;\n  } // only stuff to remove\n\n\n  if (futureSame && currentStart < currentEnd) {\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  }\n\n  const currentChanges = currentEnd - currentStart;\n  const futureChanges = futureEnd - futureStart;\n  let i = -1; // 2 simple indels: the shortest sequence is a subsequence of the longest\n\n  if (currentChanges < futureChanges) {\n    i = indexOf$1(futureNodes, futureStart, futureEnd, currentNodes, currentStart, currentEnd, compare); // inner diff\n\n    if (-1 < i) {\n      append(get, parentNode, futureNodes, futureStart, i, get(currentNodes[currentStart], 0));\n      append(get, parentNode, futureNodes, i + currentChanges, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n      return futureNodes;\n    }\n  }\n  /* istanbul ignore else */\n  else if (futureChanges < currentChanges) {\n      i = indexOf$1(currentNodes, currentStart, currentEnd, futureNodes, futureStart, futureEnd, compare); // outer diff\n\n      if (-1 < i) {\n        remove(get, currentNodes, currentStart, i);\n        remove(get, currentNodes, i + futureChanges, currentEnd);\n        return futureNodes;\n      }\n    } // common case with one replacement for many nodes\n  // or many nodes replaced for a single one\n\n  /* istanbul ignore else */\n\n\n  if (currentChanges < 2 || futureChanges < 2) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, get(currentNodes[currentStart], 0));\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  } // the half match diff part has been skipped in petit-dom\n  // https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L391-L397\n  // accordingly, I think it's safe to skip in here too\n  // if one day it'll come out like the speediest thing ever to do\n  // then I might add it in here too\n  // Extra: before going too fancy, what about reversed lists ?\n  //        This should bail out pretty quickly if that's not the case.\n\n\n  if (currentChanges === futureChanges && isReversed(futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare)) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n    return futureNodes;\n  } // last resort through a smart diff\n\n\n  smartDiff(get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before);\n  return futureNodes;\n};\n\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\nfunction checkType(element, type) {\n  return typeof element === type;\n}\n/**\n * Check if an element is part of an svg\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if we are in an svg context\n */\n\nfunction isSvg(el) {\n  const owner = el.ownerSVGElement;\n  return !!owner || owner === null;\n}\n/**\n * Check if an element is a template tag\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if it's a <template>\n */\n\nfunction isTemplate(el) {\n  return !isNil(el.content);\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\nfunction isFunction(value) {\n  return checkType(value, 'function');\n}\n/**\n * Check if a value is a Boolean\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is a boolean\n */\n\nfunction isBoolean(value) {\n  return checkType(value, 'boolean');\n}\n/**\n * Check if a value is an Object\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is an object\n */\n\nfunction isObject(value) {\n  return !isNil(value) && checkType(value, 'object');\n}\n/**\n * Check if a value is null or undefined\n * @param   {*}  value - anything\n * @returns {boolean} true only for the 'undefined' and 'null' types\n */\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nconst UNMOUNT_SCOPE = Symbol('unmount');\nconst EachBinding = Object.seal({\n  // dynamic binding properties\n  // childrenMap: null,\n  // node: null,\n  // root: null,\n  // condition: null,\n  // evaluate: null,\n  // template: null,\n  // isTemplateTag: false,\n  nodes: [],\n\n  // getKey: null,\n  // indexName: null,\n  // itemName: null,\n  // afterPlaceholder: null,\n  // placeholder: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const {\n      placeholder,\n      nodes,\n      childrenMap\n    } = this;\n    const collection = scope === UNMOUNT_SCOPE ? null : this.evaluate(scope);\n    const items = collection ? Array.from(collection) : [];\n    const parent = placeholder.parentNode; // prepare the diffing\n\n    const {\n      newChildrenMap,\n      batches,\n      futureNodes\n    } = createPatch(items, scope, parentScope, this); // patch the DOM only if there are new nodes\n\n    domdiff(parent, nodes, futureNodes, {\n      before: placeholder,\n      node: patch(Array.from(childrenMap.values()), parentScope)\n    }); // trigger the mounts and the updates\n\n    batches.forEach(fn => fn()); // update the children map\n\n    this.childrenMap = newChildrenMap;\n    this.nodes = futureNodes;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.update(UNMOUNT_SCOPE, parentScope);\n    return this;\n  }\n\n});\n/**\n * Patch the DOM while diffing\n * @param   {TemplateChunk[]} redundant - redundant tepmplate chunks\n * @param   {*} parentScope - scope of the parent template\n * @returns {Function} patch function used by domdiff\n */\n\nfunction patch(redundant, parentScope) {\n  return (item, info) => {\n    if (info < 0) {\n      const element = redundant.pop();\n\n      if (element) {\n        const {\n          template,\n          context\n        } = element; // notice that we pass null as last argument because\n        // the root node and its children will be removed by domdiff\n\n        template.unmount(context, parentScope, null);\n      }\n    }\n\n    return item;\n  };\n}\n/**\n * Check whether a template must be filtered from a loop\n * @param   {Function} condition - filter function\n * @param   {Object} context - argument passed to the filter function\n * @returns {boolean} true if this item should be skipped\n */\n\n\nfunction mustFilterItem(condition, context) {\n  return condition ? Boolean(condition(context)) === false : false;\n}\n/**\n * Extend the scope of the looped template\n * @param   {Object} scope - current template scope\n * @param   {string} options.itemName - key to identify the looped item in the new context\n * @param   {string} options.indexName - key to identify the index of the looped item\n * @param   {number} options.index - current index\n * @param   {*} options.item - collection item looped\n * @returns {Object} enhanced scope object\n */\n\n\nfunction extendScope(scope, _ref) {\n  let {\n    itemName,\n    indexName,\n    index,\n    item\n  } = _ref;\n  scope[itemName] = item;\n  if (indexName) scope[indexName] = index;\n  return scope;\n}\n/**\n * Loop the current template items\n * @param   {Array} items - expression collection value\n * @param   {*} scope - template scope\n * @param   {*} parentScope - scope of the parent template\n * @param   {EeachBinding} binding - each binding object instance\n * @returns {Object} data\n * @returns {Map} data.newChildrenMap - a Map containing the new children template structure\n * @returns {Array} data.batches - array containing the template lifecycle functions to trigger\n * @returns {Array} data.futureNodes - array containing the nodes we need to diff\n */\n\n\nfunction createPatch(items, scope, parentScope, binding) {\n  const {\n    condition,\n    template,\n    childrenMap,\n    itemName,\n    getKey,\n    indexName,\n    root,\n    isTemplateTag\n  } = binding;\n  const newChildrenMap = new Map();\n  const batches = [];\n  const futureNodes = [];\n  items.forEach((item, index) => {\n    const context = extendScope(Object.create(scope), {\n      itemName,\n      indexName,\n      index,\n      item\n    });\n    const key = getKey ? getKey(context) : index;\n    const oldItem = childrenMap.get(key);\n\n    if (mustFilterItem(condition, context)) {\n      return;\n    }\n\n    const componentTemplate = oldItem ? oldItem.template : template.clone();\n    const el = oldItem ? componentTemplate.el : root.cloneNode();\n    const mustMount = !oldItem;\n    const meta = isTemplateTag && mustMount ? createTemplateMeta(componentTemplate) : {};\n\n    if (mustMount) {\n      batches.push(() => componentTemplate.mount(el, context, parentScope, meta));\n    } else {\n      batches.push(() => componentTemplate.update(context, parentScope));\n    } // create the collection of nodes to update or to add\n    // in case of template tags we need to add all its children nodes\n\n\n    if (isTemplateTag) {\n      const children = meta.children || componentTemplate.children;\n      futureNodes.push(...children);\n    } else {\n      futureNodes.push(el);\n    } // delete the old item from the children map\n\n\n    childrenMap.delete(key); // update the children map\n\n    newChildrenMap.set(key, {\n      template: componentTemplate,\n      context,\n      index\n    });\n  });\n  return {\n    newChildrenMap,\n    batches,\n    futureNodes\n  };\n}\n\nfunction create(node, _ref2) {\n  let {\n    evaluate,\n    condition,\n    itemName,\n    indexName,\n    getKey,\n    template\n  } = _ref2;\n  const placeholder = document.createTextNode('');\n  const parent = node.parentNode;\n  const root = node.cloneNode();\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, EachBinding, {\n    childrenMap: new Map(),\n    node,\n    root,\n    condition,\n    evaluate,\n    isTemplateTag: isTemplate(root),\n    template: template.createDOM(node),\n    getKey,\n    indexName,\n    itemName,\n    placeholder\n  });\n}\n\n/**\n * Binding responsible for the `if` directive\n */\n\nconst IfBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // isTemplateTag: false,\n  // placeholder: null,\n  // template: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const value = !!this.evaluate(scope);\n    const mustMount = !this.value && value;\n    const mustUnmount = this.value && !value;\n\n    const mount = () => {\n      const pristine = this.node.cloneNode();\n      this.placeholder.parentNode.insertBefore(pristine, this.placeholder);\n      this.template = this.template.clone();\n      this.template.mount(pristine, scope, parentScope);\n    };\n\n    switch (true) {\n      case mustMount:\n        mount();\n        break;\n\n      case mustUnmount:\n        this.unmount(scope);\n        break;\n\n      default:\n        if (value) this.template.update(scope, parentScope);\n    }\n\n    this.value = value;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.template.unmount(scope, parentScope, true);\n    return this;\n  }\n\n});\nfunction create$1(node, _ref) {\n  let {\n    evaluate,\n    template\n  } = _ref;\n  const parent = node.parentNode;\n  const placeholder = document.createTextNode('');\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, IfBinding, {\n    node,\n    evaluate,\n    placeholder,\n    template: template.createDOM(node)\n  });\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Returns the memoized (cached) function.\n * // borrowed from https://www.30secondsofcode.org/js/s/memoize\n * @param {Function} fn - function to memoize\n * @returns {Function} memoize function\n */\n\nfunction memoize(fn) {\n  const cache = new Map();\n\n  const cached = val => {\n    return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) && cache.get(val);\n  };\n\n  cached.cache = cache;\n  return cached;\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\nfunction evaluateAttributeExpressions(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const {\n      value,\n      type\n    } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE:\n        return Object.assign({}, acc, value);\n      // value attribute\n\n      case type === VALUE:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nconst REMOVE_ATTRIBUTE = 'removeAttribute';\nconst SET_ATTIBUTE = 'setAttribute';\nconst ElementProto = typeof Element === 'undefined' ? {} : Element.prototype;\nconst isNativeHtmlProperty = memoize(name => ElementProto.hasOwnProperty(name)); // eslint-disable-line\n\n/**\n * Add all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing the attributes names and values\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction setAllAttributes(node, attributes) {\n  Object.entries(attributes).forEach((_ref) => {\n    let [name, value] = _ref;\n    return attributeExpression(node, {\n      name\n    }, value);\n  });\n}\n/**\n * Remove all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} newAttributes - object containing all the new attribute names\n * @param   {Object} oldAttributes - object containing all the old attribute names\n * @returns {undefined} sorry it's a void function :(\n */\n\n\nfunction removeAllAttributes(node, newAttributes, oldAttributes) {\n  const newKeys = newAttributes ? Object.keys(newAttributes) : [];\n  Object.keys(oldAttributes).filter(name => !newKeys.includes(name)).forEach(attribute => node.removeAttribute(attribute));\n}\n/**\n * This methods handles the DOM attributes updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - attribute name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - the old expression cached value\n * @returns {undefined}\n */\n\n\nfunction attributeExpression(node, _ref2, value, oldValue) {\n  let {\n    name\n  } = _ref2;\n\n  // is it a spread operator? {...attributes}\n  if (!name) {\n    if (oldValue) {\n      // remove all the old attributes\n      removeAllAttributes(node, value, oldValue);\n    } // is the value still truthy?\n\n\n    if (value) {\n      setAllAttributes(node, value);\n    }\n\n    return;\n  } // handle boolean attributes\n\n\n  if (!isNativeHtmlProperty(name) && (isBoolean(value) || isObject(value) || isFunction(value))) {\n    node[name] = value;\n  }\n\n  node[getMethod(value)](name, normalizeValue(name, value));\n}\n/**\n * Get the attribute modifier method\n * @param   {*} value - if truthy we return `setAttribute` othewise `removeAttribute`\n * @returns {string} the node attribute modifier method name\n */\n\nfunction getMethod(value) {\n  return isNil(value) || value === false || value === '' || isObject(value) || isFunction(value) ? REMOVE_ATTRIBUTE : SET_ATTIBUTE;\n}\n/**\n * Get the value as string\n * @param   {string} name - attribute name\n * @param   {*} value - user input value\n * @returns {string} input value as string\n */\n\n\nfunction normalizeValue(name, value) {\n  // be sure that expressions like selected={ true } will be always rendered as selected='selected'\n  if (value === true) return name;\n  return value;\n}\n\nconst RE_EVENTS_PREFIX = /^on/;\n\nconst getCallbackAndOptions = value => Array.isArray(value) ? value : [value, false]; // see also https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38\n\n\nconst EventListener = {\n  handleEvent(event) {\n    this[event.type](event);\n  }\n\n};\nconst ListenersWeakMap = new WeakMap();\n\nconst createListener = node => {\n  const listener = Object.create(EventListener);\n  ListenersWeakMap.set(node, listener);\n  return listener;\n};\n/**\n * Set a new event listener\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - event name\n * @param   {*} value - new expression value\n * @returns {value} the callback just received\n */\n\n\nfunction eventExpression(node, _ref, value) {\n  let {\n    name\n  } = _ref;\n  const normalizedEventName = name.replace(RE_EVENTS_PREFIX, '');\n  const eventListener = ListenersWeakMap.get(node) || createListener(node);\n  const [callback, options] = getCallbackAndOptions(value);\n  const handler = eventListener[normalizedEventName];\n  const mustRemoveEvent = handler && !callback;\n  const mustAddEvent = callback && !handler;\n\n  if (mustRemoveEvent) {\n    node.removeEventListener(normalizedEventName, eventListener);\n  }\n\n  if (mustAddEvent) {\n    node.addEventListener(normalizedEventName, eventListener, options);\n  }\n\n  eventListener[normalizedEventName] = callback;\n}\n\n/**\n * Normalize the user value in order to render a empty string in case of falsy values\n * @param   {*} value - user input value\n * @returns {string} hopefully a string\n */\n\nfunction normalizeStringValue(value) {\n  return isNil(value) ? '' : value;\n}\n\n/**\n * Get the the target text node to update or create one from of a comment node\n * @param   {HTMLElement} node - any html element containing childNodes\n * @param   {number} childNodeIndex - index of the text node in the childNodes list\n * @returns {HTMLTextNode} the text node to update\n */\n\nconst getTextNode = (node, childNodeIndex) => {\n  const target = node.childNodes[childNodeIndex];\n\n  if (target.nodeType === Node.COMMENT_NODE) {\n    const textNode = document.createTextNode('');\n    node.replaceChild(textNode, target);\n    return textNode;\n  }\n\n  return target;\n};\n/**\n * This methods handles a simple text expression update\n * @param   {HTMLElement} node - target node\n * @param   {Object} data - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction textExpression(node, data, value) {\n  node.data = normalizeStringValue(value);\n}\n\n/**\n * This methods handles the input fileds value updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction valueExpression(node, expression, value) {\n  node.value = normalizeStringValue(value);\n}\n\nvar expressions = {\n  [ATTRIBUTE]: attributeExpression,\n  [EVENT]: eventExpression,\n  [TEXT]: textExpression,\n  [VALUE]: valueExpression\n};\n\nconst Expression = Object.seal({\n  // Static props\n  // node: null,\n  // value: null,\n  // API methods\n\n  /**\n   * Mount the expression evaluating its initial value\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  mount(scope) {\n    // hopefully a pure function\n    this.value = this.evaluate(scope); // IO() DOM updates\n\n    apply(this, this.value);\n    return this;\n  },\n\n  /**\n   * Update the expression if its value changed\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  update(scope) {\n    // pure function\n    const value = this.evaluate(scope);\n\n    if (this.value !== value) {\n      // IO() DOM updates\n      apply(this, value);\n      this.value = value;\n    }\n\n    return this;\n  },\n\n  /**\n   * Expression teardown method\n   * @returns {Expression} self\n   */\n  unmount() {\n    // unmount only the event handling expressions\n    if (this.type === EVENT) apply(this, null);\n    return this;\n  }\n\n});\n/**\n * IO() function to handle the DOM updates\n * @param {Expression} expression - expression object\n * @param {*} value - current expression value\n * @returns {undefined}\n */\n\nfunction apply(expression, value) {\n  return expressions[expression.type](expression.node, expression, value, expression.value);\n}\n\nfunction create$2(node, data) {\n  return Object.assign({}, Expression, data, {\n    node: data.type === TEXT ? getTextNode(node, data.childNodeIndex) : node\n  });\n}\n\n/**\n * Create a flat object having as keys a list of methods that if dispatched will propagate\n * on the whole collection\n * @param   {Array} collection - collection to iterate\n * @param   {Array<string>} methods - methods to execute on each item of the collection\n * @param   {*} context - context returned by the new methods created\n * @returns {Object} a new object to simplify the the nested methods dispatching\n */\nfunction flattenCollectionMethods(collection, methods, context) {\n  return methods.reduce((acc, method) => {\n    return Object.assign({}, acc, {\n      [method]: scope => {\n        return collection.map(item => item[method](scope)) && context;\n      }\n    });\n  }, {});\n}\n\nfunction create$3(node, _ref) {\n  let {\n    expressions\n  } = _ref;\n  return Object.assign({}, flattenCollectionMethods(expressions.map(expression => create$2(node, expression)), ['mount', 'update', 'unmount']));\n}\n\n// Riot.js constants that can be used accross more modules\nconst COMPONENTS_IMPLEMENTATION_MAP = new Map(),\n      DOM_COMPONENT_INSTANCE_PROPERTY = Symbol('riot-component'),\n      PLUGINS_SET = new Set(),\n      IS_DIRECTIVE = 'is',\n      VALUE_ATTRIBUTE = 'value',\n      MOUNT_METHOD_KEY = 'mount',\n      UPDATE_METHOD_KEY = 'update',\n      UNMOUNT_METHOD_KEY = 'unmount',\n      SHOULD_UPDATE_KEY = 'shouldUpdate',\n      ON_BEFORE_MOUNT_KEY = 'onBeforeMount',\n      ON_MOUNTED_KEY = 'onMounted',\n      ON_BEFORE_UPDATE_KEY = 'onBeforeUpdate',\n      ON_UPDATED_KEY = 'onUpdated',\n      ON_BEFORE_UNMOUNT_KEY = 'onBeforeUnmount',\n      ON_UNMOUNTED_KEY = 'onUnmounted',\n      PROPS_KEY = 'props',\n      STATE_KEY = 'state',\n      SLOTS_KEY = 'slots',\n      ROOT_KEY = 'root',\n      IS_PURE_SYMBOL = Symbol.for('pure'),\n      PARENT_KEY_SYMBOL = Symbol('parent'),\n      ATTRIBUTES_KEY_SYMBOL = Symbol('attributes'),\n      TEMPLATE_KEY_SYMBOL = Symbol('template');\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP,\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY,\n  PLUGINS_SET: PLUGINS_SET,\n  IS_DIRECTIVE: IS_DIRECTIVE,\n  VALUE_ATTRIBUTE: VALUE_ATTRIBUTE,\n  MOUNT_METHOD_KEY: MOUNT_METHOD_KEY,\n  UPDATE_METHOD_KEY: UPDATE_METHOD_KEY,\n  UNMOUNT_METHOD_KEY: UNMOUNT_METHOD_KEY,\n  SHOULD_UPDATE_KEY: SHOULD_UPDATE_KEY,\n  ON_BEFORE_MOUNT_KEY: ON_BEFORE_MOUNT_KEY,\n  ON_MOUNTED_KEY: ON_MOUNTED_KEY,\n  ON_BEFORE_UPDATE_KEY: ON_BEFORE_UPDATE_KEY,\n  ON_UPDATED_KEY: ON_UPDATED_KEY,\n  ON_BEFORE_UNMOUNT_KEY: ON_BEFORE_UNMOUNT_KEY,\n  ON_UNMOUNTED_KEY: ON_UNMOUNTED_KEY,\n  PROPS_KEY: PROPS_KEY,\n  STATE_KEY: STATE_KEY,\n  SLOTS_KEY: SLOTS_KEY,\n  ROOT_KEY: ROOT_KEY,\n  IS_PURE_SYMBOL: IS_PURE_SYMBOL,\n  PARENT_KEY_SYMBOL: PARENT_KEY_SYMBOL,\n  ATTRIBUTES_KEY_SYMBOL: ATTRIBUTES_KEY_SYMBOL,\n  TEMPLATE_KEY_SYMBOL: TEMPLATE_KEY_SYMBOL\n});\n\nfunction extendParentScope(attributes, scope, parentScope) {\n  if (!attributes || !attributes.length) return parentScope;\n  const expressions = attributes.map(attr => Object.assign({}, attr, {\n    value: attr.evaluate(scope)\n  }));\n  return Object.assign(Object.create(parentScope || null), evaluateAttributeExpressions(expressions));\n} // this function is only meant to fix an edge case\n// https://github.com/riot/riot/issues/2842\n\n\nconst getRealParent = (scope, parentScope) => parentScope ? parentScope === scope ? scope[PARENT_KEY_SYMBOL] : parentScope : undefined;\n\nconst SlotBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // name: null,\n  attributes: [],\n\n  // template: null,\n  getTemplateScope(scope, parentScope) {\n    return extendParentScope(this.attributes, scope, parentScope);\n  },\n\n  // API methods\n  mount(scope, parentScope) {\n    const templateData = scope.slots ? scope.slots.find((_ref) => {\n      let {\n        id\n      } = _ref;\n      return id === this.name;\n    }) : false;\n    const {\n      parentNode\n    } = this.node;\n    const realParent = getRealParent(scope, parentScope);\n    this.template = templateData && create$6(templateData.html, templateData.bindings).createDOM(parentNode);\n\n    if (this.template) {\n      this.template.mount(this.node, this.getTemplateScope(scope, realParent), realParent);\n      this.template.children = moveSlotInnerContent(this.node);\n    }\n\n    removeNode(this.node);\n    return this;\n  },\n\n  update(scope, parentScope) {\n    if (this.template) {\n      const realParent = getRealParent(scope, parentScope);\n      this.template.update(this.getTemplateScope(scope, realParent), realParent);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.template) {\n      this.template.unmount(this.getTemplateScope(scope, parentScope), null, mustRemoveRoot);\n    }\n\n    return this;\n  }\n\n});\n/**\n * Move the inner content of the slots outside of them\n * @param   {HTMLNode} slot - slot node\n * @param   {HTMLElement} children - array to fill with the child nodes detected\n * @returns {HTMLElement[]} list of the node moved\n */\n\nfunction moveSlotInnerContent(slot, children) {\n  if (children === void 0) {\n    children = [];\n  }\n\n  const child = slot.firstChild;\n\n  if (child) {\n    slot.parentNode.insertBefore(child, slot);\n    return [child, ...moveSlotInnerContent(slot)];\n  }\n\n  return children;\n}\n/**\n * Create a single slot binding\n * @param   {HTMLElement} node - slot node\n * @param   {string} options.name - slot id\n * @returns {Object} Slot binding object\n */\n\n\nfunction createSlot(node, _ref2) {\n  let {\n    name,\n    attributes\n  } = _ref2;\n  return Object.assign({}, SlotBinding, {\n    attributes,\n    node,\n    name\n  });\n}\n\n/**\n * Create a new tag object if it was registered before, otherwise fallback to the simple\n * template chunk\n * @param   {Function} component - component factory function\n * @param   {Array<Object>} slots - array containing the slots markup\n * @param   {Array} attributes - dynamic attributes that will be received by the tag element\n * @returns {TagImplementation|TemplateChunk} a tag implementation or a template chunk as fallback\n */\n\nfunction getTag(component, slots, attributes) {\n  if (slots === void 0) {\n    slots = [];\n  }\n\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  // if this tag was registered before we will return its implementation\n  if (component) {\n    return component({\n      slots,\n      attributes\n    });\n  } // otherwise we return a template chunk\n\n\n  return create$6(slotsToMarkup(slots), [...slotBindings(slots), {\n    // the attributes should be registered as binding\n    // if we fallback to a normal template chunk\n    expressions: attributes.map(attr => {\n      return Object.assign({\n        type: ATTRIBUTE\n      }, attr);\n    })\n  }]);\n}\n/**\n * Merge all the slots bindings into a single array\n * @param   {Array<Object>} slots - slots collection\n * @returns {Array<Bindings>} flatten bindings array\n */\n\n\nfunction slotBindings(slots) {\n  return slots.reduce((acc, _ref) => {\n    let {\n      bindings\n    } = _ref;\n    return acc.concat(bindings);\n  }, []);\n}\n/**\n * Merge all the slots together in a single markup string\n * @param   {Array<Object>} slots - slots collection\n * @returns {string} markup of all the slots in a single string\n */\n\n\nfunction slotsToMarkup(slots) {\n  return slots.reduce((acc, slot) => {\n    return acc + slot.html;\n  }, '');\n}\n\nconst TagBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // name: null,\n  // slots: null,\n  // tag: null,\n  // attributes: null,\n  // getComponent: null,\n  mount(scope) {\n    return this.update(scope);\n  },\n\n  update(scope, parentScope) {\n    const name = this.evaluate(scope); // simple update\n\n    if (name === this.name) {\n      this.tag.update(scope);\n    } else {\n      // unmount the old tag if it exists\n      this.unmount(scope, parentScope, true); // mount the new tag\n\n      this.name = name;\n      this.tag = getTag(this.getComponent(name), this.slots, this.attributes);\n      this.tag.mount(this.node, scope);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, keepRootTag) {\n    if (this.tag) {\n      // keep the root tag\n      this.tag.unmount(keepRootTag);\n    }\n\n    return this;\n  }\n\n});\nfunction create$4(node, _ref2) {\n  let {\n    evaluate,\n    getComponent,\n    slots,\n    attributes\n  } = _ref2;\n  return Object.assign({}, TagBinding, {\n    node,\n    evaluate,\n    slots,\n    attributes,\n    getComponent\n  });\n}\n\nvar bindings = {\n  [IF]: create$1,\n  [SIMPLE]: create$3,\n  [EACH]: create,\n  [TAG]: create$4,\n  [SLOT]: createSlot\n};\n\n/**\n * Text expressions in a template tag will get childNodeIndex value normalized\n * depending on the position of the <template> tag offset\n * @param   {Expression[]} expressions - riot expressions array\n * @param   {number} textExpressionsOffset - offset of the <template> tag\n * @returns {Expression[]} expressions containing the text expressions normalized\n */\n\nfunction fixTextExpressionsOffset(expressions, textExpressionsOffset) {\n  return expressions.map(e => e.type === TEXT ? Object.assign({}, e, {\n    childNodeIndex: e.childNodeIndex + textExpressionsOffset\n  }) : e);\n}\n/**\n * Bind a new expression object to a DOM node\n * @param   {HTMLElement} root - DOM node where to bind the expression\n * @param   {Object} binding - binding data\n * @param   {number|null} templateTagOffset - if it's defined we need to fix the text expressions childNodeIndex offset\n * @returns {Binding} Binding object\n */\n\n\nfunction create$5(root, binding, templateTagOffset) {\n  const {\n    selector,\n    type,\n    redundantAttribute,\n    expressions\n  } = binding; // find the node to apply the bindings\n\n  const node = selector ? root.querySelector(selector) : root; // remove eventually additional attributes created only to select this node\n\n  if (redundantAttribute) node.removeAttribute(redundantAttribute);\n  const bindingExpressions = expressions || []; // init the binding\n\n  return (bindings[type] || bindings[SIMPLE])(node, Object.assign({}, binding, {\n    expressions: templateTagOffset && !selector ? fixTextExpressionsOffset(bindingExpressions, templateTagOffset) : bindingExpressions\n  }));\n}\n\nfunction createHTMLTree(html, root) {\n  const template = isTemplate(root) ? root : document.createElement('template');\n  template.innerHTML = html;\n  return template.content;\n} // for svg nodes we need a bit more work\n\n\nfunction createSVGTree(html, container) {\n  // create the SVGNode\n  const svgNode = container.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns=\"http://www.w3.org/2000/svg\">${html}</svg>`, 'application/xml').documentElement, true);\n  return svgNode;\n}\n/**\n * Create the DOM that will be injected\n * @param {Object} root - DOM node to find out the context where the fragment will be created\n * @param   {string} html - DOM to create as string\n * @returns {HTMLDocumentFragment|HTMLElement} a new html fragment\n */\n\n\nfunction createDOMTree(root, html) {\n  if (isSvg(root)) return createSVGTree(html, root);\n  return createHTMLTree(html, root);\n}\n\n/**\n * Inject the DOM tree into a target node\n * @param   {HTMLElement} el - target element\n * @param   {HTMLFragment|SVGElement} dom - dom tree to inject\n * @returns {undefined}\n */\n\nfunction injectDOM(el, dom) {\n  switch (true) {\n    case isSvg(el):\n      moveChildren(dom, el);\n      break;\n\n    case isTemplate(el):\n      el.parentNode.replaceChild(dom, el);\n      break;\n\n    default:\n      el.appendChild(dom);\n  }\n}\n\n/**\n * Create the Template DOM skeleton\n * @param   {HTMLElement} el - root node where the DOM will be injected\n * @param   {string} html - markup that will be injected into the root node\n * @returns {HTMLFragment} fragment that will be injected into the root node\n */\n\nfunction createTemplateDOM(el, html) {\n  return html && (typeof html === 'string' ? createDOMTree(el, html) : html);\n}\n/**\n * Template Chunk model\n * @type {Object}\n */\n\n\nconst TemplateChunk = Object.freeze({\n  // Static props\n  // bindings: null,\n  // bindingsData: null,\n  // html: null,\n  // isTemplateTag: false,\n  // fragment: null,\n  // children: null,\n  // dom: null,\n  // el: null,\n\n  /**\n   * Create the template DOM structure that will be cloned on each mount\n   * @param   {HTMLElement} el - the root node\n   * @returns {TemplateChunk} self\n   */\n  createDOM(el) {\n    // make sure that the DOM gets created before cloning the template\n    this.dom = this.dom || createTemplateDOM(el, this.html);\n    return this;\n  },\n\n  // API methods\n\n  /**\n   * Attach the template to a DOM node\n   * @param   {HTMLElement} el - target DOM node\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n   * @returns {TemplateChunk} self\n   */\n  mount(el, scope, parentScope, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    if (!el) throw new Error('Please provide DOM node to mount properly your template');\n    if (this.el) this.unmount(scope); // <template> tags require a bit more work\n    // the template fragment might be already created via meta outside of this call\n\n    const {\n      fragment,\n      children,\n      avoidDOMInjection\n    } = meta; // <template> bindings of course can not have a root element\n    // so we check the parent node to set the query selector bindings\n\n    const {\n      parentNode\n    } = children ? children[0] : el;\n    const isTemplateTag = isTemplate(el);\n    const templateTagOffset = isTemplateTag ? Math.max(Array.from(parentNode.childNodes).indexOf(el), 0) : null;\n    this.isTemplateTag = isTemplateTag; // create the DOM if it wasn't created before\n\n    this.createDOM(el);\n\n    if (this.dom) {\n      // create the new template dom fragment if it want already passed in via meta\n      this.fragment = fragment || this.dom.cloneNode(true);\n    } // store root node\n    // notice that for template tags the root note will be the parent tag\n\n\n    this.el = this.isTemplateTag ? parentNode : el; // create the children array only for the <template> fragments\n\n    this.children = this.isTemplateTag ? children || Array.from(this.fragment.childNodes) : null; // inject the DOM into the el only if a fragment is available\n\n    if (!avoidDOMInjection && this.fragment) injectDOM(el, this.fragment); // create the bindings\n\n    this.bindings = this.bindingsData.map(binding => create$5(this.el, binding, templateTagOffset));\n    this.bindings.forEach(b => b.mount(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Update the template with fresh data\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @returns {TemplateChunk} self\n   */\n  update(scope, parentScope) {\n    this.bindings.forEach(b => b.update(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Remove the template from the node where it was initially mounted\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {boolean|null} mustRemoveRoot - if true remove the root element,\n   * if false or undefined clean the root tag content, if null don't touch the DOM\n   * @returns {TemplateChunk} self\n   */\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.el) {\n      this.bindings.forEach(b => b.unmount(scope, parentScope, mustRemoveRoot));\n\n      switch (true) {\n        // <template> tags should be treated a bit differently\n        // we need to clear their children only if it's explicitly required by the caller\n        // via mustRemoveRoot !== null\n        case this.children && mustRemoveRoot !== null:\n          clearChildren(this.children);\n          break;\n        // remove the root node only if the mustRemoveRoot === true\n\n        case mustRemoveRoot === true:\n          removeNode(this.el);\n          break;\n        // otherwise we clean the node children\n\n        case mustRemoveRoot !== null:\n          cleanNode(this.el);\n          break;\n      }\n\n      this.el = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Clone the template chunk\n   * @returns {TemplateChunk} a clone of this object resetting the this.el property\n   */\n  clone() {\n    return Object.assign({}, this, {\n      el: null\n    });\n  }\n\n});\n/**\n * Create a template chunk wiring also the bindings\n * @param   {string|HTMLElement} html - template string\n * @param   {Array} bindings - bindings collection\n * @returns {TemplateChunk} a new TemplateChunk copy\n */\n\nfunction create$6(html, bindings) {\n  if (bindings === void 0) {\n    bindings = [];\n  }\n\n  return Object.assign({}, TemplateChunk, {\n    html,\n    bindingsData: bindings\n  });\n}\n\n/**\n * Method used to bind expressions to a DOM node\n * @param   {string|HTMLElement} html - your static template html structure\n * @param   {Array} bindings - list of the expressions to bind to update the markup\n * @returns {TemplateChunk} a new TemplateChunk object having the `update`,`mount`, `unmount` and `clone` methods\n *\n * @example\n *\n * riotDOMBindings\n *  .template(\n *   `<div expr0><!----></div><div><p expr1><!----><section expr2></section></p>`,\n *   [\n *     {\n *       selector: '[expr0]',\n *       redundantAttribute: 'expr0',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.time;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr1]',\n *       redundantAttribute: 'expr1',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.name;\n *           },\n *         },\n *         {\n *           type: 'attribute',\n *           name: 'style',\n *           evaluate(scope) {\n *             return scope.style;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr2]',\n *       redundantAttribute: 'expr2',\n *       type: bindingTypes.IF,\n *       evaluate(scope) {\n *         return scope.isVisible;\n *       },\n *       template: riotDOMBindings.template('hello there'),\n *     },\n *   ]\n * )\n */\n\nvar DOMBindings = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  template: create$6,\n  createBinding: create$5,\n  createExpression: create$2,\n  bindingTypes: bindingTypes,\n  expressionTypes: expressionTypes\n});\n\nfunction noop() {\n  return this;\n}\n/**\n * Autobind the methods of a source object to itself\n * @param   {Object} source - probably a riot tag instance\n * @param   {Array<string>} methods - list of the methods to autobind\n * @returns {Object} the original object received\n */\n\nfunction autobindMethods(source, methods) {\n  methods.forEach(method => {\n    source[method] = source[method].bind(source);\n  });\n  return source;\n}\n/**\n * Call the first argument received only if it's a function otherwise return it as it is\n * @param   {*} source - anything\n * @returns {*} anything\n */\n\nfunction callOrAssign(source) {\n  return isFunction(source) ? source.prototype && source.prototype.constructor ? new source() : source() : source;\n}\n\n/**\n * Helper function to set an immutable property\n * @param   {Object} source - object where the new property will be set\n * @param   {string} key - object key where the new property will be stored\n * @param   {*} value - value of the new property\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} - the original object modified\n */\nfunction defineProperty(source, key, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  /* eslint-disable fp/no-mutating-methods */\n  Object.defineProperty(source, key, Object.assign({\n    value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  /* eslint-enable fp/no-mutating-methods */\n\n  return source;\n}\n/**\n * Define multiple properties on a target object\n * @param   {Object} source - object where the new properties will be set\n * @param   {Object} properties - object containing as key pair the key + value properties\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} the original object modified\n */\n\nfunction defineProperties(source, properties, options) {\n  Object.entries(properties).forEach((_ref) => {\n    let [key, value] = _ref;\n    defineProperty(source, key, value, options);\n  });\n  return source;\n}\n/**\n * Define default properties if they don't exist on the source object\n * @param   {Object} source - object that will receive the default properties\n * @param   {Object} defaults - object containing additional optional keys\n * @returns {Object} the original object received enhanced\n */\n\nfunction defineDefaults(source, defaults) {\n  Object.entries(defaults).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    if (!source[key]) source[key] = value;\n  });\n  return source;\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\n\nfunction $(selector, ctx) {\n  return domToArray(typeof selector === 'string' ? (ctx || document).querySelectorAll(selector) : selector);\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Object }              name  - either the name of the attribute to set\n *                                                 or a list of properties as object key - value\n * @param   { string }                     value - the new value of the attribute (optional)\n * @returns { HTMLElement|NodeList|Array } the original array of elements passed to this function\n *\n * @example\n *\n * import { set } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * set(img, 'width', 100)\n *\n * // or also\n * set(img, {\n *   width: 300,\n *   height: 300\n * })\n *\n */\n\n\nfunction set(els, name, value) {\n  const attrs = typeof name === 'object' ? name : {\n    [name]: value\n  };\n  const props = Object.keys(attrs);\n  domToArray(els).forEach(el => {\n    props.forEach(prop => el.setAttribute(prop, attrs[prop]));\n  });\n  return els;\n}\n/**\n * Get any attribute from a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to get\n * @returns { Array|string } list of the attributes found\n *\n * @example\n *\n * import { get } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * get(img, 'width') // => '200'\n *\n * // or also\n * get(img, ['width', 'height']) // => ['200', '300']\n *\n * // or also\n * get([img1, img2], ['width', 'height']) // => [['200', '300'], ['500', '200']]\n */\n\nfunction get(els, name) {\n  return parseNodes(els, name, 'getAttribute');\n}\n\nconst CSS_BY_NAME = new Map();\nconst STYLE_NODE_SELECTOR = 'style[riot]'; // memoized curried function\n\nconst getStyleNode = (style => {\n  return () => {\n    // lazy evaluation:\n    // if this function was already called before\n    // we return its cached result\n    if (style) return style; // create a new style element or use an existing one\n    // and cache it internally\n\n    style = $(STYLE_NODE_SELECTOR)[0] || document.createElement('style');\n    set(style, 'type', 'text/css');\n    /* istanbul ignore next */\n\n    if (!style.parentNode) document.head.appendChild(style);\n    return style;\n  };\n})();\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\n\n\nvar cssManager = {\n  CSS_BY_NAME,\n\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { string } name - if it's passed we will map the css to a tagname\n   * @param { string } css - css string\n   * @returns {Object} self\n   */\n  add(name, css) {\n    if (!CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.set(name, css);\n      this.inject();\n    }\n\n    return this;\n  },\n\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   * @returns {Object} self\n   */\n  inject() {\n    getStyleNode().innerHTML = [...CSS_BY_NAME.values()].join('\\n');\n    return this;\n  },\n\n  /**\n   * Remove a tag style from the DOM\n   * @param {string} name a registered tagname\n   * @returns {Object} self\n   */\n  remove(name) {\n    if (CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.delete(name);\n      this.inject();\n    }\n\n    return this;\n  }\n\n};\n\n/**\n * Function to curry any javascript method\n * @param   {Function}  fn - the target function we want to curry\n * @param   {...[args]} acc - initial arguments\n * @returns {Function|*} it will return a function until the target function\n *                       will receive all of its arguments\n */\nfunction curry(fn) {\n  for (var _len = arguments.length, acc = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    acc[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args = [...acc, ...args];\n    return args.length < fn.length ? curry(fn, ...args) : fn(...args);\n  };\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   {HTMLElement} element - DOM node we want to inspect\n * @returns {string} name to identify this dom node in riot\n */\n\nfunction getName(element) {\n  return get(element, IS_DIRECTIVE) || element.tagName.toLowerCase();\n}\n\nconst COMPONENT_CORE_HELPERS = Object.freeze({\n  // component helpers\n  $(selector) {\n    return $(selector, this.root)[0];\n  },\n\n  $$(selector) {\n    return $(selector, this.root);\n  }\n\n});\nconst PURE_COMPONENT_API = Object.freeze({\n  [MOUNT_METHOD_KEY]: noop,\n  [UPDATE_METHOD_KEY]: noop,\n  [UNMOUNT_METHOD_KEY]: noop\n});\nconst COMPONENT_LIFECYCLE_METHODS = Object.freeze({\n  [SHOULD_UPDATE_KEY]: noop,\n  [ON_BEFORE_MOUNT_KEY]: noop,\n  [ON_MOUNTED_KEY]: noop,\n  [ON_BEFORE_UPDATE_KEY]: noop,\n  [ON_UPDATED_KEY]: noop,\n  [ON_BEFORE_UNMOUNT_KEY]: noop,\n  [ON_UNMOUNTED_KEY]: noop\n});\nconst MOCKED_TEMPLATE_INTERFACE = Object.assign({}, PURE_COMPONENT_API, {\n  clone: noop,\n  createDOM: noop\n});\n/**\n * Evaluate the component properties either from its real attributes or from its initial user properties\n * @param   {HTMLElement} element - component root\n * @param   {Object}  initialProps - initial props\n * @returns {Object} component props key value pairs\n */\n\nfunction evaluateInitialProps(element, initialProps) {\n  if (initialProps === void 0) {\n    initialProps = {};\n  }\n\n  return Object.assign({}, DOMattributesToObject(element), callOrAssign(initialProps));\n}\n/**\n * Bind a DOM node to its component object\n * @param   {HTMLElement} node - html node mounted\n * @param   {Object} component - Riot.js component object\n * @returns {Object} the component object received as second argument\n */\n\n\nconst bindDOMNodeToComponentObject = (node, component) => node[DOM_COMPONENT_INSTANCE_PROPERTY] = component;\n/**\n * Wrap the Riot.js core API methods using a mapping function\n * @param   {Function} mapFunction - lifting function\n * @returns {Object} an object having the { mount, update, unmount } functions\n */\n\n\nfunction createCoreAPIMethods(mapFunction) {\n  return [MOUNT_METHOD_KEY, UPDATE_METHOD_KEY, UNMOUNT_METHOD_KEY].reduce((acc, method) => {\n    acc[method] = mapFunction(method);\n    return acc;\n  }, {});\n}\n/**\n * Factory function to create the component templates only once\n * @param   {Function} template - component template creation function\n * @param   {Object} components - object containing the nested components\n * @returns {TemplateChunk} template chunk object\n */\n\n\nfunction componentTemplateFactory(template, components) {\n  return template(create$6, expressionTypes, bindingTypes, name => {\n    return components[name] || COMPONENTS_IMPLEMENTATION_MAP.get(name);\n  });\n}\n/**\n * Create a pure component\n * @param   {Function} pureFactoryFunction - pure component factory function\n * @param   {Array} options.slots - component slots\n * @param   {Array} options.attributes - component attributes\n * @param   {Array} options.template - template factory function\n * @param   {Array} options.template - template factory function\n * @param   {any} options.props - initial component properties\n * @returns {Object} pure component object\n */\n\n\nfunction createPureComponent(pureFactoryFunction, _ref) {\n  let {\n    slots,\n    attributes,\n    props,\n    css,\n    template\n  } = _ref;\n  if (template) panic('Pure components can not have html');\n  if (css) panic('Pure components do not have css');\n  const component = defineDefaults(pureFactoryFunction({\n    slots,\n    attributes,\n    props\n  }), PURE_COMPONENT_API);\n  return createCoreAPIMethods(method => function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // intercept the mount calls to bind the DOM node to the pure object created\n    // see also https://github.com/riot/riot/issues/2806\n    if (method === MOUNT_METHOD_KEY) {\n      const [el] = args;\n      bindDOMNodeToComponentObject(el, component);\n    }\n\n    component[method](...args);\n    return component;\n  });\n}\n/**\n * Create the component interface needed for the @riotjs/dom-bindings tag bindings\n * @param   {string} options.css - component css\n * @param   {Function} options.template - functon that will return the dom-bindings template function\n * @param   {Object} options.exports - component interface\n * @param   {string} options.name - component name\n * @returns {Object} component like interface\n */\n\n\nfunction createComponent(_ref2) {\n  let {\n    css,\n    template,\n    exports,\n    name\n  } = _ref2;\n  const templateFn = template ? componentTemplateFactory(template, exports ? createSubcomponents(exports.components) : {}) : MOCKED_TEMPLATE_INTERFACE;\n  return (_ref3) => {\n    let {\n      slots,\n      attributes,\n      props\n    } = _ref3;\n    // pure components rendering will be managed by the end user\n    if (exports && exports[IS_PURE_SYMBOL]) return createPureComponent(exports, {\n      slots,\n      attributes,\n      props,\n      css,\n      template\n    });\n    const componentAPI = callOrAssign(exports) || {};\n    const component = defineComponent({\n      css,\n      template: templateFn,\n      componentAPI,\n      name\n    })({\n      slots,\n      attributes,\n      props\n    }); // notice that for the components create via tag binding\n    // we need to invert the mount (state/parentScope) arguments\n    // the template bindings will only forward the parentScope updates\n    // and never deal with the component state\n\n    return {\n      mount(element, parentScope, state) {\n        return component.mount(element, state, parentScope);\n      },\n\n      update(parentScope, state) {\n        return component.update(state, parentScope);\n      },\n\n      unmount(preserveRoot) {\n        return component.unmount(preserveRoot);\n      }\n\n    };\n  };\n}\n/**\n * Component definition function\n * @param   {Object} implementation - the componen implementation will be generated via compiler\n * @param   {Object} component - the component initial properties\n * @returns {Object} a new component implementation object\n */\n\nfunction defineComponent(_ref4) {\n  let {\n    css,\n    template,\n    componentAPI,\n    name\n  } = _ref4;\n  // add the component css into the DOM\n  if (css && name) cssManager.add(name, css);\n  return curry(enhanceComponentAPI)(defineProperties( // set the component defaults without overriding the original component API\n  defineDefaults(componentAPI, Object.assign({}, COMPONENT_LIFECYCLE_METHODS, {\n    [STATE_KEY]: {}\n  })), Object.assign({\n    // defined during the component creation\n    [SLOTS_KEY]: null,\n    [ROOT_KEY]: null\n  }, COMPONENT_CORE_HELPERS, {\n    name,\n    css,\n    template\n  })));\n}\n/**\n * Create the bindings to update the component attributes\n * @param   {HTMLElement} node - node where we will bind the expressions\n * @param   {Array} attributes - list of attribute bindings\n * @returns {TemplateChunk} - template bindings object\n */\n\nfunction createAttributeBindings(node, attributes) {\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  const expressions = attributes.map(a => create$2(node, a));\n  const binding = {};\n  return Object.assign(binding, Object.assign({\n    expressions\n  }, createCoreAPIMethods(method => scope => {\n    expressions.forEach(e => e[method](scope));\n    return binding;\n  })));\n}\n/**\n * Create the subcomponents that can be included inside a tag in runtime\n * @param   {Object} components - components imported in runtime\n * @returns {Object} all the components transformed into Riot.Component factory functions\n */\n\n\nfunction createSubcomponents(components) {\n  if (components === void 0) {\n    components = {};\n  }\n\n  return Object.entries(callOrAssign(components)).reduce((acc, _ref5) => {\n    let [key, value] = _ref5;\n    acc[camelToDashCase(key)] = createComponent(value);\n    return acc;\n  }, {});\n}\n/**\n * Run the component instance through all the plugins set by the user\n * @param   {Object} component - component instance\n * @returns {Object} the component enhanced by the plugins\n */\n\n\nfunction runPlugins(component) {\n  return [...PLUGINS_SET].reduce((c, fn) => fn(c) || c, component);\n}\n/**\n * Compute the component current state merging it with its previous state\n * @param   {Object} oldState - previous state object\n * @param   {Object} newState - new state givent to the `update` call\n * @returns {Object} new object state\n */\n\n\nfunction computeState(oldState, newState) {\n  return Object.assign({}, oldState, callOrAssign(newState));\n}\n/**\n * Add eventually the \"is\" attribute to link this DOM node to its css\n * @param {HTMLElement} element - target root node\n * @param {string} name - name of the component mounted\n * @returns {undefined} it's a void function\n */\n\n\nfunction addCssHook(element, name) {\n  if (getName(element) !== name) {\n    set(element, IS_DIRECTIVE, name);\n  }\n}\n/**\n * Component creation factory function that will enhance the user provided API\n * @param   {Object} component - a component implementation previously defined\n * @param   {Array} options.slots - component slots generated via riot compiler\n * @param   {Array} options.attributes - attribute expressions generated via riot compiler\n * @returns {Riot.Component} a riot component instance\n */\n\n\nfunction enhanceComponentAPI(component, _ref6) {\n  let {\n    slots,\n    attributes,\n    props\n  } = _ref6;\n  return autobindMethods(runPlugins(defineProperties(Object.create(component), {\n    mount(element, state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      this[ATTRIBUTES_KEY_SYMBOL] = createAttributeBindings(element, attributes).mount(parentScope);\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, evaluateInitialProps(element, props), evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions))));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[TEMPLATE_KEY_SYMBOL] = this.template.createDOM(element).clone(); // link this object to the DOM node\n\n      bindDOMNodeToComponentObject(element, this); // add eventually the 'is' attribute\n\n      component.name && addCssHook(element, component.name); // define the root element\n\n      defineProperty(this, ROOT_KEY, element); // define the slots array\n\n      defineProperty(this, SLOTS_KEY, slots); // before mount lifecycle event\n\n      this[ON_BEFORE_MOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[PARENT_KEY_SYMBOL] = parentScope; // mount the template\n\n      this[TEMPLATE_KEY_SYMBOL].mount(element, this, parentScope);\n      this[ON_MOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    update(state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      if (parentScope) {\n        this[PARENT_KEY_SYMBOL] = parentScope;\n        this[ATTRIBUTES_KEY_SYMBOL].update(parentScope);\n      }\n\n      const newProps = evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions);\n      if (this[SHOULD_UPDATE_KEY](newProps, this[PROPS_KEY]) === false) return;\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, this[PROPS_KEY], newProps)));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[ON_BEFORE_UPDATE_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[TEMPLATE_KEY_SYMBOL].update(this, this[PARENT_KEY_SYMBOL]);\n      this[ON_UPDATED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    unmount(preserveRoot) {\n      this[ON_BEFORE_UNMOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[ATTRIBUTES_KEY_SYMBOL].unmount(); // if the preserveRoot is null the template html will be left untouched\n      // in that case the DOM cleanup will happen differently from a parent node\n\n      this[TEMPLATE_KEY_SYMBOL].unmount(this, this[PARENT_KEY_SYMBOL], preserveRoot === null ? null : !preserveRoot);\n      this[ON_UNMOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    }\n\n  })), Object.keys(component).filter(prop => isFunction(component[prop])));\n}\n/**\n * Component initialization function starting from a DOM node\n * @param   {HTMLElement} element - element to upgrade\n * @param   {Object} initialProps - initial component properties\n * @param   {string} componentName - component id\n * @returns {Object} a new component instance bound to a DOM node\n */\n\nfunction mountComponent(element, initialProps, componentName) {\n  const name = componentName || getName(element);\n  if (!COMPONENTS_IMPLEMENTATION_MAP.has(name)) panic(`The component named \"${name}\" was never registered`);\n  const component = COMPONENTS_IMPLEMENTATION_MAP.get(name)({\n    props: initialProps\n  });\n  return component.mount(element);\n}\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst {\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY$1,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP$1,\n  PLUGINS_SET: PLUGINS_SET$1\n} = globals;\n/**\n * Riot public api\n */\n\n/**\n * Register a custom tag by name\n * @param   {string} name - component name\n * @param   {Object} implementation - tag implementation\n * @returns {Map} map containing all the components implementations\n */\n\nfunction register(name, _ref) {\n  let {\n    css,\n    template,\n    exports\n  } = _ref;\n  if (COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was already registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.set(name, createComponent({\n    name,\n    css,\n    template,\n    exports\n  }));\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Unregister a riot web component\n * @param   {string} name - component name\n * @returns {Map} map containing all the components implementations\n */\n\nfunction unregister(name) {\n  if (!COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was never registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.delete(name);\n  cssManager.remove(name);\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Mounting function that will work only for the components that were globally registered\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {Object} initialProps - the initial component properties\n * @param   {string} name - optional component name\n * @returns {Array} list of nodes upgraded\n */\n\nfunction mount(selector, initialProps, name) {\n  return $(selector).map(element => mountComponent(element, initialProps, name));\n}\n/**\n * Sweet unmounting helper function for the DOM node mounted manually by the user\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {boolean|null} keepRootElement - if true keep the root element\n * @returns {Array} list of nodes unmounted\n */\n\nfunction unmount(selector, keepRootElement) {\n  return $(selector).map(element => {\n    if (element[DOM_COMPONENT_INSTANCE_PROPERTY$1]) {\n      element[DOM_COMPONENT_INSTANCE_PROPERTY$1].unmount(keepRootElement);\n    }\n\n    return element;\n  });\n}\n/**\n * Define a riot plugin\n * @param   {Function} plugin - function that will receive all the components created\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction install(plugin) {\n  if (!isFunction(plugin)) panic('Plugins must be of type function');\n  if (PLUGINS_SET$1.has(plugin)) panic('This plugin was already installed');\n  PLUGINS_SET$1.add(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Uninstall a riot plugin\n * @param   {Function} plugin - plugin previously installed\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction uninstall(plugin) {\n  if (!PLUGINS_SET$1.has(plugin)) panic('This plugin was never installed');\n  PLUGINS_SET$1.delete(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Helper method to create component without relying on the registered ones\n * @param   {Object} implementation - component implementation\n * @returns {Function} function that will allow you to mount a riot component on a DOM node\n */\n\nfunction component(implementation) {\n  return function (el, props, _temp) {\n    let {\n      slots,\n      attributes,\n      parentScope\n    } = _temp === void 0 ? {} : _temp;\n    return compose(c => c.mount(el, parentScope), c => c({\n      props,\n      slots,\n      attributes\n    }), createComponent)(implementation);\n  };\n}\n/**\n * Lift a riot component Interface into a pure riot object\n * @param   {Function} func - RiotPureComponent factory function\n * @returns {Function} the lifted original function received as argument\n */\n\nfunction pure(func) {\n  if (!isFunction(func)) panic('riot.pure accepts only arguments of type \"function\"');\n  func[IS_PURE_SYMBOL] = true;\n  return func;\n}\n/** @type {string} current riot version */\n\nconst version = 'v4.13.4'; // expose some internal stuff that might be used from external tools\n\nconst __ = {\n  cssManager,\n  DOMBindings,\n  createComponent,\n  defineComponent,\n  globals\n};\n\nexport { __, component, install, mount, pure, register, uninstall, unmount, unregister, version };\n","import { component, pure } from 'riot'\n\n// this object will contain all the components implementations lazy loaded\nconst cache = new WeakMap()\n\n// expose the cache as static property\nlazy.cache = cache\n\n// static attribute in case we want to just export a lazy riot component\nlazy.export = function lazyExport(Loader, Component) {\n  // it could be that the user don't want to use a loader for whatever reason\n  const hasLoader = Loader && Component\n  const LazyComponent = hasLoader ? Component : Loader\n  const load = () => typeof LazyComponent === 'function' ? LazyComponent() : Promise.resolve(LazyComponent)\n  const cachedComponent = cache.get(LazyComponent)\n\n  return pure(({ slots, attributes, props }) => ({\n    mount(el, parentScope) {\n      this.el = el\n      this.isMounted = true\n      const mount = () => this.mountLazyComponent(parentScope)\n\n      if (cachedComponent) {\n        mount()\n      } else {\n        if (hasLoader) this.createManagedComponent(Loader, parentScope)\n\n        load().then(data => {\n          cache.set(LazyComponent, data.default || data)\n          mount()\n        })\n      }\n    },\n    createManagedComponent(Child, parentScope) {\n      this.component = component(Child)(this.el, props, {\n        attributes, slots, parentScope\n      })\n    },\n    mountLazyComponent(parentScope) {\n      // if this component was unmounted just return here\n      if (!this.isMounted) return\n\n      // unmount the loader if it was previously created\n      // notice the true flat to keep the root node\n      if (this.component) this.component.unmount(true)\n\n      // replace the old component instance with the new lazy loaded component\n      this.createManagedComponent(cache.get(LazyComponent), parentScope)\n    },\n    update(parentScope) {\n      if (this.isMounted && this.component) this.component.update({}, parentScope)\n    },\n    unmount(...args) {\n      this.isMounted = false\n\n      if (this.component) this.component.unmount(...args)\n    }\n  }))\n}\n\nexport default function lazy(Loader, Component) {\n  return {\n    name: 'lazy',\n    exports: lazy.export(Loader, Component)\n  }\n}","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","import { __, pure } from 'riot';\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n  var tokens = [];\n  var i = 0;\n\n  while (i < str.length) {\n    var char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({\n        type: \"MODIFIER\",\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({\n        type: \"ESCAPED_CHAR\",\n        index: i++,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({\n        type: \"OPEN\",\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({\n        type: \"CLOSE\",\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === \":\") {\n      var name = \"\";\n      var j = i + 1;\n\n      while (j < str.length) {\n        var code = str.charCodeAt(j);\n\n        if ( // `0-9`\n        code >= 48 && code <= 57 || // `A-Z`\n        code >= 65 && code <= 90 || // `a-z`\n        code >= 97 && code <= 122 || // `_`\n        code === 95) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(\"Missing parameter name at \" + i);\n      tokens.push({\n        type: \"NAME\",\n        index: i,\n        value: name\n      });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      var count = 1;\n      var pattern = \"\";\n      var j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + j);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(\"Capturing groups are not allowed at \" + j);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(\"Unbalanced pattern at \" + i);\n      if (!pattern) throw new TypeError(\"Missing pattern at \" + i);\n      tokens.push({\n        type: \"PATTERN\",\n        index: i,\n        value: pattern\n      });\n      i = j;\n      continue;\n    }\n\n    tokens.push({\n      type: \"CHAR\",\n      index: i,\n      value: str[i++]\n    });\n  }\n\n  tokens.push({\n    type: \"END\",\n    index: i,\n    value: \"\"\n  });\n  return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\n\n\nfunction parse(str, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var tokens = lexer(str);\n  var _a = options.prefixes,\n      prefixes = _a === void 0 ? \"./\" : _a;\n  var defaultPattern = \"[^\" + escapeString(options.delimiter || \"/#?\") + \"]+?\";\n  var result = [];\n  var key = 0;\n  var i = 0;\n  var path = \"\";\n\n  var tryConsume = function tryConsume(type) {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  var mustConsume = function mustConsume(type) {\n    var value = tryConsume(type);\n    if (value !== undefined) return value;\n    var _a = tokens[i],\n        nextType = _a.type,\n        index = _a.index;\n    throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n  };\n\n  var consumeText = function consumeText() {\n    var result = \"\";\n    var value; // tslint:disable-next-line\n\n    while (value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\")) {\n      result += value;\n    }\n\n    return result;\n  };\n\n  while (i < tokens.length) {\n    var char = tryConsume(\"CHAR\");\n    var name = tryConsume(\"NAME\");\n    var pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      var prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix: prefix,\n        suffix: \"\",\n        pattern: pattern || defaultPattern,\n        modifier: tryConsume(\"MODIFIER\") || \"\"\n      });\n      continue;\n    }\n\n    var value = char || tryConsume(\"ESCAPED_CHAR\");\n\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    var open = tryConsume(\"OPEN\");\n\n    if (open) {\n      var prefix = consumeText();\n      var name_1 = tryConsume(\"NAME\") || \"\";\n      var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n      var suffix = consumeText();\n      mustConsume(\"CLOSE\");\n      result.push({\n        name: name_1 || (pattern_1 ? key++ : \"\"),\n        pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n        prefix: prefix,\n        suffix: suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\"\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\n\nfunction compile(str, options) {\n  return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\n\nfunction tokensToFunction(tokens, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var reFlags = flags(options);\n  var _a = options.encode,\n      encode = _a === void 0 ? function (x) {\n    return x;\n  } : _a,\n      _b = options.validate,\n      validate = _b === void 0 ? true : _b; // Compile all the tokens into regexps.\n\n  var matches = tokens.map(function (token) {\n    if (typeof token === \"object\") {\n      return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n    }\n  });\n  return function (data) {\n    var path = \"\";\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      var value = data ? data[token.name] : undefined;\n      var optional = token.modifier === \"?\" || token.modifier === \"*\";\n      var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not repeat, but got an array\");\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n          throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not be empty\");\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          var segment = encode(value[j], token);\n\n          if (validate && !matches[i].test(segment)) {\n            throw new TypeError(\"Expected all \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        var segment = encode(String(value), token);\n\n        if (validate && !matches[i].test(segment)) {\n          throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n      var typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to be \" + typeOfMessage);\n    }\n\n    return path;\n  };\n}\n/**\n * Escape a regular expression string.\n */\n\nfunction escapeString(str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\n\n\nfunction flags(options) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\n\n\nfunction regexpToRegexp(path, keys) {\n  if (!keys) return path; // Use a negative lookahead to match only capturing groups.\n\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: \"\",\n        suffix: \"\",\n        modifier: \"\",\n        pattern: \"\"\n      });\n    }\n  }\n\n  return path;\n}\n/**\n * Transform an array into a regexp.\n */\n\n\nfunction arrayToRegexp(paths, keys, options) {\n  var parts = paths.map(function (path) {\n    return pathToRegexp(path, keys, options).source;\n  });\n  return new RegExp(\"(?:\" + parts.join(\"|\") + \")\", flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\n\n\nfunction stringToRegexp(path, keys, options) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\n\n\nfunction tokensToRegexp(tokens, keys, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.strict,\n      strict = _a === void 0 ? false : _a,\n      _b = options.start,\n      start = _b === void 0 ? true : _b,\n      _c = options.end,\n      end = _c === void 0 ? true : _c,\n      _d = options.encode,\n      encode = _d === void 0 ? function (x) {\n    return x;\n  } : _d;\n  var endsWith = \"[\" + escapeString(options.endsWith || \"\") + \"]|$\";\n  var delimiter = \"[\" + escapeString(options.delimiter || \"/#?\") + \"]\";\n  var route = start ? \"^\" : \"\"; // Iterate over the tokens and create our regexp string.\n\n  for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n    var token = tokens_1[_i];\n\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      var prefix = escapeString(encode(token.prefix));\n      var suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            var mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += \"(?:\" + prefix + \"((?:\" + token.pattern + \")(?:\" + suffix + prefix + \"(?:\" + token.pattern + \"))*)\" + suffix + \")\" + mod;\n          } else {\n            route += \"(?:\" + prefix + \"(\" + token.pattern + \")\" + suffix + \")\" + token.modifier;\n          }\n        } else {\n          route += \"(\" + token.pattern + \")\" + token.modifier;\n        }\n      } else {\n        route += \"(?:\" + prefix + suffix + \")\" + token.modifier;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += delimiter + \"?\";\n    route += !options.endsWith ? \"$\" : \"(?=\" + endsWith + \")\";\n  } else {\n    var endToken = tokens[tokens.length - 1];\n    var isEndDelimited = typeof endToken === \"string\" ? delimiter.indexOf(endToken[endToken.length - 1]) > -1 : // tslint:disable-next-line\n    endToken === undefined;\n\n    if (!strict) {\n      route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n    }\n\n    if (!isEndDelimited) {\n      route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\n\nfunction pathToRegexp(path, keys, options) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n\n/**\n * Cancel token\n * @private\n * @type { Symbol }\n */\nconst CANCEL = Symbol();\n/**\n * Helper that can be returned by ruit function to cancel the tasks chain\n * @returns { Symbol } internal private constant\n * @example\n *\n * ruit(\n *   100,\n *   num => Math.random() * num\n *   num => num > 50 ? ruit.cancel() : num\n *   num => num - 2\n * ).then(result => {\n *   console.log(result) // here we will get only number lower than 50\n * })\n *\n */\n\nruit.cancel = () => CANCEL;\n/**\n * The same as ruit() but with the arguments inverted from right to left\n * @param   { * } tasks - list of tasks to process sequentially\n * @returns { Promise } a promise containing the result of the whole chain\n * @example\n *\n * const curry = f => a => b => f(a, b)\n * const add = (a, b) => a + b\n *\n * const addOne = curry(add)(1)\n *\n * const squareAsync = (num) => {\n *   return new Promise(r => {\n *     setTimeout(r, 500, num * 2)\n *   })\n * }\n *\n * // a -> a + a -> a * 2\n * // basically from right to left: 1 => 1 + 1 => 2 * 2\n * ruit.compose(squareAsync, addOne, 1).then(result => console.log(result)) // 4\n */\n\n\nruit.compose = function () {\n  for (var _len = arguments.length, tasks = new Array(_len), _key = 0; _key < _len; _key++) {\n    tasks[_key] = arguments[_key];\n  }\n\n  return ruit(...tasks.reverse());\n};\n/**\n * Serialize a list of sync and async tasks from left to right\n * @param   { * } tasks - list of tasks to process sequentially\n * @returns { Promise } a promise containing the result of the whole chain\n * @example\n *\n * const curry = f => a => b => f(a, b)\n * const add = (a, b) => a + b\n *\n * const addOne = curry(add)(1)\n *\n * const squareAsync = (num) => {\n *   return new Promise(r => {\n *     setTimeout(r, 500, num * 2)\n *   })\n * }\n *\n * // a -> a + a -> a * 2\n * // basically from left to right: 1 => 1 + 1 => 2 * 2\n * ruit(1, addOne, squareAsync).then(result => console.log(result)) // 4\n */\n\n\nfunction ruit() {\n  for (var _len2 = arguments.length, tasks = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    tasks[_key2] = arguments[_key2];\n  }\n\n  return new Promise((resolve, reject) => {\n    return function run(queue, result) {\n      if (!queue.length) return resolve(result);\n      const [task, ...rest] = queue;\n      const value = typeof task === 'function' ? task(result) : task;\n\n      const done = v => run(rest, v); // check against nil values\n\n\n      if (value != null) {\n        if (value === CANCEL) return;\n        if (value.then) return value.then(done, reject);\n      }\n\n      return Promise.resolve(done(value));\n    }(tasks);\n  });\n}\n\nconst API_METHODS = new Set();\nconst UNSUBSCRIBE_SYMBOL = Symbol();\nconst UNSUBSCRIBE_METHOD = 'off';\nconst CANCEL_METHOD = 'cancel';\n/**\n * Factory function to create the stream generator\n * @private\n * @param {Set} modifiers - stream input modifiers\n * @returns {Generator} the stream generator\n */\n\nfunction createStream(modifiers) {\n  const stream = function* stream() {\n    while (true) {\n      // get the initial stream value\n      const input = yield; // run the input sequence\n\n      yield ruit(input, ...modifiers);\n    }\n  }(); // start the stream\n\n\n  stream.next();\n  return stream;\n}\n/**\n * Dispatch a value to several listeners\n * @private\n * @param   {Set} callbacks - callbacks collection\n * @param   {*} value - anything\n * @returns {Set} the callbacks received\n */\n\n\nfunction dispatch(callbacks, value) {\n  callbacks.forEach(f => {\n    // unsubscribe the callback if erre.unsubscribe() will be returned\n    if (f(value) === UNSUBSCRIBE_SYMBOL) callbacks.delete(f);\n  });\n  return callbacks;\n}\n/**\n * Throw a panic error\n * @param {string} message - error message\n * @returns {Error} an error object\n */\n\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Install an erre plugin adding it to the API\n * @param   {string} name - plugin name\n * @param   {Function} fn - new erre API method\n * @returns {Function} return the erre function\n */\n\n\nerre.install = function (name, fn) {\n  if (!name || typeof name !== 'string') panic('Please provide a name (as string) for your erre plugin');\n  if (!fn || typeof fn !== 'function') panic('Please provide a function for your erre plugin');\n\n  if (API_METHODS.has(name)) {\n    panic(`The ${name} is already part of the erre API, please provide a different name`);\n  } else {\n    erre[name] = fn;\n    API_METHODS.add(name);\n  }\n\n  return erre;\n}; // alias for ruit canel to stop a stream chain\n\n\nerre.install(CANCEL_METHOD, ruit.cancel); // unsubscribe helper\n\nerre.install(UNSUBSCRIBE_METHOD, () => UNSUBSCRIBE_SYMBOL);\n/**\n * Stream constuction function\n * @param   {...Function} fns - stream modifiers\n * @returns {Object} erre instance\n */\n\nfunction erre() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  const [success, error, end, modifiers] = [new Set(), new Set(), new Set(), new Set(fns)],\n        generator = createStream(modifiers),\n        stream = Object.create(generator),\n        addToCollection = collection => fn => collection.add(fn) && stream,\n        deleteFromCollection = collection => fn => collection.delete(fn) ? stream : panic('Couldn\\'t remove handler passed by reference');\n\n  return Object.assign(stream, {\n    on: Object.freeze({\n      value: addToCollection(success),\n      error: addToCollection(error),\n      end: addToCollection(end)\n    }),\n    off: Object.freeze({\n      value: deleteFromCollection(success),\n      error: deleteFromCollection(error),\n      end: deleteFromCollection(end)\n    }),\n    connect: addToCollection(modifiers),\n\n    push(input) {\n      const {\n        value,\n        done\n      } = stream.next(input); // dispatch the stream events\n\n      if (!done) {\n        value.then(res => dispatch(success, res), err => dispatch(error, err));\n      }\n\n      return stream;\n    },\n\n    end() {\n      // kill the stream\n      generator.return(); // dispatch the end event\n\n      dispatch(end) // clean up all the collections\n      ;\n      [success, error, end, modifiers].forEach(el => el.clear());\n      return stream;\n    },\n\n    fork() {\n      return erre(...modifiers);\n    },\n\n    next(input) {\n      // get the input and run eventually the promise\n      const result = generator.next(input); // pause to the next iteration\n\n      generator.next();\n      return result;\n    }\n\n  });\n}\n\nconst hasWindow = typeof window !== 'undefined';\n\nconst isString = str => typeof str === 'string'; // the url parsing function depends on the platform, on node we rely on the 'url' module\n\n/* istanbul ignore next */\n\n\nconst parseURL = function parseURL() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return hasWindow ? new URL(...args) : require('url').parse(...args);\n};\n/**\n * Replace the base path from a path\n * @param   {string} path - router path string\n * @returns {string} path cleaned up without the base\n */\n\n\nconst replaceBase = path => path.replace(defaults.base, '');\n/**\n * Try to match the current path or skip it\n * @param   {RegEx} pathRegExp - target path transformed by pathToRegexp\n * @returns {string|Symbol} if the path match we return it otherwise we cancel the stream\n */\n\n\nconst matchOrSkip = pathRegExp => path => match(path, pathRegExp) ? path : erre.cancel();\n/**\n * Combine 2 streams connecting the events of dispatcherStream to the receiverStream\n * @param   {Stream} dispatcherStream - main stream dispatching events\n * @param   {Stream} receiverStream - sub stream receiving events from the dispatcher\n * @returns {Stream} receiverStream\n */\n\n\nconst joinStreams = (dispatcherStream, receiverStream) => {\n  dispatcherStream.on.value(receiverStream.push);\n  receiverStream.on.end(() => {\n    dispatcherStream.off.value(receiverStream.push);\n  });\n  return receiverStream;\n};\n/**\n * Error handling function\n * @param   {Error} error - error to catch\n * @returns {void}\n */\n\n\nconst panic$1 = error => {\n  if (defaults.silentErrors) return;\n  throw new Error(error);\n}; // make sure that the router will always receive strings params\n\n\nconst filterStrings = str => isString(str) ? str : erre.cancel(); // create the streaming router\n\nconst router = erre(filterStrings).on.error(panic$1); // cast the values of this stream always to string\n\n/* @type {object} general configuration object */\n\nconst defaults = {\n  // custom option\n  base: '',\n  silentErrors: false,\n  // pathToRegexp options\n  sensitive: false,\n  strict: false,\n  end: true,\n  start: true,\n  delimiter: '/#?',\n  encode: undefined,\n  endsWith: undefined,\n  prefixes: './'\n};\n/**\n * Merge the user options with the defaults\n * @param   {Object} options - custom user options\n * @returns {Object} options object merged with defaults\n */\n\nconst mergeOptions = options => Object.assign({}, defaults, options);\n/* {@link https://github.com/pillarjs/path-to-regexp#usage} */\n\nconst toRegexp = (path, keys, options) => pathToRegexp(path, keys, mergeOptions(options));\n/**\n * Convert a router entry to a real path computing the url parameters\n * @param   {string} path - router path string\n * @param   {Object} params - named matched parameters\n * @param   {Object} options - pathToRegexp options object\n * @returns {string} computed url string\n */\n\nconst toPath = (path, params, options) => compile(path, mergeOptions(options))(params);\n/**\n * Parse a string path generating an object containing\n * @param   {string} path - target path\n * @param   {RegExp} pathRegExp - path transformed to regexp via pathToRegexp\n * @param   {Object} options - object containing the base path\n * @returns {URL} url object enhanced with the `match` attribute\n */\n\nconst toURL = (path, pathRegExp, options) => {\n  const {\n    base\n  } = mergeOptions(options);\n  const [, ...params] = pathRegExp.exec(path);\n  const url = parseURL(path, base); // extend the url object adding the matched params\n\n  url.params = params;\n  return url;\n};\n/**\n * Return true if a path will be matched\n * @param   {string} path - target path\n * @param   {RegExp} pathRegExp - path transformed to regexp via pathToRegexp\n * @returns {boolean} true if the path matches the regexp\n */\n\nconst match = (path, pathRegExp) => pathRegExp.test(path);\n/**\n * Factory function to create an sequence of functions to pass to erre.js\n * This function will be used in the erre stream\n * @param   {RegExp} pathRegExp - path transformed to regexp via pathToRegexp\n * @param   {Object} options - pathToRegexp options object\n * @returns {Array} a functions array that will be used as stream pipe for erre.js\n */\n\nconst createURLStreamPipe = (pathRegExp, options) => [replaceBase, matchOrSkip(pathRegExp), path => toURL(path, pathRegExp, options)];\n/**\n * Create a fork of the main router stream\n * @param   {string} path - route to match\n * @param   {Object} options - pathToRegexp options object\n * @returns {Stream} new route stream\n */\n\nfunction createRoute(path, options) {\n  const pathRegExp = pathToRegexp(path, [], options);\n  const URLStream = erre(...createURLStreamPipe(pathRegExp, options));\n  return joinStreams(router, URLStream).on.error(panic$1);\n}\n\nconst getCurrentRoute = (currentRoute => {\n  // listen the route changes events to store the current route\n  router.on.value(r => currentRoute = r);\n  return () => {\n    return currentRoute;\n  };\n})(null);\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst getInitialRouteValue = (pathToRegexp, path, options) => {\n  const route = compose(\n    ...createURLStreamPipe(pathToRegexp, options).reverse()\n  )(path);\n\n  return route.params ? route : null\n};\n\nvar routeHoc = {\n  'css': null,\n\n  'exports': {\n    onBeforeMount(props) {\n      const currentRoute = getCurrentRoute();\n      const pathToRegexp = toRegexp(props.path, [], props);\n\n      this.state = {\n        pathToRegexp,\n        route: currentRoute && match(currentRoute, pathToRegexp) ?\n          getInitialRouteValue(pathToRegexp, currentRoute, props) :\n          null\n      };\n\n      router.on.value(this.onBeforeRoute);\n      this.stream = createRoute(props.path, props).on.value(this.onRoute);\n    },\n\n    onBeforeRoute(path, pathToRegexp) {\n      if (this.state.route && !match(path, this.state.pathToRegexp)) {\n        this.callLifecycleProperty('onBeforeUnmount', createRoute);\n        this.update({\n          route: null\n        });\n        this.callLifecycleProperty('onUnmounted', createRoute);\n      }\n    },\n\n    onRoute(route) {\n      this.callLifecycleProperty('onBeforeMount', route);\n      this.update({route});\n      this.callLifecycleProperty('onMounted', route);\n    },\n\n    callLifecycleProperty(method, ...params) {\n      if (this.props[method]) this.props[method](...params);\n    },\n\n    onUnmounted() {\n      router.off.value(this.onBeforeRoute);\n      this.stream.end();\n    }\n  },\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template('<template expr0=\"expr0\"></template>', [{\n      'type': bindingTypes.IF,\n\n      'evaluate': function(scope) {\n        return scope.state.route;\n      },\n\n      'redundantAttribute': 'expr0',\n      'selector': '[expr0]',\n\n      'template': template('<slot expr1=\"expr1\"></slot>', [{\n        'type': bindingTypes.SLOT,\n\n        'attributes': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'route',\n\n          'evaluate': function(scope) {\n            return scope.state.route;\n          }\n        }],\n\n        'name': 'default',\n        'redundantAttribute': 'expr1',\n        'selector': '[expr1]'\n      }])\n    }]);\n  },\n\n  'name': 'route-hoc'\n};\n\nfunction setBase(base) {\n  defaults.base = base;\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic$2(message) {\n  throw new Error(message);\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Split a string into several items separed by spaces\n * @param   { string } l - events list\n * @returns { Array } all the events detected\n * @private\n */\n\nconst split = l => l.split(/\\s/);\n/**\n * Set a listener for all the events received separated by spaces\n * @param   { HTMLElement|NodeList|Array } els     - DOM node/s where the listeners will be bound\n * @param   { string }                     evList  - list of events we want to bind or unbind space separated\n * @param   { Function }                   cb      - listeners callback\n * @param   { string }                     method  - either 'addEventListener' or 'removeEventListener'\n * @param   { Object }                     options - event options (capture, once and passive)\n * @returns { undefined }\n * @private\n */\n\n\nfunction manageEvents(els, evList, cb, method, options) {\n  els = domToArray(els);\n  split(evList).forEach(e => {\n    els.forEach(el => el[method](e, cb, options || false));\n  });\n}\n/**\n * Set a listener for all the events received separated by spaces\n * @param   { HTMLElement|Array } els    - DOM node/s where the listeners will be bound\n * @param   { string }            evList - list of events we want to bind space separated\n * @param   { Function }          cb     - listeners callback\n * @param   { Object }            options - event options (capture, once and passive)\n * @returns { HTMLElement|NodeList|Array } DOM node/s and first argument of the function\n */\n\n\nfunction add(els, evList, cb, options) {\n  manageEvents(els, evList, cb, 'addEventListener', options);\n  return els;\n}\n/**\n * Remove all the listeners for the events received separated by spaces\n * @param   { HTMLElement|Array } els     - DOM node/s where the events will be unbind\n * @param   { string }            evList  - list of events we want unbind space separated\n * @param   { Function }          cb      - listeners callback\n * @param   { Object }             options - event options (capture, once and passive)\n * @returns { HTMLElement|NodeList|Array }  DOM node/s and first argument of the function\n */\n\nfunction remove(els, evList, cb, options) {\n  manageEvents(els, evList, cb, 'removeEventListener', options);\n  return els;\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to detect\n * @returns { boolean|Array } true or false or an array of boolean values\n * @example\n *\n * import { has } from 'bianco.attr'\n *\n * has(img, 'width') // false\n *\n * // or also\n * has(img, ['width', 'height']) // => [false, false]\n *\n * // or also\n * has([img1, img2], ['width', 'height']) // => [[false, false], [false, false]]\n */\n\nfunction has(els, name) {\n  return parseNodes(els, name, 'hasAttribute');\n}\n\nconst WINDOW_EVENTS = 'popstate';\nconst CLICK_EVENT = 'click';\nconst DOWNLOAD_LINK_ATTRIBUTE = 'download';\nconst HREF_LINK_ATTRIBUTE = 'href';\nconst TARGET_SELF_LINK_ATTRIBUTE = '_self';\nconst LINK_TAG_NAME = 'A';\nconst HASH = '#';\nconst RE_ORIGIN = /^.+?\\/\\/+[^/]+/;\n\nconst getWindow = () => typeof window === 'undefined' ? null : window;\n\nconst getDocument = () => typeof document === 'undefined' ? null : document;\n\nconst getHistorty = () => getWindow() && history;\n\nconst getLocation = () => {\n  const win = getWindow();\n  const hist = getHistorty();\n  return win && (hist.location || win.location);\n};\n\nconst onWindowEvent = () => router.push(normalizePath(String(getLocation().href)));\n\nconst onRouterPush = path => {\n  const url = path.includes(defaults.base) ? path : defaults.base + path;\n  const loc = getLocation();\n  const hist = getHistorty();\n  const doc = getDocument(); // update the browser history only if it's necessary\n\n  if (url !== loc.href) {\n    hist.pushState(null, doc.title, url);\n  }\n};\n\nconst getLinkElement = node => node && !isLinkNode(node) ? getLinkElement(node.parentNode) : node;\n\nconst isLinkNode = node => node.nodeName === LINK_TAG_NAME;\n\nconst isCrossOriginLink = path => path.indexOf(getLocation().href.match(RE_ORIGIN)[0]) === -1;\n\nconst isTargetSelfLink = el => el.target && el.target !== TARGET_SELF_LINK_ATTRIBUTE;\n\nconst isEventForbidden = event => event.which && event.which !== 1 || // not left click\nevent.metaKey || event.ctrlKey || event.shiftKey // or meta keys\n|| event.defaultPrevented; // or default prevented\n\n\nconst isForbiddenLink = el => !el || !isLinkNode(el) // not A tag\n|| has(el, DOWNLOAD_LINK_ATTRIBUTE) // has download attr\n|| !has(el, HREF_LINK_ATTRIBUTE) // has no href attr\n|| isTargetSelfLink(el) || isCrossOriginLink(el.href);\n\nconst isHashLink = path => path.split(HASH).length > 1;\n\nconst normalizePath = path => path.replace(defaults.base, '');\n\nconst isInBase = path => !defaults.base || path.includes(defaults.base);\n/**\n * Callback called anytime something will be clicked on the page\n * @param   {HTMLEvent} event - click event\n * @returns {undefined} void method\n */\n\n\nconst onClick = event => {\n  if (isEventForbidden(event)) return;\n  const el = getLinkElement(event.target);\n  if (isForbiddenLink(el) || isHashLink(el.href) || !isInBase(el.href)) return;\n  const path = normalizePath(el.href);\n  router.push(path);\n  event.preventDefault();\n};\n/**\n * Link the rawth router to the DOM events\n * @param { HTMLElement } container - DOM node where the links are located\n * @returns {Function} teardown function\n */\n\n\nfunction initDomListeners(container) {\n  const win = getWindow();\n  const root = container || getDocument();\n\n  if (win) {\n    add(win, WINDOW_EVENTS, onWindowEvent);\n    add(root, CLICK_EVENT, onClick);\n  }\n\n  router.on.value(onRouterPush);\n  return () => {\n    if (win) {\n      remove(win, WINDOW_EVENTS, onWindowEvent);\n      remove(root, CLICK_EVENT, onClick);\n    }\n\n    router.off.value(onRouterPush);\n  };\n}\n\nconst BASE_ATTRIBUTE_NAME = 'base';\nconst ON_STARTED_ATTRIBUTE_NAME = 'onStarted';\nconst defer = window.requestAnimationFrame || window.setTimeout;\nconst cancelDefer = window.cancelAnimationFrame || window.clearTimeout;\n\nlet wasInitialized = false;\n\nvar routerHoc = {\n  'css': null,\n\n  'exports': (() => {\n    // rely on riot internal only if it's available\n    try {\n      const { template, bindingTypes } = __.DOMBindings;\n\n      return pure(({ slots, attributes, props }) => {\n        if (wasInitialized) panic$2('Multiple <router> components are not supported');\n\n        const getAttribute = name => attributes && attributes.find(a => a.name === name);\n\n        return {\n          slot: null,\n          el: null,\n          teardown: null,\n          mount(el, context) {\n            const currentRoute = getCurrentRoute();\n            const onFirstRoute = () => {\n              this.createSlot(context);\n              router.off.value(onFirstRoute);\n            };\n            wasInitialized = true;\n\n            this.el = el;\n            this.teardown = initDomListeners(this.root);\n\n            this.setBase(context);\n\n            // mount the slots only if the current route was defined\n            if (currentRoute) {\n              this.createSlot(context);\n            } else {\n              router.on.value(onFirstRoute);\n              router.push(window.location.href);\n            }\n          },\n          createSlot(context) {\n            if (!slots || !slots.length) return\n            const onStartedAttr = getAttribute(ON_STARTED_ATTRIBUTE_NAME);\n\n            this.slot = template(null, [{\n              type: bindingTypes.SLOT,\n              name: 'default'\n            }]);\n\n            this.slot.mount(this.el, {\n              slots\n            }, context);\n\n            if (onStartedAttr) {\n              onStartedAttr.evaluate(context)(getCurrentRoute());\n            }\n          },\n          update(context) {\n            this.setBase(context);\n\n            // defer the updates to avoid internal recoursive update calls\n            // see https://github.com/riot/route/issues/148\n            if (this.slot) {\n              cancelDefer(this.deferred);\n\n              this.deferred = defer(() => {\n                this.slot.update({}, context);\n              });\n            }\n          },\n          unmount(...args) {\n            this.teardown();\n            wasInitialized = false;\n\n            if (this.slot) {\n              this.slot.unmount(...args);\n            }\n          },\n          getBase(context) {\n            const loc = window.location;\n            const baseAttr = getAttribute(BASE_ATTRIBUTE_NAME);\n\n            return baseAttr ? baseAttr.evaluate(context) : `${loc.protocol}//${loc.host}`\n          },\n          setBase(context) {\n            setBase(props ? props.base : this.getBase(context));\n          }\n        }\n      })\n    } catch(error) {\n      // riot is not available\n    }\n  })(),\n\n  'template': null,\n  'name': 'router-hoc'\n};\n\nexport { routeHoc as Route, routerHoc as Router, createURLStreamPipe, filterStrings, getCurrentRoute, initDomListeners, match, createRoute as route, router, setBase, toPath, toRegexp, toURL };\n","export default {\n  'css': `app .loader,[is=\"app\"] .loader{ border-top-color: #3498db; -webkit-animation: spinner 1.5s linear infinite; animation: spinner 1.5s linear infinite; } @-webkit-keyframes spinner { 0% { -webkit-transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); } } @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }`,\n  'exports': null,\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template(\n      '<div class=\"my-auto mx-auto\"><div class=\"loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-64 w-64\"></div></div>',\n      []\n    );\n  },\n\n  'name': 'app'\n};","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","import lazy from '@riotjs/lazy'\nimport { Router, Route } from '@riotjs/route'\nimport Loader from './Loader.riot'\n\nexport default {\n  'css': `app,[is=\"app\"]{ font-family: Helvetica Neue, Helvetica, Arial; } app ul,[is=\"app\"] ul{ display: flex; list-style: none; padding: 0; margin: 0; } app ul li a,[is=\"app\"] ul li a{ padding: 16px; }`,\n\n  'exports': {\n    components: {\n      Router,\n      Route,\n      Counter: lazy(Loader, () => import('./Counter.riot')),\n      Books: lazy(Loader, () => import('./Books.riot')),\n      Home: lazy(Loader, () => import('./Home.riot')),\n      Contact: lazy(Loader, ()=> import('./Contact.riot')),\n    }\n  },\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template(\n      '<aside class=\"relative bg-sidebar h-screen w-64 hidden sm:block shadow-xl\"><div class=\"p-6\"><a href=\"index.html\" class=\"text-white text-3xl font-semibold uppercase hover:text-gray-300\">Riot Wasm Admin</a></div><nav class=\"text-white text-base font-semibold pt-3\"><a href=\"/\" class=\"flex items-center active-nav-link text-white py-4 pl-6 nav-item\"><i class=\"fas fa-tachometer-alt mr-3\"></i>\\n                Home\\n            </a><a href=\"/books\" class=\"flex items-center text-white opacity-75 hover:opacity-100 py-4 pl-6 nav-item\"><i class=\"fas fa-sticky-note mr-3\"></i>\\n                Books\\n            </a><a href=\"/counter\" class=\"flex items-center text-white opacity-75 hover:opacity-100 py-4 pl-6 nav-item\"><i class=\"fas fa-table mr-3\"></i>\\n                Counter\\n            </a><a href=\"/form\" class=\"flex items-center text-white opacity-75 hover:opacity-100 py-4 pl-6 nav-item\"><i class=\"fas fa-align-left mr-3\"></i>\\n                Post\\n            </a></nav><a href=\"#\" class=\"absolute w-full upgrade-btn bottom-0 active-nav-link text-white flex items-center justify-center py-4\"><i class=\"fas fa-arrow-circle-up mr-3\"></i>\\n            Uses Wasm + Riot\\n        </a></aside><div class=\"relative w-full flex flex-col h-screen overflow-y-hidden\"><div class=\"w-full h-screen overflow-x-hidden border-t flex flex-col\"><main class=\"w-full flex-grow p-6\"><router expr9=\"expr9\"></router></main><footer class=\"w-full bg-white text-right p-4\">\\n                Copyleft <a target=\"_blank\" href=\"https://mureithi.me\" class=\"underline\">Njuguna Mureithi</a>.| Theme by <a target=\"_blank\" href=\"https://davidgrzyb.com\" class=\"underline\">David Grzyb</a>.\\n            </footer></div></div>',\n      [{\n        'type': bindingTypes.TAG,\n        'getComponent': getComponent,\n\n        'evaluate': function(scope) {\n          return 'router';\n        },\n\n        'slots': [{\n          'id': 'default',\n          'html': '<route expr10=\"expr10\" path=\"/\"></route><route expr12=\"expr12\" path=\"/form\"></route><route expr14=\"expr14\" path=\"/counter\"></route><route expr16=\"expr16\" path=\"/books\"></route>',\n\n          'bindings': [{\n            'type': bindingTypes.TAG,\n            'getComponent': getComponent,\n\n            'evaluate': function(scope) {\n              return 'route';\n            },\n\n            'slots': [{\n              'id': 'default',\n              'html': '<home expr11=\"expr11\"></home>',\n\n              'bindings': [{\n                'type': bindingTypes.TAG,\n                'getComponent': getComponent,\n\n                'evaluate': function(scope) {\n                  return 'home';\n                },\n\n                'slots': [],\n                'attributes': [],\n                'redundantAttribute': 'expr11',\n                'selector': '[expr11]'\n              }]\n            }],\n\n            'attributes': [],\n            'redundantAttribute': 'expr10',\n            'selector': '[expr10]'\n          }, {\n            'type': bindingTypes.TAG,\n            'getComponent': getComponent,\n\n            'evaluate': function(scope) {\n              return 'route';\n            },\n\n            'slots': [{\n              'id': 'default',\n              'html': '<contact expr13=\"expr13\"></contact>',\n\n              'bindings': [{\n                'type': bindingTypes.TAG,\n                'getComponent': getComponent,\n\n                'evaluate': function(scope) {\n                  return 'contact';\n                },\n\n                'slots': [],\n                'attributes': [],\n                'redundantAttribute': 'expr13',\n                'selector': '[expr13]'\n              }]\n            }],\n\n            'attributes': [],\n            'redundantAttribute': 'expr12',\n            'selector': '[expr12]'\n          }, {\n            'type': bindingTypes.TAG,\n            'getComponent': getComponent,\n\n            'evaluate': function(scope) {\n              return 'route';\n            },\n\n            'slots': [{\n              'id': 'default',\n              'html': '<counter expr15=\"expr15\"></counter>',\n\n              'bindings': [{\n                'type': bindingTypes.TAG,\n                'getComponent': getComponent,\n\n                'evaluate': function(scope) {\n                  return 'counter';\n                },\n\n                'slots': [],\n                'attributes': [],\n                'redundantAttribute': 'expr15',\n                'selector': '[expr15]'\n              }]\n            }],\n\n            'attributes': [],\n            'redundantAttribute': 'expr14',\n            'selector': '[expr14]'\n          }, {\n            'type': bindingTypes.TAG,\n            'getComponent': getComponent,\n\n            'evaluate': function(scope) {\n              return 'route';\n            },\n\n            'slots': [{\n              'id': 'default',\n              'html': '<books expr17=\"expr17\"></books>',\n\n              'bindings': [{\n                'type': bindingTypes.TAG,\n                'getComponent': getComponent,\n\n                'evaluate': function(scope) {\n                  return 'books';\n                },\n\n                'slots': [],\n                'attributes': [],\n                'redundantAttribute': 'expr17',\n                'selector': '[expr17]'\n              }]\n            }],\n\n            'attributes': [],\n            'redundantAttribute': 'expr16',\n            'selector': '[expr16]'\n          }]\n        }],\n\n        'attributes': [],\n        'redundantAttribute': 'expr9',\n        'selector': '[expr9]'\n      }]\n    );\n  },\n\n  'name': 'app'\n};","import App from './App.riot'\nimport {component} from 'riot'\n\ncomponent(App)(document.querySelector('#root'), {\n  message: 'Hello there'\n})","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n","\n            module.exports = function( bundle ) {\n                function __initialize( __wasm_module, __load_asynchronously ) {\n    return (function( module_factory ) {\n        var instance = module_factory();\n        if( __load_asynchronously ) {\n            return WebAssembly.instantiate( __wasm_module, instance.imports )\n                .then( function( wasm_instance ) {\n                    var exports = instance.initialize( wasm_instance );\n                    console.log( \"Finished loading Rust wasm module 'riot_rs_wasm'\" );\n                    return exports;\n                })\n                .catch( function( error ) {\n                    console.log( \"Error loading Rust wasm module 'riot_rs_wasm':\", error );\n                    throw error;\n                });\n        } else {\n            var instance = new WebAssembly.Instance( __wasm_module, instance.imports );\n            return instance.initialize( wasm_instance );\n        }\n    }( function() {\n    var Module = {};\n\n    Module.STDWEB_PRIVATE = {};\n\n// This is based on code from Emscripten's preamble.js.\nModule.STDWEB_PRIVATE.to_utf8 = function to_utf8( str, addr ) {\n    var HEAPU8 = Module.HEAPU8;\n    for( var i = 0; i < str.length; ++i ) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description and https://www.ietf.org/rfc/rfc2279.txt and https://tools.ietf.org/html/rfc3629\n        var u = str.charCodeAt( i ); // possibly a lead surrogate\n        if( u >= 0xD800 && u <= 0xDFFF ) {\n            u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt( ++i ) & 0x3FF);\n        }\n\n        if( u <= 0x7F ) {\n            HEAPU8[ addr++ ] = u;\n        } else if( u <= 0x7FF ) {\n            HEAPU8[ addr++ ] = 0xC0 | (u >> 6);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0xFFFF ) {\n            HEAPU8[ addr++ ] = 0xE0 | (u >> 12);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0x1FFFFF ) {\n            HEAPU8[ addr++ ] = 0xF0 | (u >> 18);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0x3FFFFFF ) {\n            HEAPU8[ addr++ ] = 0xF8 | (u >> 24);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 18) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else {\n            HEAPU8[ addr++ ] = 0xFC | (u >> 30);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 24) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 18) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        }\n    }\n};\n\nModule.STDWEB_PRIVATE.noop = function() {};\nModule.STDWEB_PRIVATE.to_js = function to_js( address ) {\n    var kind = Module.HEAPU8[ address + 12 ];\n    if( kind === 0 ) {\n        return undefined;\n    } else if( kind === 1 ) {\n        return null;\n    } else if( kind === 2 ) {\n        return Module.HEAP32[ address / 4 ];\n    } else if( kind === 3 ) {\n        return Module.HEAPF64[ address / 8 ];\n    } else if( kind === 4 ) {\n        var pointer = Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        return Module.STDWEB_PRIVATE.to_js_string( pointer, length );\n    } else if( kind === 5 ) {\n        return false;\n    } else if( kind === 6 ) {\n        return true;\n    } else if( kind === 7 ) {\n        var pointer = Module.STDWEB_PRIVATE.arena + Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var output = [];\n        for( var i = 0; i < length; ++i ) {\n            output.push( Module.STDWEB_PRIVATE.to_js( pointer + i * 16 ) );\n        }\n        return output;\n    } else if( kind === 8 ) {\n        var arena = Module.STDWEB_PRIVATE.arena;\n        var value_array_pointer = arena + Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var key_array_pointer = arena + Module.HEAPU32[ (address + 8) / 4 ];\n        var output = {};\n        for( var i = 0; i < length; ++i ) {\n            var key_pointer = Module.HEAPU32[ (key_array_pointer + i * 8) / 4 ];\n            var key_length = Module.HEAPU32[ (key_array_pointer + 4 + i * 8) / 4 ];\n            var key = Module.STDWEB_PRIVATE.to_js_string( key_pointer, key_length );\n            var value = Module.STDWEB_PRIVATE.to_js( value_array_pointer + i * 16 );\n            output[ key ] = value;\n        }\n        return output;\n    } else if( kind === 9 ) {\n        return Module.STDWEB_PRIVATE.acquire_js_reference( Module.HEAP32[ address / 4 ] );\n    } else if( kind === 10 || kind === 12 || kind === 13 ) {\n        var adapter_pointer = Module.HEAPU32[ address / 4 ];\n        var pointer = Module.HEAPU32[ (address + 4) / 4 ];\n        var deallocator_pointer = Module.HEAPU32[ (address + 8) / 4 ];\n        var num_ongoing_calls = 0;\n        var drop_queued = false;\n        var output = function() {\n            if( pointer === 0 || drop_queued === true ) {\n                if (kind === 10) {\n                    throw new ReferenceError( \"Already dropped Rust function called!\" );\n                } else if (kind === 12) {\n                    throw new ReferenceError( \"Already dropped FnMut function called!\" );\n                } else {\n                    throw new ReferenceError( \"Already called or dropped FnOnce function called!\" );\n                }\n            }\n\n            var function_pointer = pointer;\n            if (kind === 13) {\n                output.drop = Module.STDWEB_PRIVATE.noop;\n                pointer = 0;\n            }\n\n            if (num_ongoing_calls !== 0) {\n                if (kind === 12 || kind === 13) {\n                    throw new ReferenceError( \"FnMut function called multiple times concurrently!\" );\n                }\n            }\n\n            var args = Module.STDWEB_PRIVATE.alloc( 16 );\n            Module.STDWEB_PRIVATE.serialize_array( args, arguments );\n\n            try {\n                num_ongoing_calls += 1;\n                Module.STDWEB_PRIVATE.dyncall( \"vii\", adapter_pointer, [function_pointer, args] );\n                var result = Module.STDWEB_PRIVATE.tmp;\n                Module.STDWEB_PRIVATE.tmp = null;\n            } finally {\n                num_ongoing_calls -= 1;\n            }\n\n            if( drop_queued === true && num_ongoing_calls === 0 ) {\n                output.drop();\n            }\n\n            return result;\n        };\n\n        output.drop = function() {\n            if (num_ongoing_calls !== 0) {\n                drop_queued = true;\n                return;\n            }\n\n            output.drop = Module.STDWEB_PRIVATE.noop;\n            var function_pointer = pointer;\n            pointer = 0;\n\n            if (function_pointer != 0) {\n                Module.STDWEB_PRIVATE.dyncall( \"vi\", deallocator_pointer, [function_pointer] );\n            }\n        };\n\n        return output;\n    } else if( kind === 14 ) {\n        var pointer = Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var array_kind = Module.HEAPU32[ (address + 8) / 4 ];\n        var pointer_end = pointer + length;\n\n        switch( array_kind ) {\n            case 0:\n                return Module.HEAPU8.subarray( pointer, pointer_end );\n            case 1:\n                return Module.HEAP8.subarray( pointer, pointer_end );\n            case 2:\n                return Module.HEAPU16.subarray( pointer, pointer_end );\n            case 3:\n                return Module.HEAP16.subarray( pointer, pointer_end );\n            case 4:\n                return Module.HEAPU32.subarray( pointer, pointer_end );\n            case 5:\n                return Module.HEAP32.subarray( pointer, pointer_end );\n            case 6:\n                return Module.HEAPF32.subarray( pointer, pointer_end );\n            case 7:\n                return Module.HEAPF64.subarray( pointer, pointer_end );\n        }\n    } else if( kind === 15 ) {\n        return Module.STDWEB_PRIVATE.get_raw_value( Module.HEAPU32[ address / 4 ] );\n    }\n};\n\nModule.STDWEB_PRIVATE.serialize_object = function serialize_object( address, value ) {\n    var keys = Object.keys( value );\n    var length = keys.length;\n    var key_array_pointer = Module.STDWEB_PRIVATE.alloc( length * 8 );\n    var value_array_pointer = Module.STDWEB_PRIVATE.alloc( length * 16 );\n    Module.HEAPU8[ address + 12 ] = 8;\n    Module.HEAPU32[ address / 4 ] = value_array_pointer;\n    Module.HEAPU32[ (address + 4) / 4 ] = length;\n    Module.HEAPU32[ (address + 8) / 4 ] = key_array_pointer;\n    for( var i = 0; i < length; ++i ) {\n        var key = keys[ i ];\n        var key_address = key_array_pointer + i * 8;\n        Module.STDWEB_PRIVATE.to_utf8_string( key_address, key );\n\n        Module.STDWEB_PRIVATE.from_js( value_array_pointer + i * 16, value[ key ] );\n    }\n};\n\nModule.STDWEB_PRIVATE.serialize_array = function serialize_array( address, value ) {\n    var length = value.length;\n    var pointer = Module.STDWEB_PRIVATE.alloc( length * 16 );\n    Module.HEAPU8[ address + 12 ] = 7;\n    Module.HEAPU32[ address / 4 ] = pointer;\n    Module.HEAPU32[ (address + 4) / 4 ] = length;\n    for( var i = 0; i < length; ++i ) {\n        Module.STDWEB_PRIVATE.from_js( pointer + i * 16, value[ i ] );\n    }\n};\n\n// New browsers and recent Node\nvar cachedEncoder = ( typeof TextEncoder === \"function\"\n    ? new TextEncoder( \"utf-8\" )\n    // Old Node (before v11)\n    : ( typeof util === \"object\" && util && typeof util.TextEncoder === \"function\"\n        ? new util.TextEncoder( \"utf-8\" )\n        // Old browsers\n        : null ) );\n\nif ( cachedEncoder != null ) {\n    Module.STDWEB_PRIVATE.to_utf8_string = function to_utf8_string( address, value ) {\n        var buffer = cachedEncoder.encode( value );\n        var length = buffer.length;\n        var pointer = 0;\n\n        if ( length > 0 ) {\n            pointer = Module.STDWEB_PRIVATE.alloc( length );\n            Module.HEAPU8.set( buffer, pointer );\n        }\n\n        Module.HEAPU32[ address / 4 ] = pointer;\n        Module.HEAPU32[ (address + 4) / 4 ] = length;\n    };\n\n} else {\n    Module.STDWEB_PRIVATE.to_utf8_string = function to_utf8_string( address, value ) {\n        var length = Module.STDWEB_PRIVATE.utf8_len( value );\n        var pointer = 0;\n\n        if ( length > 0 ) {\n            pointer = Module.STDWEB_PRIVATE.alloc( length );\n            Module.STDWEB_PRIVATE.to_utf8( value, pointer );\n        }\n\n        Module.HEAPU32[ address / 4 ] = pointer;\n        Module.HEAPU32[ (address + 4) / 4 ] = length;\n    };\n}\n\nModule.STDWEB_PRIVATE.from_js = function from_js( address, value ) {\n    var kind = Object.prototype.toString.call( value );\n    if( kind === \"[object String]\" ) {\n        Module.HEAPU8[ address + 12 ] = 4;\n        Module.STDWEB_PRIVATE.to_utf8_string( address, value );\n    } else if( kind === \"[object Number]\" ) {\n        if( value === (value|0) ) {\n            Module.HEAPU8[ address + 12 ] = 2;\n            Module.HEAP32[ address / 4 ] = value;\n        } else {\n            Module.HEAPU8[ address + 12 ] = 3;\n            Module.HEAPF64[ address / 8 ] = value;\n        }\n    } else if( value === null ) {\n        Module.HEAPU8[ address + 12 ] = 1;\n    } else if( value === undefined ) {\n        Module.HEAPU8[ address + 12 ] = 0;\n    } else if( value === false ) {\n        Module.HEAPU8[ address + 12 ] = 5;\n    } else if( value === true ) {\n        Module.HEAPU8[ address + 12 ] = 6;\n    } else if( kind === \"[object Symbol]\" ) {\n        var id = Module.STDWEB_PRIVATE.register_raw_value( value );\n        Module.HEAPU8[ address + 12 ] = 15;\n        Module.HEAP32[ address / 4 ] = id;\n    } else {\n        var refid = Module.STDWEB_PRIVATE.acquire_rust_reference( value );\n        Module.HEAPU8[ address + 12 ] = 9;\n        Module.HEAP32[ address / 4 ] = refid;\n    }\n};\n\n// New browsers and recent Node\nvar cachedDecoder = ( typeof TextDecoder === \"function\"\n    ? new TextDecoder( \"utf-8\" )\n    // Old Node (before v11)\n    : ( typeof util === \"object\" && util && typeof util.TextDecoder === \"function\"\n        ? new util.TextDecoder( \"utf-8\" )\n        // Old browsers\n        : null ) );\n\nif ( cachedDecoder != null ) {\n    Module.STDWEB_PRIVATE.to_js_string = function to_js_string( index, length ) {\n        return cachedDecoder.decode( Module.HEAPU8.subarray( index, index + length ) );\n    };\n\n} else {\n    // This is ported from Rust's stdlib; it's faster than\n    // the string conversion from Emscripten.\n    Module.STDWEB_PRIVATE.to_js_string = function to_js_string( index, length ) {\n        var HEAPU8 = Module.HEAPU8;\n        index = index|0;\n        length = length|0;\n        var end = (index|0) + (length|0);\n        var output = \"\";\n        while( index < end ) {\n            var x = HEAPU8[ index++ ];\n            if( x < 128 ) {\n                output += String.fromCharCode( x );\n                continue;\n            }\n            var init = (x & (0x7F >> 2));\n            var y = 0;\n            if( index < end ) {\n                y = HEAPU8[ index++ ];\n            }\n            var ch = (init << 6) | (y & 63);\n            if( x >= 0xE0 ) {\n                var z = 0;\n                if( index < end ) {\n                    z = HEAPU8[ index++ ];\n                }\n                var y_z = ((y & 63) << 6) | (z & 63);\n                ch = init << 12 | y_z;\n                if( x >= 0xF0 ) {\n                    var w = 0;\n                    if( index < end ) {\n                        w = HEAPU8[ index++ ];\n                    }\n                    ch = (init & 7) << 18 | ((y_z << 6) | (w & 63));\n\n                    output += String.fromCharCode( 0xD7C0 + (ch >> 10) );\n                    ch = 0xDC00 + (ch & 0x3FF);\n                }\n            }\n            output += String.fromCharCode( ch );\n            continue;\n        }\n        return output;\n    };\n}\n\nModule.STDWEB_PRIVATE.id_to_ref_map = {};\nModule.STDWEB_PRIVATE.id_to_refcount_map = {};\nModule.STDWEB_PRIVATE.ref_to_id_map = new WeakMap();\n// Not all types can be stored in a WeakMap\nModule.STDWEB_PRIVATE.ref_to_id_map_fallback = new Map();\nModule.STDWEB_PRIVATE.last_refid = 1;\n\nModule.STDWEB_PRIVATE.id_to_raw_value_map = {};\nModule.STDWEB_PRIVATE.last_raw_value_id = 1;\n\nModule.STDWEB_PRIVATE.acquire_rust_reference = function( reference ) {\n    if( reference === undefined || reference === null ) {\n        return 0;\n    }\n\n    var id_to_refcount_map = Module.STDWEB_PRIVATE.id_to_refcount_map;\n    var id_to_ref_map = Module.STDWEB_PRIVATE.id_to_ref_map;\n    var ref_to_id_map = Module.STDWEB_PRIVATE.ref_to_id_map;\n    var ref_to_id_map_fallback = Module.STDWEB_PRIVATE.ref_to_id_map_fallback;\n\n    var refid = ref_to_id_map.get( reference );\n    if( refid === undefined ) {\n        refid = ref_to_id_map_fallback.get( reference );\n    }\n    if( refid === undefined ) {\n        refid = Module.STDWEB_PRIVATE.last_refid++;\n        try {\n            ref_to_id_map.set( reference, refid );\n        } catch (e) {\n            ref_to_id_map_fallback.set( reference, refid );\n        }\n    }\n\n    if( refid in id_to_ref_map ) {\n        id_to_refcount_map[ refid ]++;\n    } else {\n        id_to_ref_map[ refid ] = reference;\n        id_to_refcount_map[ refid ] = 1;\n    }\n\n    return refid;\n};\n\nModule.STDWEB_PRIVATE.acquire_js_reference = function( refid ) {\n    return Module.STDWEB_PRIVATE.id_to_ref_map[ refid ];\n};\n\nModule.STDWEB_PRIVATE.increment_refcount = function( refid ) {\n    Module.STDWEB_PRIVATE.id_to_refcount_map[ refid ]++;\n};\n\nModule.STDWEB_PRIVATE.decrement_refcount = function( refid ) {\n    var id_to_refcount_map = Module.STDWEB_PRIVATE.id_to_refcount_map;\n    if( 0 == --id_to_refcount_map[ refid ] ) {\n        var id_to_ref_map = Module.STDWEB_PRIVATE.id_to_ref_map;\n        var ref_to_id_map_fallback = Module.STDWEB_PRIVATE.ref_to_id_map_fallback;\n        var reference = id_to_ref_map[ refid ];\n        delete id_to_ref_map[ refid ];\n        delete id_to_refcount_map[ refid ];\n        ref_to_id_map_fallback.delete(reference);\n    }\n};\n\nModule.STDWEB_PRIVATE.register_raw_value = function( value ) {\n    var id = Module.STDWEB_PRIVATE.last_raw_value_id++;\n    Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ] = value;\n    return id;\n};\n\nModule.STDWEB_PRIVATE.unregister_raw_value = function( id ) {\n    delete Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ];\n};\n\nModule.STDWEB_PRIVATE.get_raw_value = function( id ) {\n    return Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ];\n};\n\nModule.STDWEB_PRIVATE.alloc = function alloc( size ) {\n    return Module.web_malloc( size );\n};\n\nModule.STDWEB_PRIVATE.dyncall = function( signature, ptr, args ) {\n    return Module.web_table.get( ptr ).apply( null, args );\n};\n\n// This is based on code from Emscripten's preamble.js.\nModule.STDWEB_PRIVATE.utf8_len = function utf8_len( str ) {\n    var len = 0;\n    for( var i = 0; i < str.length; ++i ) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var u = str.charCodeAt( i ); // possibly a lead surrogate\n        if( u >= 0xD800 && u <= 0xDFFF ) {\n            u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt( ++i ) & 0x3FF);\n        }\n\n        if( u <= 0x7F ) {\n            ++len;\n        } else if( u <= 0x7FF ) {\n            len += 2;\n        } else if( u <= 0xFFFF ) {\n            len += 3;\n        } else if( u <= 0x1FFFFF ) {\n            len += 4;\n        } else if( u <= 0x3FFFFFF ) {\n            len += 5;\n        } else {\n            len += 6;\n        }\n    }\n    return len;\n};\n\nModule.STDWEB_PRIVATE.prepare_any_arg = function( value ) {\n    var arg = Module.STDWEB_PRIVATE.alloc( 16 );\n    Module.STDWEB_PRIVATE.from_js( arg, value );\n    return arg;\n};\n\nModule.STDWEB_PRIVATE.acquire_tmp = function( dummy ) {\n    var value = Module.STDWEB_PRIVATE.tmp;\n    Module.STDWEB_PRIVATE.tmp = null;\n    return value;\n};\n\n\n\n    var HEAP8 = null;\n    var HEAP16 = null;\n    var HEAP32 = null;\n    var HEAPU8 = null;\n    var HEAPU16 = null;\n    var HEAPU32 = null;\n    var HEAPF32 = null;\n    var HEAPF64 = null;\n\n    Object.defineProperty( Module, 'exports', { value: {} } );\n\n    function __web_on_grow() {\n        var buffer = Module.instance.exports.memory.buffer;\n        HEAP8 = new Int8Array( buffer );\n        HEAP16 = new Int16Array( buffer );\n        HEAP32 = new Int32Array( buffer );\n        HEAPU8 = new Uint8Array( buffer );\n        HEAPU16 = new Uint16Array( buffer );\n        HEAPU32 = new Uint32Array( buffer );\n        HEAPF32 = new Float32Array( buffer );\n        HEAPF64 = new Float64Array( buffer );\n        Module.HEAP8 = HEAP8;\n        Module.HEAP16 = HEAP16;\n        Module.HEAP32 = HEAP32;\n        Module.HEAPU8 = HEAPU8;\n        Module.HEAPU16 = HEAPU16;\n        Module.HEAPU32 = HEAPU32;\n        Module.HEAPF32 = HEAPF32;\n        Module.HEAPF64 = HEAPF64;\n    }\n\n    return {\n        imports: {\n            env: {\n                \"__cargo_web_snippet_14097f70c739ef4a180a6ad82cadc458d11e85dc\": function($0) {\n                $0 = Module.STDWEB_PRIVATE.to_js($0);alert(($0));\n            },\n            \"__cargo_web_snippet_285aac3fba72d67cb459d37d4d21aa4fb62598ba\": function($0) {\n                Module.STDWEB_PRIVATE.arena = $0;\n            },\n            \"__cargo_web_snippet_4d66721dd755374fa177d86d1c818bf74cc0be84\": function($0, $1) {\n                $1 = Module.STDWEB_PRIVATE.to_js($1);Module.STDWEB_PRIVATE.from_js($0, (function(){return($1);})());\n            },\n            \"__cargo_web_snippet_515598dacc2aae3ba84e7207f3f75bd28fcbbd15\": function($0) {\n                var o = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );return (o instanceof Object);\n            },\n            \"__cargo_web_snippet_5c3091ae7fa9c42123eec37f64de99a5808e7ef2\": function($0) {\n                var o = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );return (o instanceof Array);\n            },\n            \"__cargo_web_snippet_80d6d56760c65e49b7be8b6b01c1ea861b046bf0\": function($0) {\n                Module.STDWEB_PRIVATE.decrement_refcount( $0 );\n            },\n            \"__cargo_web_snippet_8c32019649bb581b1b742eeedfc410e2bedd56a6\": function($0, $1) {\n                var array = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );Module.STDWEB_PRIVATE.serialize_array( $1, array );\n            },\n            \"__cargo_web_snippet_e9638d6405ab65f78daf4a5af9c9de14ecf1e2ec\": function($0) {\n                $0 = Module.STDWEB_PRIVATE.to_js($0);Module.STDWEB_PRIVATE.unregister_raw_value(($0));\n            },\n            \"__cargo_web_snippet_f814fda503cb20016f78481f85431d48a7c4e731\": function($0, $1) {\n                var object = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );Module.STDWEB_PRIVATE.serialize_object( $1, object );\n            },\n            \"__cargo_web_snippet_ff5103e6cc179d13b4c7a785bdce2708fd559fc0\": function($0) {\n                Module.STDWEB_PRIVATE.tmp = Module.STDWEB_PRIVATE.to_js( $0 );\n            },\n                \"__web_on_grow\": __web_on_grow\n            }\n        },\n        initialize: function( instance ) {\n            Object.defineProperty( Module, 'instance', { value: instance } );\n            Object.defineProperty( Module, 'web_malloc', { value: Module.instance.exports.__web_malloc } );\n            Object.defineProperty( Module, 'web_free', { value: Module.instance.exports.__web_free } );\n            Object.defineProperty( Module, 'web_table', { value: Module.instance.exports.__indirect_function_table } );\n\n            Module.exports.books_state = function books_state() {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.books_state());\n}\n;\n                Module.exports.books_dispatch = function books_dispatch(state, action) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.books_dispatch(Module.STDWEB_PRIVATE.prepare_any_arg(state), Module.STDWEB_PRIVATE.prepare_any_arg(action)));\n}\n;\n                Module.exports.contact_state = function contact_state() {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.contact_state());\n}\n;\n                Module.exports.contact_dispatch = function contact_dispatch(state, action) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.contact_dispatch(Module.STDWEB_PRIVATE.prepare_any_arg(state), Module.STDWEB_PRIVATE.prepare_any_arg(action)));\n}\n;\n                Module.exports.counter_state = function counter_state() {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.counter_state());\n}\n;\n                Module.exports.counter_dispatch = function counter_dispatch(state, action) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.counter_dispatch(Module.STDWEB_PRIVATE.prepare_any_arg(state), Module.STDWEB_PRIVATE.prepare_any_arg(action)));\n}\n;\n            __web_on_grow();\n            \n\n            return Module.exports;\n        }\n    };\n}\n ));\n}\n\n                return fetch( bundle )\n                    .then( response => response.arrayBuffer() )\n                    .then( bytes => WebAssembly.compile( bytes ) )\n                    .then( mod => __initialize( mod, true ) );\n            };\n        ","\n                            module.exports = function( bundle ) {\n                                var loader = require( \"./loader-d20feded5cd4b4e8741163e1095849df.js\" );\n                                return loader( bundle );\n                            };\n                        ","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}