{"version":3,"sources":["../web/Book.riot","../node_modules/riot/riot.esm.js","../web/index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","../.cache/.cargo-web/loader-d20feded5cd4b4e8741163e1095849df.js","../.cache/.cargo-web/bundle-loader-d20feded5cd4b4e8741163e1095849df.js"],"names":["state","lib","books_state","dispatch","books_dispatch","console","log","add","update","arguments","remove","highlight","onMounted","template","expressionTypes","bindingTypes","getComponent","TEXT","scope","JSON","stringify","books","EVENT","id","title","price","highlighted","camelToDashCase","string","replace","toLowerCase","dashToCamelCase","_","c","toUpperCase","DOMattributesToObject","element","Array","from","attributes","reduce","acc","attribute","name","value","moveChildren","source","target","firstChild","appendChild","cleanNode","node","clearChildren","childNodes","children","forEach","removeNode","parentNode","removeChild","EACH","IF","SIMPLE","TAG","SLOT","ATTRIBUTE","VALUE","createTemplateMeta","componentTemplate","fragment","dom","cloneNode","avoidDOMInjection","indexOf","slice","append","get","parent","start","end","before","isSelect","noSelection","child","insertBefore","selected","selectedIndex","call","querySelectorAll","eqeq","a","b","identity","O","indexOf$1","moreNodes","moreStart","moreEnd","lessNodes","lessStart","lessEnd","compare","length","m","l","isReversed","futureNodes","futureEnd","currentNodes","currentStart","currentEnd","next","list","i","nextSibling","drop","DELETION","INSERTION","SKIP","SKIP_OND","HS","futureStart","futureChanges","currentChanges","k","minLen","link","tresh","nodes","index","idxInOld","findK","newi","oldi","prev","diff","ptr","OND","rows","cols","d","r","pv","cv","pd","v","outer","diffIdx","applyDiff","currentLength","live","currentIndex","push","ktr","j","lo","hi","mid","smartDiff","dropChild","domdiff","options","currentSame","futureSame","checkType","type","isSvg","el","owner","ownerSVGElement","isTemplate","isNil","content","isFunction","isBoolean","isObject","UNMOUNT_SCOPE","Symbol","EachBinding","Object","seal","mount","parentScope","placeholder","childrenMap","collection","evaluate","items","createPatch","newChildrenMap","batches","patch","values","fn","unmount","redundant","item","info","pop","context","mustFilterItem","condition","Boolean","extendScope","_ref","itemName","indexName","binding","getKey","root","isTemplateTag","Map","create","key","oldItem","clone","mustMount","meta","delete","set","_ref2","document","createTextNode","assign","createDOM","IfBinding","pristine","mustUnmount","create$1","panic","message","Error","memoize","cache","cached","val","has","evaluateAttributeExpressions","REMOVE_ATTRIBUTE","SET_ATTIBUTE","ElementProto","Element","prototype","isNativeHtmlProperty","hasOwnProperty","setAllAttributes","entries","attributeExpression","removeAllAttributes","newAttributes","oldAttributes","newKeys","keys","filter","includes","removeAttribute","oldValue","getMethod","normalizeValue","RE_EVENTS_PREFIX","getCallbackAndOptions","isArray","EventListener","handleEvent","event","ListenersWeakMap","WeakMap","createListener","listener","eventExpression","normalizedEventName","eventListener","callback","handler","mustAddEvent","removeEventListener","addEventListener","normalizeStringValue","getTextNode","childNodeIndex","nodeType","Node","COMMENT_NODE","textNode","replaceChild","textExpression","data","valueExpression","expression","expressions","Expression","apply","create$2","flattenCollectionMethods","methods","method","map","create$3","COMPONENTS_IMPLEMENTATION_MAP","DOM_COMPONENT_INSTANCE_PROPERTY","PLUGINS_SET","Set","IS_DIRECTIVE","VALUE_ATTRIBUTE","MOUNT_METHOD_KEY","UPDATE_METHOD_KEY","UNMOUNT_METHOD_KEY","SHOULD_UPDATE_KEY","ON_BEFORE_MOUNT_KEY","ON_MOUNTED_KEY","ON_BEFORE_UPDATE_KEY","ON_UPDATED_KEY","ON_BEFORE_UNMOUNT_KEY","ON_UNMOUNTED_KEY","PROPS_KEY","STATE_KEY","SLOTS_KEY","ROOT_KEY","IS_PURE_SYMBOL","for","PARENT_KEY_SYMBOL","ATTRIBUTES_KEY_SYMBOL","TEMPLATE_KEY_SYMBOL","globals","freeze","__proto__","extendParentScope","attr","getRealParent","undefined","SlotBinding","getTemplateScope","templateData","slots","find","realParent","create$6","html","bindings","moveSlotInnerContent","mustRemoveRoot","slot","createSlot","getTag","component","slotsToMarkup","slotBindings","concat","TagBinding","tag","keepRootTag","create$4","fixTextExpressionsOffset","textExpressionsOffset","e","create$5","templateTagOffset","selector","redundantAttribute","querySelector","bindingExpressions","createHTMLTree","createElement","innerHTML","createSVGTree","container","svgNode","ownerDocument","importNode","window","DOMParser","parseFromString","documentElement","createDOMTree","injectDOM","createTemplateDOM","TemplateChunk","Math","max","bindingsData","DOMBindings","createBinding","createExpression","noop","autobindMethods","bind","callOrAssign","constructor","defineProperty","enumerable","writable","configurable","defineProperties","properties","defineDefaults","defaults","domToArray","els","test","toString","$","ctx","normalize","parseNodes","names","n","attrs","props","prop","setAttribute","CSS_BY_NAME","STYLE_NODE_SELECTOR","getStyleNode","style","head","cssManager","css","inject","join","curry","_len","_key","_len2","args","_key2","getName","tagName","COMPONENT_CORE_HELPERS","$$","PURE_COMPONENT_API","COMPONENT_LIFECYCLE_METHODS","MOCKED_TEMPLATE_INTERFACE","evaluateInitialProps","initialProps","bindDOMNodeToComponentObject","createCoreAPIMethods","mapFunction","componentTemplateFactory","components","createPureComponent","pureFactoryFunction","createComponent","exports","templateFn","createSubcomponents","_ref3","componentAPI","defineComponent","preserveRoot","_ref4","enhanceComponentAPI","createAttributeBindings","_ref5","runPlugins","computeState","oldState","newState","addCssHook","_ref6","newProps","mountComponent","componentName","compose","fns","f","g","DOM_COMPONENT_INSTANCE_PROPERTY$1","COMPONENTS_IMPLEMENTATION_MAP$1","PLUGINS_SET$1","register","unregister","keepRootElement","install","plugin","uninstall","implementation","_temp","pure","func","version","__","App","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","match","getBaseURL","url","require","loadBundlesLazy","bundles","Promise","resolve","code","LazyPromise","reject","loadBundles","then","all","loadBundle","bundleLoaders","registerBundleLoader","loader","module","load","bundle","substring","lastIndexOf","bundleLoader","resolved","catch","executor","promise","onSuccess","onError","__initialize","__wasm_module","__load_asynchronously","instance","Module","STDWEB_PRIVATE","to_utf8","str","addr","HEAPU8","u","charCodeAt","to_js","address","kind","HEAP32","HEAPF64","pointer","HEAPU32","to_js_string","arena","output","value_array_pointer","key_array_pointer","key_pointer","key_length","acquire_js_reference","adapter_pointer","deallocator_pointer","num_ongoing_calls","drop_queued","ReferenceError","function_pointer","alloc","serialize_array","dyncall","result","tmp","array_kind","pointer_end","subarray","HEAP8","HEAPU16","HEAP16","HEAPF32","get_raw_value","serialize_object","key_address","to_utf8_string","from_js","cachedEncoder","TextEncoder","util","buffer","encode","utf8_len","register_raw_value","refid","acquire_rust_reference","cachedDecoder","TextDecoder","decode","x","String","fromCharCode","init","y","ch","z","y_z","w","id_to_ref_map","id_to_refcount_map","ref_to_id_map","ref_to_id_map_fallback","last_refid","id_to_raw_value_map","last_raw_value_id","reference","increment_refcount","decrement_refcount","unregister_raw_value","size","web_malloc","signature","web_table","len","prepare_any_arg","arg","acquire_tmp","dummy","__web_on_grow","memory","Int8Array","Int16Array","Int32Array","Uint8Array","Uint16Array","Uint32Array","Float32Array","Float64Array","imports","env","$0","alert","$1","o","array","object","initialize","__web_malloc","__web_free","__indirect_function_table","action","store_state","store_dispatch","module_factory","WebAssembly","instantiate","wasm_instance","error","Instance","fetch","response","arrayBuffer","bytes","compile","mod"],"mappings":"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","file":"web.d56402e2.js","sourceRoot":"../public","sourcesContent":["import lib from '../Cargo.toml'\nconst state = lib.books_state\nconst dispatch = lib.books_dispatch\nconsole.log(lib)\n\nexport default {\n  'css': null,\n\n  'exports': {\n    add(){  this.update(dispatch(this.state, arguments[0]?{ \"add\" : arguments[0] }: \"add\"))},\n    remove(){  this.update(dispatch(this.state, arguments[0]?{ \"remove\" : arguments[0] }: \"remove\"))},\n    highlight(){  this.update(dispatch(this.state, arguments[0]?{ \"highlight\" : arguments[0] }: \"highlight\"))},\n\n    onMounted(){\n        this.update(state())\n    }\n  },\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template(\n      '<p expr0=\"expr0\"> </p><button expr1=\"expr1\">Add +</button><button expr2=\"expr2\">Remove -</button><button expr3=\"expr3\">Highilight</button>',\n      [{\n        'redundantAttribute': 'expr0',\n        'selector': '[expr0]',\n\n        'expressions': [{\n          'type': expressionTypes.TEXT,\n          'childNodeIndex': 0,\n\n          'evaluate': function(scope) {\n            return JSON.stringify(scope.state.books);\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr1',\n        'selector': '[expr1]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return () =>scope.add({\nid: 1,\ntitle: \"A grain of wheat by Ngugi wa Thiong'o\",\nprice: 100.0,\nhighlighted:false\n});\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr2',\n        'selector': '[expr2]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return ()=> scope.remove(1);\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr3',\n        'selector': '[expr3]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return ()=> scope.highlight(1);\n          }\n        }]\n      }]\n    );\n  },\n\n  'name': 'app'\n};","/* Riot v4.13.4, @license MIT */\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\nfunction camelToDashCase(string) {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n\n/**\n * Get all the element attributes as object\n * @param   {HTMLElement} element - DOM node we want to parse\n * @returns {Object} all the attributes found as a key value pairs\n */\n\nfunction DOMattributesToObject(element) {\n  return Array.from(element.attributes).reduce((acc, attribute) => {\n    acc[dashToCamelCase(attribute.name)] = attribute.value;\n    return acc;\n  }, {});\n}\n/**\n * Move all the child nodes from a source tag to another\n * @param   {HTMLElement} source - source node\n * @param   {HTMLElement} target - target node\n * @returns {undefined} it's a void method ¯\\_(ツ)_/¯\n */\n// Ignore this helper because it's needed only for svg tags\n\nfunction moveChildren(source, target) {\n  if (source.firstChild) {\n    target.appendChild(source.firstChild);\n    moveChildren(source, target);\n  }\n}\n/**\n * Remove the child nodes from any DOM node\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction cleanNode(node) {\n  clearChildren(node.childNodes);\n}\n/**\n * Clear multiple children in a node\n * @param   {HTMLElement[]} children - direct children nodes\n * @returns {undefined}\n */\n\nfunction clearChildren(children) {\n  Array.from(children).forEach(removeNode);\n}\n/**\n * Remove a node from the DOM\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction removeNode(node) {\n  const {\n    parentNode\n  } = node;\n  if (node.remove) node.remove();\n  /* istanbul ignore else */\n  else if (parentNode) parentNode.removeChild(node);\n}\n\nconst EACH = 0;\nconst IF = 1;\nconst SIMPLE = 2;\nconst TAG = 3;\nconst SLOT = 4;\nvar bindingTypes = {\n  EACH,\n  IF,\n  SIMPLE,\n  TAG,\n  SLOT\n};\n\nconst ATTRIBUTE = 0;\nconst EVENT = 1;\nconst TEXT = 2;\nconst VALUE = 3;\nvar expressionTypes = {\n  ATTRIBUTE,\n  EVENT,\n  TEXT,\n  VALUE\n};\n\n/**\n * Create the template meta object in case of <template> fragments\n * @param   {TemplateChunk} componentTemplate - template chunk object\n * @returns {Object} the meta property that will be passed to the mount function of the TemplateChunk\n */\nfunction createTemplateMeta(componentTemplate) {\n  const fragment = componentTemplate.dom.cloneNode(true);\n  return {\n    avoidDOMInjection: true,\n    fragment,\n    children: Array.from(fragment.childNodes)\n  };\n}\n\nconst {\n  indexOf,\n  slice\n} = [];\n\nconst append = (get, parent, children, start, end, before) => {\n  const isSelect = ('selectedIndex' in parent);\n  let noSelection = isSelect;\n\n  while (start < end) {\n    const child = get(children[start], 1);\n    parent.insertBefore(child, before);\n\n    if (isSelect && noSelection && child.selected) {\n      noSelection = !noSelection;\n      let {\n        selectedIndex\n      } = parent;\n      parent.selectedIndex = selectedIndex < 0 ? start : indexOf.call(parent.querySelectorAll('option'), child);\n    }\n\n    start++;\n  }\n};\nconst eqeq = (a, b) => a == b;\nconst identity = O => O;\nconst indexOf$1 = (moreNodes, moreStart, moreEnd, lessNodes, lessStart, lessEnd, compare) => {\n  const length = lessEnd - lessStart;\n  /* istanbul ignore if */\n\n  if (length < 1) return -1;\n\n  while (moreEnd - moreStart >= length) {\n    let m = moreStart;\n    let l = lessStart;\n\n    while (m < moreEnd && l < lessEnd && compare(moreNodes[m], lessNodes[l])) {\n      m++;\n      l++;\n    }\n\n    if (l === lessEnd) return moreStart;\n    moreStart = m + 1;\n  }\n\n  return -1;\n};\nconst isReversed = (futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare) => {\n  while (currentStart < currentEnd && compare(currentNodes[currentStart], futureNodes[futureEnd - 1])) {\n    currentStart++;\n    futureEnd--;\n  }\n  return futureEnd === 0;\n};\nconst next = (get, list, i, length, before) => i < length ? get(list[i], 0) : 0 < i ? get(list[i - 1], -0).nextSibling : before;\nconst remove = (get, children, start, end) => {\n  while (start < end) drop(get(children[start++], -1));\n}; // - - - - - - - - - - - - - - - - - - -\n// diff related constants and utilities\n// - - - - - - - - - - - - - - - - - - -\n\nconst DELETION = -1;\nconst INSERTION = 1;\nconst SKIP = 0;\nconst SKIP_OND = 50;\n\nconst HS = (futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges) => {\n  let k = 0;\n  /* istanbul ignore next */\n\n  let minLen = futureChanges < currentChanges ? futureChanges : currentChanges;\n  const link = Array(minLen++);\n  const tresh = Array(minLen);\n  tresh[0] = -1;\n\n  for (let i = 1; i < minLen; i++) tresh[i] = currentEnd;\n\n  const nodes = currentNodes.slice(currentStart, currentEnd);\n\n  for (let i = futureStart; i < futureEnd; i++) {\n    const index = nodes.indexOf(futureNodes[i]);\n\n    if (-1 < index) {\n      const idxInOld = index + currentStart;\n      k = findK(tresh, minLen, idxInOld);\n      /* istanbul ignore else */\n\n      if (-1 < k) {\n        tresh[k] = idxInOld;\n        link[k] = {\n          newi: i,\n          oldi: idxInOld,\n          prev: link[k - 1]\n        };\n      }\n    }\n  }\n\n  k = --minLen;\n  --currentEnd;\n\n  while (tresh[k] > currentEnd) --k;\n\n  minLen = currentChanges + futureChanges - k;\n  const diff = Array(minLen);\n  let ptr = link[k];\n  --futureEnd;\n\n  while (ptr) {\n    const {\n      newi,\n      oldi\n    } = ptr;\n\n    while (futureEnd > newi) {\n      diff[--minLen] = INSERTION;\n      --futureEnd;\n    }\n\n    while (currentEnd > oldi) {\n      diff[--minLen] = DELETION;\n      --currentEnd;\n    }\n\n    diff[--minLen] = SKIP;\n    --futureEnd;\n    --currentEnd;\n    ptr = ptr.prev;\n  }\n\n  while (futureEnd >= futureStart) {\n    diff[--minLen] = INSERTION;\n    --futureEnd;\n  }\n\n  while (currentEnd >= currentStart) {\n    diff[--minLen] = DELETION;\n    --currentEnd;\n  }\n\n  return diff;\n}; // this is pretty much the same petit-dom code without the delete map part\n// https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L556-L561\n\n\nconst OND = (futureNodes, futureStart, rows, currentNodes, currentStart, cols, compare) => {\n  const length = rows + cols;\n  const v = [];\n  let d, k, r, c, pv, cv, pd;\n\n  outer: for (d = 0; d <= length; d++) {\n    /* istanbul ignore if */\n    if (d > SKIP_OND) return null;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    cv = v[d] = [];\n\n    for (k = -d; k <= d; k += 2) {\n      if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n        c = pv[pd + k + 1];\n      } else {\n        c = pv[pd + k - 1] + 1;\n      }\n\n      r = c - k;\n\n      while (c < cols && r < rows && compare(currentNodes[currentStart + c], futureNodes[futureStart + r])) {\n        c++;\n        r++;\n      }\n\n      if (c === cols && r === rows) {\n        break outer;\n      }\n\n      cv[d + k] = c;\n    }\n  }\n\n  const diff = Array(d / 2 + length / 2);\n  let diffIdx = diff.length - 1;\n\n  for (d = v.length - 1; d >= 0; d--) {\n    while (c > 0 && r > 0 && compare(currentNodes[currentStart + c - 1], futureNodes[futureStart + r - 1])) {\n      // diagonal edge = equality\n      diff[diffIdx--] = SKIP;\n      c--;\n      r--;\n    }\n\n    if (!d) break;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    k = c - r;\n\n    if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n      // vertical edge = insertion\n      r--;\n      diff[diffIdx--] = INSERTION;\n    } else {\n      // horizontal edge = deletion\n      c--;\n      diff[diffIdx--] = DELETION;\n    }\n  }\n\n  return diff;\n};\n\nconst applyDiff = (diff, get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before) => {\n  const live = [];\n  const length = diff.length;\n  let currentIndex = currentStart;\n  let i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        futureStart++;\n        currentIndex++;\n        break;\n\n      case INSERTION:\n        // TODO: bulk appends for sequential nodes\n        live.push(futureNodes[futureStart]);\n        append(get, parentNode, futureNodes, futureStart++, futureStart, currentIndex < currentLength ? get(currentNodes[currentIndex], 0) : before);\n        break;\n\n      case DELETION:\n        currentIndex++;\n        break;\n    }\n  }\n\n  i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        currentStart++;\n        break;\n\n      case DELETION:\n        // TODO: bulk removes for sequential nodes\n        if (-1 < live.indexOf(currentNodes[currentStart])) currentStart++;else remove(get, currentNodes, currentStart++, currentStart);\n        break;\n    }\n  }\n};\n\nconst findK = (ktr, length, j) => {\n  let lo = 1;\n  let hi = length;\n\n  while (lo < hi) {\n    const mid = (lo + hi) / 2 >>> 0;\n    if (j < ktr[mid]) hi = mid;else lo = mid + 1;\n  }\n\n  return lo;\n};\n\nconst smartDiff = (get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before) => {\n  applyDiff(OND(futureNodes, futureStart, futureChanges, currentNodes, currentStart, currentChanges, compare) || HS(futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges), get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before);\n};\n\nconst drop = node => (node.remove || dropChild).call(node);\n\nfunction dropChild() {\n  const {\n    parentNode\n  } = this;\n  /* istanbul ignore else */\n\n  if (parentNode) parentNode.removeChild(this);\n}\n\n/*! (c) 2018 Andrea Giammarchi (ISC) */\n\nconst domdiff = (parentNode, // where changes happen\ncurrentNodes, // Array of current items/nodes\nfutureNodes, // Array of future items/nodes\noptions // optional object with one of the following properties\n//  before: domNode\n//  compare(generic, generic) => true if same generic\n//  node(generic) => Node\n) => {\n  if (!options) options = {};\n  const compare = options.compare || eqeq;\n  const get = options.node || identity;\n  const before = options.before == null ? null : get(options.before, 0);\n  const currentLength = currentNodes.length;\n  let currentEnd = currentLength;\n  let currentStart = 0;\n  let futureEnd = futureNodes.length;\n  let futureStart = 0; // common prefix\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentStart], futureNodes[futureStart])) {\n    currentStart++;\n    futureStart++;\n  } // common suffix\n\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentEnd - 1], futureNodes[futureEnd - 1])) {\n    currentEnd--;\n    futureEnd--;\n  }\n\n  const currentSame = currentStart === currentEnd;\n  const futureSame = futureStart === futureEnd; // same list\n\n  if (currentSame && futureSame) return futureNodes; // only stuff to add\n\n  if (currentSame && futureStart < futureEnd) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentStart, currentLength, before));\n    return futureNodes;\n  } // only stuff to remove\n\n\n  if (futureSame && currentStart < currentEnd) {\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  }\n\n  const currentChanges = currentEnd - currentStart;\n  const futureChanges = futureEnd - futureStart;\n  let i = -1; // 2 simple indels: the shortest sequence is a subsequence of the longest\n\n  if (currentChanges < futureChanges) {\n    i = indexOf$1(futureNodes, futureStart, futureEnd, currentNodes, currentStart, currentEnd, compare); // inner diff\n\n    if (-1 < i) {\n      append(get, parentNode, futureNodes, futureStart, i, get(currentNodes[currentStart], 0));\n      append(get, parentNode, futureNodes, i + currentChanges, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n      return futureNodes;\n    }\n  }\n  /* istanbul ignore else */\n  else if (futureChanges < currentChanges) {\n      i = indexOf$1(currentNodes, currentStart, currentEnd, futureNodes, futureStart, futureEnd, compare); // outer diff\n\n      if (-1 < i) {\n        remove(get, currentNodes, currentStart, i);\n        remove(get, currentNodes, i + futureChanges, currentEnd);\n        return futureNodes;\n      }\n    } // common case with one replacement for many nodes\n  // or many nodes replaced for a single one\n\n  /* istanbul ignore else */\n\n\n  if (currentChanges < 2 || futureChanges < 2) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, get(currentNodes[currentStart], 0));\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  } // the half match diff part has been skipped in petit-dom\n  // https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L391-L397\n  // accordingly, I think it's safe to skip in here too\n  // if one day it'll come out like the speediest thing ever to do\n  // then I might add it in here too\n  // Extra: before going too fancy, what about reversed lists ?\n  //        This should bail out pretty quickly if that's not the case.\n\n\n  if (currentChanges === futureChanges && isReversed(futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare)) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n    return futureNodes;\n  } // last resort through a smart diff\n\n\n  smartDiff(get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before);\n  return futureNodes;\n};\n\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\nfunction checkType(element, type) {\n  return typeof element === type;\n}\n/**\n * Check if an element is part of an svg\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if we are in an svg context\n */\n\nfunction isSvg(el) {\n  const owner = el.ownerSVGElement;\n  return !!owner || owner === null;\n}\n/**\n * Check if an element is a template tag\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if it's a <template>\n */\n\nfunction isTemplate(el) {\n  return !isNil(el.content);\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\nfunction isFunction(value) {\n  return checkType(value, 'function');\n}\n/**\n * Check if a value is a Boolean\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is a boolean\n */\n\nfunction isBoolean(value) {\n  return checkType(value, 'boolean');\n}\n/**\n * Check if a value is an Object\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is an object\n */\n\nfunction isObject(value) {\n  return !isNil(value) && checkType(value, 'object');\n}\n/**\n * Check if a value is null or undefined\n * @param   {*}  value - anything\n * @returns {boolean} true only for the 'undefined' and 'null' types\n */\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nconst UNMOUNT_SCOPE = Symbol('unmount');\nconst EachBinding = Object.seal({\n  // dynamic binding properties\n  // childrenMap: null,\n  // node: null,\n  // root: null,\n  // condition: null,\n  // evaluate: null,\n  // template: null,\n  // isTemplateTag: false,\n  nodes: [],\n\n  // getKey: null,\n  // indexName: null,\n  // itemName: null,\n  // afterPlaceholder: null,\n  // placeholder: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const {\n      placeholder,\n      nodes,\n      childrenMap\n    } = this;\n    const collection = scope === UNMOUNT_SCOPE ? null : this.evaluate(scope);\n    const items = collection ? Array.from(collection) : [];\n    const parent = placeholder.parentNode; // prepare the diffing\n\n    const {\n      newChildrenMap,\n      batches,\n      futureNodes\n    } = createPatch(items, scope, parentScope, this); // patch the DOM only if there are new nodes\n\n    domdiff(parent, nodes, futureNodes, {\n      before: placeholder,\n      node: patch(Array.from(childrenMap.values()), parentScope)\n    }); // trigger the mounts and the updates\n\n    batches.forEach(fn => fn()); // update the children map\n\n    this.childrenMap = newChildrenMap;\n    this.nodes = futureNodes;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.update(UNMOUNT_SCOPE, parentScope);\n    return this;\n  }\n\n});\n/**\n * Patch the DOM while diffing\n * @param   {TemplateChunk[]} redundant - redundant tepmplate chunks\n * @param   {*} parentScope - scope of the parent template\n * @returns {Function} patch function used by domdiff\n */\n\nfunction patch(redundant, parentScope) {\n  return (item, info) => {\n    if (info < 0) {\n      const element = redundant.pop();\n\n      if (element) {\n        const {\n          template,\n          context\n        } = element; // notice that we pass null as last argument because\n        // the root node and its children will be removed by domdiff\n\n        template.unmount(context, parentScope, null);\n      }\n    }\n\n    return item;\n  };\n}\n/**\n * Check whether a template must be filtered from a loop\n * @param   {Function} condition - filter function\n * @param   {Object} context - argument passed to the filter function\n * @returns {boolean} true if this item should be skipped\n */\n\n\nfunction mustFilterItem(condition, context) {\n  return condition ? Boolean(condition(context)) === false : false;\n}\n/**\n * Extend the scope of the looped template\n * @param   {Object} scope - current template scope\n * @param   {string} options.itemName - key to identify the looped item in the new context\n * @param   {string} options.indexName - key to identify the index of the looped item\n * @param   {number} options.index - current index\n * @param   {*} options.item - collection item looped\n * @returns {Object} enhanced scope object\n */\n\n\nfunction extendScope(scope, _ref) {\n  let {\n    itemName,\n    indexName,\n    index,\n    item\n  } = _ref;\n  scope[itemName] = item;\n  if (indexName) scope[indexName] = index;\n  return scope;\n}\n/**\n * Loop the current template items\n * @param   {Array} items - expression collection value\n * @param   {*} scope - template scope\n * @param   {*} parentScope - scope of the parent template\n * @param   {EeachBinding} binding - each binding object instance\n * @returns {Object} data\n * @returns {Map} data.newChildrenMap - a Map containing the new children template structure\n * @returns {Array} data.batches - array containing the template lifecycle functions to trigger\n * @returns {Array} data.futureNodes - array containing the nodes we need to diff\n */\n\n\nfunction createPatch(items, scope, parentScope, binding) {\n  const {\n    condition,\n    template,\n    childrenMap,\n    itemName,\n    getKey,\n    indexName,\n    root,\n    isTemplateTag\n  } = binding;\n  const newChildrenMap = new Map();\n  const batches = [];\n  const futureNodes = [];\n  items.forEach((item, index) => {\n    const context = extendScope(Object.create(scope), {\n      itemName,\n      indexName,\n      index,\n      item\n    });\n    const key = getKey ? getKey(context) : index;\n    const oldItem = childrenMap.get(key);\n\n    if (mustFilterItem(condition, context)) {\n      return;\n    }\n\n    const componentTemplate = oldItem ? oldItem.template : template.clone();\n    const el = oldItem ? componentTemplate.el : root.cloneNode();\n    const mustMount = !oldItem;\n    const meta = isTemplateTag && mustMount ? createTemplateMeta(componentTemplate) : {};\n\n    if (mustMount) {\n      batches.push(() => componentTemplate.mount(el, context, parentScope, meta));\n    } else {\n      batches.push(() => componentTemplate.update(context, parentScope));\n    } // create the collection of nodes to update or to add\n    // in case of template tags we need to add all its children nodes\n\n\n    if (isTemplateTag) {\n      const children = meta.children || componentTemplate.children;\n      futureNodes.push(...children);\n    } else {\n      futureNodes.push(el);\n    } // delete the old item from the children map\n\n\n    childrenMap.delete(key); // update the children map\n\n    newChildrenMap.set(key, {\n      template: componentTemplate,\n      context,\n      index\n    });\n  });\n  return {\n    newChildrenMap,\n    batches,\n    futureNodes\n  };\n}\n\nfunction create(node, _ref2) {\n  let {\n    evaluate,\n    condition,\n    itemName,\n    indexName,\n    getKey,\n    template\n  } = _ref2;\n  const placeholder = document.createTextNode('');\n  const parent = node.parentNode;\n  const root = node.cloneNode();\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, EachBinding, {\n    childrenMap: new Map(),\n    node,\n    root,\n    condition,\n    evaluate,\n    isTemplateTag: isTemplate(root),\n    template: template.createDOM(node),\n    getKey,\n    indexName,\n    itemName,\n    placeholder\n  });\n}\n\n/**\n * Binding responsible for the `if` directive\n */\n\nconst IfBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // isTemplateTag: false,\n  // placeholder: null,\n  // template: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const value = !!this.evaluate(scope);\n    const mustMount = !this.value && value;\n    const mustUnmount = this.value && !value;\n\n    const mount = () => {\n      const pristine = this.node.cloneNode();\n      this.placeholder.parentNode.insertBefore(pristine, this.placeholder);\n      this.template = this.template.clone();\n      this.template.mount(pristine, scope, parentScope);\n    };\n\n    switch (true) {\n      case mustMount:\n        mount();\n        break;\n\n      case mustUnmount:\n        this.unmount(scope);\n        break;\n\n      default:\n        if (value) this.template.update(scope, parentScope);\n    }\n\n    this.value = value;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.template.unmount(scope, parentScope, true);\n    return this;\n  }\n\n});\nfunction create$1(node, _ref) {\n  let {\n    evaluate,\n    template\n  } = _ref;\n  const parent = node.parentNode;\n  const placeholder = document.createTextNode('');\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, IfBinding, {\n    node,\n    evaluate,\n    placeholder,\n    template: template.createDOM(node)\n  });\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Returns the memoized (cached) function.\n * // borrowed from https://www.30secondsofcode.org/js/s/memoize\n * @param {Function} fn - function to memoize\n * @returns {Function} memoize function\n */\n\nfunction memoize(fn) {\n  const cache = new Map();\n\n  const cached = val => {\n    return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) && cache.get(val);\n  };\n\n  cached.cache = cache;\n  return cached;\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\nfunction evaluateAttributeExpressions(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const {\n      value,\n      type\n    } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE:\n        return Object.assign({}, acc, value);\n      // value attribute\n\n      case type === VALUE:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nconst REMOVE_ATTRIBUTE = 'removeAttribute';\nconst SET_ATTIBUTE = 'setAttribute';\nconst ElementProto = typeof Element === 'undefined' ? {} : Element.prototype;\nconst isNativeHtmlProperty = memoize(name => ElementProto.hasOwnProperty(name)); // eslint-disable-line\n\n/**\n * Add all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing the attributes names and values\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction setAllAttributes(node, attributes) {\n  Object.entries(attributes).forEach((_ref) => {\n    let [name, value] = _ref;\n    return attributeExpression(node, {\n      name\n    }, value);\n  });\n}\n/**\n * Remove all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} newAttributes - object containing all the new attribute names\n * @param   {Object} oldAttributes - object containing all the old attribute names\n * @returns {undefined} sorry it's a void function :(\n */\n\n\nfunction removeAllAttributes(node, newAttributes, oldAttributes) {\n  const newKeys = newAttributes ? Object.keys(newAttributes) : [];\n  Object.keys(oldAttributes).filter(name => !newKeys.includes(name)).forEach(attribute => node.removeAttribute(attribute));\n}\n/**\n * This methods handles the DOM attributes updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - attribute name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - the old expression cached value\n * @returns {undefined}\n */\n\n\nfunction attributeExpression(node, _ref2, value, oldValue) {\n  let {\n    name\n  } = _ref2;\n\n  // is it a spread operator? {...attributes}\n  if (!name) {\n    if (oldValue) {\n      // remove all the old attributes\n      removeAllAttributes(node, value, oldValue);\n    } // is the value still truthy?\n\n\n    if (value) {\n      setAllAttributes(node, value);\n    }\n\n    return;\n  } // handle boolean attributes\n\n\n  if (!isNativeHtmlProperty(name) && (isBoolean(value) || isObject(value) || isFunction(value))) {\n    node[name] = value;\n  }\n\n  node[getMethod(value)](name, normalizeValue(name, value));\n}\n/**\n * Get the attribute modifier method\n * @param   {*} value - if truthy we return `setAttribute` othewise `removeAttribute`\n * @returns {string} the node attribute modifier method name\n */\n\nfunction getMethod(value) {\n  return isNil(value) || value === false || value === '' || isObject(value) || isFunction(value) ? REMOVE_ATTRIBUTE : SET_ATTIBUTE;\n}\n/**\n * Get the value as string\n * @param   {string} name - attribute name\n * @param   {*} value - user input value\n * @returns {string} input value as string\n */\n\n\nfunction normalizeValue(name, value) {\n  // be sure that expressions like selected={ true } will be always rendered as selected='selected'\n  if (value === true) return name;\n  return value;\n}\n\nconst RE_EVENTS_PREFIX = /^on/;\n\nconst getCallbackAndOptions = value => Array.isArray(value) ? value : [value, false]; // see also https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38\n\n\nconst EventListener = {\n  handleEvent(event) {\n    this[event.type](event);\n  }\n\n};\nconst ListenersWeakMap = new WeakMap();\n\nconst createListener = node => {\n  const listener = Object.create(EventListener);\n  ListenersWeakMap.set(node, listener);\n  return listener;\n};\n/**\n * Set a new event listener\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - event name\n * @param   {*} value - new expression value\n * @returns {value} the callback just received\n */\n\n\nfunction eventExpression(node, _ref, value) {\n  let {\n    name\n  } = _ref;\n  const normalizedEventName = name.replace(RE_EVENTS_PREFIX, '');\n  const eventListener = ListenersWeakMap.get(node) || createListener(node);\n  const [callback, options] = getCallbackAndOptions(value);\n  const handler = eventListener[normalizedEventName];\n  const mustRemoveEvent = handler && !callback;\n  const mustAddEvent = callback && !handler;\n\n  if (mustRemoveEvent) {\n    node.removeEventListener(normalizedEventName, eventListener);\n  }\n\n  if (mustAddEvent) {\n    node.addEventListener(normalizedEventName, eventListener, options);\n  }\n\n  eventListener[normalizedEventName] = callback;\n}\n\n/**\n * Normalize the user value in order to render a empty string in case of falsy values\n * @param   {*} value - user input value\n * @returns {string} hopefully a string\n */\n\nfunction normalizeStringValue(value) {\n  return isNil(value) ? '' : value;\n}\n\n/**\n * Get the the target text node to update or create one from of a comment node\n * @param   {HTMLElement} node - any html element containing childNodes\n * @param   {number} childNodeIndex - index of the text node in the childNodes list\n * @returns {HTMLTextNode} the text node to update\n */\n\nconst getTextNode = (node, childNodeIndex) => {\n  const target = node.childNodes[childNodeIndex];\n\n  if (target.nodeType === Node.COMMENT_NODE) {\n    const textNode = document.createTextNode('');\n    node.replaceChild(textNode, target);\n    return textNode;\n  }\n\n  return target;\n};\n/**\n * This methods handles a simple text expression update\n * @param   {HTMLElement} node - target node\n * @param   {Object} data - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction textExpression(node, data, value) {\n  node.data = normalizeStringValue(value);\n}\n\n/**\n * This methods handles the input fileds value updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction valueExpression(node, expression, value) {\n  node.value = normalizeStringValue(value);\n}\n\nvar expressions = {\n  [ATTRIBUTE]: attributeExpression,\n  [EVENT]: eventExpression,\n  [TEXT]: textExpression,\n  [VALUE]: valueExpression\n};\n\nconst Expression = Object.seal({\n  // Static props\n  // node: null,\n  // value: null,\n  // API methods\n\n  /**\n   * Mount the expression evaluating its initial value\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  mount(scope) {\n    // hopefully a pure function\n    this.value = this.evaluate(scope); // IO() DOM updates\n\n    apply(this, this.value);\n    return this;\n  },\n\n  /**\n   * Update the expression if its value changed\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  update(scope) {\n    // pure function\n    const value = this.evaluate(scope);\n\n    if (this.value !== value) {\n      // IO() DOM updates\n      apply(this, value);\n      this.value = value;\n    }\n\n    return this;\n  },\n\n  /**\n   * Expression teardown method\n   * @returns {Expression} self\n   */\n  unmount() {\n    // unmount only the event handling expressions\n    if (this.type === EVENT) apply(this, null);\n    return this;\n  }\n\n});\n/**\n * IO() function to handle the DOM updates\n * @param {Expression} expression - expression object\n * @param {*} value - current expression value\n * @returns {undefined}\n */\n\nfunction apply(expression, value) {\n  return expressions[expression.type](expression.node, expression, value, expression.value);\n}\n\nfunction create$2(node, data) {\n  return Object.assign({}, Expression, data, {\n    node: data.type === TEXT ? getTextNode(node, data.childNodeIndex) : node\n  });\n}\n\n/**\n * Create a flat object having as keys a list of methods that if dispatched will propagate\n * on the whole collection\n * @param   {Array} collection - collection to iterate\n * @param   {Array<string>} methods - methods to execute on each item of the collection\n * @param   {*} context - context returned by the new methods created\n * @returns {Object} a new object to simplify the the nested methods dispatching\n */\nfunction flattenCollectionMethods(collection, methods, context) {\n  return methods.reduce((acc, method) => {\n    return Object.assign({}, acc, {\n      [method]: scope => {\n        return collection.map(item => item[method](scope)) && context;\n      }\n    });\n  }, {});\n}\n\nfunction create$3(node, _ref) {\n  let {\n    expressions\n  } = _ref;\n  return Object.assign({}, flattenCollectionMethods(expressions.map(expression => create$2(node, expression)), ['mount', 'update', 'unmount']));\n}\n\n// Riot.js constants that can be used accross more modules\nconst COMPONENTS_IMPLEMENTATION_MAP = new Map(),\n      DOM_COMPONENT_INSTANCE_PROPERTY = Symbol('riot-component'),\n      PLUGINS_SET = new Set(),\n      IS_DIRECTIVE = 'is',\n      VALUE_ATTRIBUTE = 'value',\n      MOUNT_METHOD_KEY = 'mount',\n      UPDATE_METHOD_KEY = 'update',\n      UNMOUNT_METHOD_KEY = 'unmount',\n      SHOULD_UPDATE_KEY = 'shouldUpdate',\n      ON_BEFORE_MOUNT_KEY = 'onBeforeMount',\n      ON_MOUNTED_KEY = 'onMounted',\n      ON_BEFORE_UPDATE_KEY = 'onBeforeUpdate',\n      ON_UPDATED_KEY = 'onUpdated',\n      ON_BEFORE_UNMOUNT_KEY = 'onBeforeUnmount',\n      ON_UNMOUNTED_KEY = 'onUnmounted',\n      PROPS_KEY = 'props',\n      STATE_KEY = 'state',\n      SLOTS_KEY = 'slots',\n      ROOT_KEY = 'root',\n      IS_PURE_SYMBOL = Symbol.for('pure'),\n      PARENT_KEY_SYMBOL = Symbol('parent'),\n      ATTRIBUTES_KEY_SYMBOL = Symbol('attributes'),\n      TEMPLATE_KEY_SYMBOL = Symbol('template');\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP,\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY,\n  PLUGINS_SET: PLUGINS_SET,\n  IS_DIRECTIVE: IS_DIRECTIVE,\n  VALUE_ATTRIBUTE: VALUE_ATTRIBUTE,\n  MOUNT_METHOD_KEY: MOUNT_METHOD_KEY,\n  UPDATE_METHOD_KEY: UPDATE_METHOD_KEY,\n  UNMOUNT_METHOD_KEY: UNMOUNT_METHOD_KEY,\n  SHOULD_UPDATE_KEY: SHOULD_UPDATE_KEY,\n  ON_BEFORE_MOUNT_KEY: ON_BEFORE_MOUNT_KEY,\n  ON_MOUNTED_KEY: ON_MOUNTED_KEY,\n  ON_BEFORE_UPDATE_KEY: ON_BEFORE_UPDATE_KEY,\n  ON_UPDATED_KEY: ON_UPDATED_KEY,\n  ON_BEFORE_UNMOUNT_KEY: ON_BEFORE_UNMOUNT_KEY,\n  ON_UNMOUNTED_KEY: ON_UNMOUNTED_KEY,\n  PROPS_KEY: PROPS_KEY,\n  STATE_KEY: STATE_KEY,\n  SLOTS_KEY: SLOTS_KEY,\n  ROOT_KEY: ROOT_KEY,\n  IS_PURE_SYMBOL: IS_PURE_SYMBOL,\n  PARENT_KEY_SYMBOL: PARENT_KEY_SYMBOL,\n  ATTRIBUTES_KEY_SYMBOL: ATTRIBUTES_KEY_SYMBOL,\n  TEMPLATE_KEY_SYMBOL: TEMPLATE_KEY_SYMBOL\n});\n\nfunction extendParentScope(attributes, scope, parentScope) {\n  if (!attributes || !attributes.length) return parentScope;\n  const expressions = attributes.map(attr => Object.assign({}, attr, {\n    value: attr.evaluate(scope)\n  }));\n  return Object.assign(Object.create(parentScope || null), evaluateAttributeExpressions(expressions));\n} // this function is only meant to fix an edge case\n// https://github.com/riot/riot/issues/2842\n\n\nconst getRealParent = (scope, parentScope) => parentScope ? parentScope === scope ? scope[PARENT_KEY_SYMBOL] : parentScope : undefined;\n\nconst SlotBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // name: null,\n  attributes: [],\n\n  // template: null,\n  getTemplateScope(scope, parentScope) {\n    return extendParentScope(this.attributes, scope, parentScope);\n  },\n\n  // API methods\n  mount(scope, parentScope) {\n    const templateData = scope.slots ? scope.slots.find((_ref) => {\n      let {\n        id\n      } = _ref;\n      return id === this.name;\n    }) : false;\n    const {\n      parentNode\n    } = this.node;\n    const realParent = getRealParent(scope, parentScope);\n    this.template = templateData && create$6(templateData.html, templateData.bindings).createDOM(parentNode);\n\n    if (this.template) {\n      this.template.mount(this.node, this.getTemplateScope(scope, realParent), realParent);\n      this.template.children = moveSlotInnerContent(this.node);\n    }\n\n    removeNode(this.node);\n    return this;\n  },\n\n  update(scope, parentScope) {\n    if (this.template) {\n      const realParent = getRealParent(scope, parentScope);\n      this.template.update(this.getTemplateScope(scope, realParent), realParent);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.template) {\n      this.template.unmount(this.getTemplateScope(scope, parentScope), null, mustRemoveRoot);\n    }\n\n    return this;\n  }\n\n});\n/**\n * Move the inner content of the slots outside of them\n * @param   {HTMLNode} slot - slot node\n * @param   {HTMLElement} children - array to fill with the child nodes detected\n * @returns {HTMLElement[]} list of the node moved\n */\n\nfunction moveSlotInnerContent(slot, children) {\n  if (children === void 0) {\n    children = [];\n  }\n\n  const child = slot.firstChild;\n\n  if (child) {\n    slot.parentNode.insertBefore(child, slot);\n    return [child, ...moveSlotInnerContent(slot)];\n  }\n\n  return children;\n}\n/**\n * Create a single slot binding\n * @param   {HTMLElement} node - slot node\n * @param   {string} options.name - slot id\n * @returns {Object} Slot binding object\n */\n\n\nfunction createSlot(node, _ref2) {\n  let {\n    name,\n    attributes\n  } = _ref2;\n  return Object.assign({}, SlotBinding, {\n    attributes,\n    node,\n    name\n  });\n}\n\n/**\n * Create a new tag object if it was registered before, otherwise fallback to the simple\n * template chunk\n * @param   {Function} component - component factory function\n * @param   {Array<Object>} slots - array containing the slots markup\n * @param   {Array} attributes - dynamic attributes that will be received by the tag element\n * @returns {TagImplementation|TemplateChunk} a tag implementation or a template chunk as fallback\n */\n\nfunction getTag(component, slots, attributes) {\n  if (slots === void 0) {\n    slots = [];\n  }\n\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  // if this tag was registered before we will return its implementation\n  if (component) {\n    return component({\n      slots,\n      attributes\n    });\n  } // otherwise we return a template chunk\n\n\n  return create$6(slotsToMarkup(slots), [...slotBindings(slots), {\n    // the attributes should be registered as binding\n    // if we fallback to a normal template chunk\n    expressions: attributes.map(attr => {\n      return Object.assign({\n        type: ATTRIBUTE\n      }, attr);\n    })\n  }]);\n}\n/**\n * Merge all the slots bindings into a single array\n * @param   {Array<Object>} slots - slots collection\n * @returns {Array<Bindings>} flatten bindings array\n */\n\n\nfunction slotBindings(slots) {\n  return slots.reduce((acc, _ref) => {\n    let {\n      bindings\n    } = _ref;\n    return acc.concat(bindings);\n  }, []);\n}\n/**\n * Merge all the slots together in a single markup string\n * @param   {Array<Object>} slots - slots collection\n * @returns {string} markup of all the slots in a single string\n */\n\n\nfunction slotsToMarkup(slots) {\n  return slots.reduce((acc, slot) => {\n    return acc + slot.html;\n  }, '');\n}\n\nconst TagBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // name: null,\n  // slots: null,\n  // tag: null,\n  // attributes: null,\n  // getComponent: null,\n  mount(scope) {\n    return this.update(scope);\n  },\n\n  update(scope, parentScope) {\n    const name = this.evaluate(scope); // simple update\n\n    if (name === this.name) {\n      this.tag.update(scope);\n    } else {\n      // unmount the old tag if it exists\n      this.unmount(scope, parentScope, true); // mount the new tag\n\n      this.name = name;\n      this.tag = getTag(this.getComponent(name), this.slots, this.attributes);\n      this.tag.mount(this.node, scope);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, keepRootTag) {\n    if (this.tag) {\n      // keep the root tag\n      this.tag.unmount(keepRootTag);\n    }\n\n    return this;\n  }\n\n});\nfunction create$4(node, _ref2) {\n  let {\n    evaluate,\n    getComponent,\n    slots,\n    attributes\n  } = _ref2;\n  return Object.assign({}, TagBinding, {\n    node,\n    evaluate,\n    slots,\n    attributes,\n    getComponent\n  });\n}\n\nvar bindings = {\n  [IF]: create$1,\n  [SIMPLE]: create$3,\n  [EACH]: create,\n  [TAG]: create$4,\n  [SLOT]: createSlot\n};\n\n/**\n * Text expressions in a template tag will get childNodeIndex value normalized\n * depending on the position of the <template> tag offset\n * @param   {Expression[]} expressions - riot expressions array\n * @param   {number} textExpressionsOffset - offset of the <template> tag\n * @returns {Expression[]} expressions containing the text expressions normalized\n */\n\nfunction fixTextExpressionsOffset(expressions, textExpressionsOffset) {\n  return expressions.map(e => e.type === TEXT ? Object.assign({}, e, {\n    childNodeIndex: e.childNodeIndex + textExpressionsOffset\n  }) : e);\n}\n/**\n * Bind a new expression object to a DOM node\n * @param   {HTMLElement} root - DOM node where to bind the expression\n * @param   {Object} binding - binding data\n * @param   {number|null} templateTagOffset - if it's defined we need to fix the text expressions childNodeIndex offset\n * @returns {Binding} Binding object\n */\n\n\nfunction create$5(root, binding, templateTagOffset) {\n  const {\n    selector,\n    type,\n    redundantAttribute,\n    expressions\n  } = binding; // find the node to apply the bindings\n\n  const node = selector ? root.querySelector(selector) : root; // remove eventually additional attributes created only to select this node\n\n  if (redundantAttribute) node.removeAttribute(redundantAttribute);\n  const bindingExpressions = expressions || []; // init the binding\n\n  return (bindings[type] || bindings[SIMPLE])(node, Object.assign({}, binding, {\n    expressions: templateTagOffset && !selector ? fixTextExpressionsOffset(bindingExpressions, templateTagOffset) : bindingExpressions\n  }));\n}\n\nfunction createHTMLTree(html, root) {\n  const template = isTemplate(root) ? root : document.createElement('template');\n  template.innerHTML = html;\n  return template.content;\n} // for svg nodes we need a bit more work\n\n\nfunction createSVGTree(html, container) {\n  // create the SVGNode\n  const svgNode = container.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns=\"http://www.w3.org/2000/svg\">${html}</svg>`, 'application/xml').documentElement, true);\n  return svgNode;\n}\n/**\n * Create the DOM that will be injected\n * @param {Object} root - DOM node to find out the context where the fragment will be created\n * @param   {string} html - DOM to create as string\n * @returns {HTMLDocumentFragment|HTMLElement} a new html fragment\n */\n\n\nfunction createDOMTree(root, html) {\n  if (isSvg(root)) return createSVGTree(html, root);\n  return createHTMLTree(html, root);\n}\n\n/**\n * Inject the DOM tree into a target node\n * @param   {HTMLElement} el - target element\n * @param   {HTMLFragment|SVGElement} dom - dom tree to inject\n * @returns {undefined}\n */\n\nfunction injectDOM(el, dom) {\n  switch (true) {\n    case isSvg(el):\n      moveChildren(dom, el);\n      break;\n\n    case isTemplate(el):\n      el.parentNode.replaceChild(dom, el);\n      break;\n\n    default:\n      el.appendChild(dom);\n  }\n}\n\n/**\n * Create the Template DOM skeleton\n * @param   {HTMLElement} el - root node where the DOM will be injected\n * @param   {string} html - markup that will be injected into the root node\n * @returns {HTMLFragment} fragment that will be injected into the root node\n */\n\nfunction createTemplateDOM(el, html) {\n  return html && (typeof html === 'string' ? createDOMTree(el, html) : html);\n}\n/**\n * Template Chunk model\n * @type {Object}\n */\n\n\nconst TemplateChunk = Object.freeze({\n  // Static props\n  // bindings: null,\n  // bindingsData: null,\n  // html: null,\n  // isTemplateTag: false,\n  // fragment: null,\n  // children: null,\n  // dom: null,\n  // el: null,\n\n  /**\n   * Create the template DOM structure that will be cloned on each mount\n   * @param   {HTMLElement} el - the root node\n   * @returns {TemplateChunk} self\n   */\n  createDOM(el) {\n    // make sure that the DOM gets created before cloning the template\n    this.dom = this.dom || createTemplateDOM(el, this.html);\n    return this;\n  },\n\n  // API methods\n\n  /**\n   * Attach the template to a DOM node\n   * @param   {HTMLElement} el - target DOM node\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n   * @returns {TemplateChunk} self\n   */\n  mount(el, scope, parentScope, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    if (!el) throw new Error('Please provide DOM node to mount properly your template');\n    if (this.el) this.unmount(scope); // <template> tags require a bit more work\n    // the template fragment might be already created via meta outside of this call\n\n    const {\n      fragment,\n      children,\n      avoidDOMInjection\n    } = meta; // <template> bindings of course can not have a root element\n    // so we check the parent node to set the query selector bindings\n\n    const {\n      parentNode\n    } = children ? children[0] : el;\n    const isTemplateTag = isTemplate(el);\n    const templateTagOffset = isTemplateTag ? Math.max(Array.from(parentNode.childNodes).indexOf(el), 0) : null;\n    this.isTemplateTag = isTemplateTag; // create the DOM if it wasn't created before\n\n    this.createDOM(el);\n\n    if (this.dom) {\n      // create the new template dom fragment if it want already passed in via meta\n      this.fragment = fragment || this.dom.cloneNode(true);\n    } // store root node\n    // notice that for template tags the root note will be the parent tag\n\n\n    this.el = this.isTemplateTag ? parentNode : el; // create the children array only for the <template> fragments\n\n    this.children = this.isTemplateTag ? children || Array.from(this.fragment.childNodes) : null; // inject the DOM into the el only if a fragment is available\n\n    if (!avoidDOMInjection && this.fragment) injectDOM(el, this.fragment); // create the bindings\n\n    this.bindings = this.bindingsData.map(binding => create$5(this.el, binding, templateTagOffset));\n    this.bindings.forEach(b => b.mount(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Update the template with fresh data\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @returns {TemplateChunk} self\n   */\n  update(scope, parentScope) {\n    this.bindings.forEach(b => b.update(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Remove the template from the node where it was initially mounted\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {boolean|null} mustRemoveRoot - if true remove the root element,\n   * if false or undefined clean the root tag content, if null don't touch the DOM\n   * @returns {TemplateChunk} self\n   */\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.el) {\n      this.bindings.forEach(b => b.unmount(scope, parentScope, mustRemoveRoot));\n\n      switch (true) {\n        // <template> tags should be treated a bit differently\n        // we need to clear their children only if it's explicitly required by the caller\n        // via mustRemoveRoot !== null\n        case this.children && mustRemoveRoot !== null:\n          clearChildren(this.children);\n          break;\n        // remove the root node only if the mustRemoveRoot === true\n\n        case mustRemoveRoot === true:\n          removeNode(this.el);\n          break;\n        // otherwise we clean the node children\n\n        case mustRemoveRoot !== null:\n          cleanNode(this.el);\n          break;\n      }\n\n      this.el = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Clone the template chunk\n   * @returns {TemplateChunk} a clone of this object resetting the this.el property\n   */\n  clone() {\n    return Object.assign({}, this, {\n      el: null\n    });\n  }\n\n});\n/**\n * Create a template chunk wiring also the bindings\n * @param   {string|HTMLElement} html - template string\n * @param   {Array} bindings - bindings collection\n * @returns {TemplateChunk} a new TemplateChunk copy\n */\n\nfunction create$6(html, bindings) {\n  if (bindings === void 0) {\n    bindings = [];\n  }\n\n  return Object.assign({}, TemplateChunk, {\n    html,\n    bindingsData: bindings\n  });\n}\n\n/**\n * Method used to bind expressions to a DOM node\n * @param   {string|HTMLElement} html - your static template html structure\n * @param   {Array} bindings - list of the expressions to bind to update the markup\n * @returns {TemplateChunk} a new TemplateChunk object having the `update`,`mount`, `unmount` and `clone` methods\n *\n * @example\n *\n * riotDOMBindings\n *  .template(\n *   `<div expr0><!----></div><div><p expr1><!----><section expr2></section></p>`,\n *   [\n *     {\n *       selector: '[expr0]',\n *       redundantAttribute: 'expr0',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.time;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr1]',\n *       redundantAttribute: 'expr1',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.name;\n *           },\n *         },\n *         {\n *           type: 'attribute',\n *           name: 'style',\n *           evaluate(scope) {\n *             return scope.style;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr2]',\n *       redundantAttribute: 'expr2',\n *       type: bindingTypes.IF,\n *       evaluate(scope) {\n *         return scope.isVisible;\n *       },\n *       template: riotDOMBindings.template('hello there'),\n *     },\n *   ]\n * )\n */\n\nvar DOMBindings = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  template: create$6,\n  createBinding: create$5,\n  createExpression: create$2,\n  bindingTypes: bindingTypes,\n  expressionTypes: expressionTypes\n});\n\nfunction noop() {\n  return this;\n}\n/**\n * Autobind the methods of a source object to itself\n * @param   {Object} source - probably a riot tag instance\n * @param   {Array<string>} methods - list of the methods to autobind\n * @returns {Object} the original object received\n */\n\nfunction autobindMethods(source, methods) {\n  methods.forEach(method => {\n    source[method] = source[method].bind(source);\n  });\n  return source;\n}\n/**\n * Call the first argument received only if it's a function otherwise return it as it is\n * @param   {*} source - anything\n * @returns {*} anything\n */\n\nfunction callOrAssign(source) {\n  return isFunction(source) ? source.prototype && source.prototype.constructor ? new source() : source() : source;\n}\n\n/**\n * Helper function to set an immutable property\n * @param   {Object} source - object where the new property will be set\n * @param   {string} key - object key where the new property will be stored\n * @param   {*} value - value of the new property\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} - the original object modified\n */\nfunction defineProperty(source, key, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  /* eslint-disable fp/no-mutating-methods */\n  Object.defineProperty(source, key, Object.assign({\n    value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  /* eslint-enable fp/no-mutating-methods */\n\n  return source;\n}\n/**\n * Define multiple properties on a target object\n * @param   {Object} source - object where the new properties will be set\n * @param   {Object} properties - object containing as key pair the key + value properties\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} the original object modified\n */\n\nfunction defineProperties(source, properties, options) {\n  Object.entries(properties).forEach((_ref) => {\n    let [key, value] = _ref;\n    defineProperty(source, key, value, options);\n  });\n  return source;\n}\n/**\n * Define default properties if they don't exist on the source object\n * @param   {Object} source - object that will receive the default properties\n * @param   {Object} defaults - object containing additional optional keys\n * @returns {Object} the original object received enhanced\n */\n\nfunction defineDefaults(source, defaults) {\n  Object.entries(defaults).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    if (!source[key]) source[key] = value;\n  });\n  return source;\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\n\nfunction $(selector, ctx) {\n  return domToArray(typeof selector === 'string' ? (ctx || document).querySelectorAll(selector) : selector);\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Object }              name  - either the name of the attribute to set\n *                                                 or a list of properties as object key - value\n * @param   { string }                     value - the new value of the attribute (optional)\n * @returns { HTMLElement|NodeList|Array } the original array of elements passed to this function\n *\n * @example\n *\n * import { set } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * set(img, 'width', 100)\n *\n * // or also\n * set(img, {\n *   width: 300,\n *   height: 300\n * })\n *\n */\n\n\nfunction set(els, name, value) {\n  const attrs = typeof name === 'object' ? name : {\n    [name]: value\n  };\n  const props = Object.keys(attrs);\n  domToArray(els).forEach(el => {\n    props.forEach(prop => el.setAttribute(prop, attrs[prop]));\n  });\n  return els;\n}\n/**\n * Get any attribute from a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to get\n * @returns { Array|string } list of the attributes found\n *\n * @example\n *\n * import { get } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * get(img, 'width') // => '200'\n *\n * // or also\n * get(img, ['width', 'height']) // => ['200', '300']\n *\n * // or also\n * get([img1, img2], ['width', 'height']) // => [['200', '300'], ['500', '200']]\n */\n\nfunction get(els, name) {\n  return parseNodes(els, name, 'getAttribute');\n}\n\nconst CSS_BY_NAME = new Map();\nconst STYLE_NODE_SELECTOR = 'style[riot]'; // memoized curried function\n\nconst getStyleNode = (style => {\n  return () => {\n    // lazy evaluation:\n    // if this function was already called before\n    // we return its cached result\n    if (style) return style; // create a new style element or use an existing one\n    // and cache it internally\n\n    style = $(STYLE_NODE_SELECTOR)[0] || document.createElement('style');\n    set(style, 'type', 'text/css');\n    /* istanbul ignore next */\n\n    if (!style.parentNode) document.head.appendChild(style);\n    return style;\n  };\n})();\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\n\n\nvar cssManager = {\n  CSS_BY_NAME,\n\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { string } name - if it's passed we will map the css to a tagname\n   * @param { string } css - css string\n   * @returns {Object} self\n   */\n  add(name, css) {\n    if (!CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.set(name, css);\n      this.inject();\n    }\n\n    return this;\n  },\n\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   * @returns {Object} self\n   */\n  inject() {\n    getStyleNode().innerHTML = [...CSS_BY_NAME.values()].join('\\n');\n    return this;\n  },\n\n  /**\n   * Remove a tag style from the DOM\n   * @param {string} name a registered tagname\n   * @returns {Object} self\n   */\n  remove(name) {\n    if (CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.delete(name);\n      this.inject();\n    }\n\n    return this;\n  }\n\n};\n\n/**\n * Function to curry any javascript method\n * @param   {Function}  fn - the target function we want to curry\n * @param   {...[args]} acc - initial arguments\n * @returns {Function|*} it will return a function until the target function\n *                       will receive all of its arguments\n */\nfunction curry(fn) {\n  for (var _len = arguments.length, acc = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    acc[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args = [...acc, ...args];\n    return args.length < fn.length ? curry(fn, ...args) : fn(...args);\n  };\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   {HTMLElement} element - DOM node we want to inspect\n * @returns {string} name to identify this dom node in riot\n */\n\nfunction getName(element) {\n  return get(element, IS_DIRECTIVE) || element.tagName.toLowerCase();\n}\n\nconst COMPONENT_CORE_HELPERS = Object.freeze({\n  // component helpers\n  $(selector) {\n    return $(selector, this.root)[0];\n  },\n\n  $$(selector) {\n    return $(selector, this.root);\n  }\n\n});\nconst PURE_COMPONENT_API = Object.freeze({\n  [MOUNT_METHOD_KEY]: noop,\n  [UPDATE_METHOD_KEY]: noop,\n  [UNMOUNT_METHOD_KEY]: noop\n});\nconst COMPONENT_LIFECYCLE_METHODS = Object.freeze({\n  [SHOULD_UPDATE_KEY]: noop,\n  [ON_BEFORE_MOUNT_KEY]: noop,\n  [ON_MOUNTED_KEY]: noop,\n  [ON_BEFORE_UPDATE_KEY]: noop,\n  [ON_UPDATED_KEY]: noop,\n  [ON_BEFORE_UNMOUNT_KEY]: noop,\n  [ON_UNMOUNTED_KEY]: noop\n});\nconst MOCKED_TEMPLATE_INTERFACE = Object.assign({}, PURE_COMPONENT_API, {\n  clone: noop,\n  createDOM: noop\n});\n/**\n * Evaluate the component properties either from its real attributes or from its initial user properties\n * @param   {HTMLElement} element - component root\n * @param   {Object}  initialProps - initial props\n * @returns {Object} component props key value pairs\n */\n\nfunction evaluateInitialProps(element, initialProps) {\n  if (initialProps === void 0) {\n    initialProps = {};\n  }\n\n  return Object.assign({}, DOMattributesToObject(element), callOrAssign(initialProps));\n}\n/**\n * Bind a DOM node to its component object\n * @param   {HTMLElement} node - html node mounted\n * @param   {Object} component - Riot.js component object\n * @returns {Object} the component object received as second argument\n */\n\n\nconst bindDOMNodeToComponentObject = (node, component) => node[DOM_COMPONENT_INSTANCE_PROPERTY] = component;\n/**\n * Wrap the Riot.js core API methods using a mapping function\n * @param   {Function} mapFunction - lifting function\n * @returns {Object} an object having the { mount, update, unmount } functions\n */\n\n\nfunction createCoreAPIMethods(mapFunction) {\n  return [MOUNT_METHOD_KEY, UPDATE_METHOD_KEY, UNMOUNT_METHOD_KEY].reduce((acc, method) => {\n    acc[method] = mapFunction(method);\n    return acc;\n  }, {});\n}\n/**\n * Factory function to create the component templates only once\n * @param   {Function} template - component template creation function\n * @param   {Object} components - object containing the nested components\n * @returns {TemplateChunk} template chunk object\n */\n\n\nfunction componentTemplateFactory(template, components) {\n  return template(create$6, expressionTypes, bindingTypes, name => {\n    return components[name] || COMPONENTS_IMPLEMENTATION_MAP.get(name);\n  });\n}\n/**\n * Create a pure component\n * @param   {Function} pureFactoryFunction - pure component factory function\n * @param   {Array} options.slots - component slots\n * @param   {Array} options.attributes - component attributes\n * @param   {Array} options.template - template factory function\n * @param   {Array} options.template - template factory function\n * @param   {any} options.props - initial component properties\n * @returns {Object} pure component object\n */\n\n\nfunction createPureComponent(pureFactoryFunction, _ref) {\n  let {\n    slots,\n    attributes,\n    props,\n    css,\n    template\n  } = _ref;\n  if (template) panic('Pure components can not have html');\n  if (css) panic('Pure components do not have css');\n  const component = defineDefaults(pureFactoryFunction({\n    slots,\n    attributes,\n    props\n  }), PURE_COMPONENT_API);\n  return createCoreAPIMethods(method => function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // intercept the mount calls to bind the DOM node to the pure object created\n    // see also https://github.com/riot/riot/issues/2806\n    if (method === MOUNT_METHOD_KEY) {\n      const [el] = args;\n      bindDOMNodeToComponentObject(el, component);\n    }\n\n    component[method](...args);\n    return component;\n  });\n}\n/**\n * Create the component interface needed for the @riotjs/dom-bindings tag bindings\n * @param   {string} options.css - component css\n * @param   {Function} options.template - functon that will return the dom-bindings template function\n * @param   {Object} options.exports - component interface\n * @param   {string} options.name - component name\n * @returns {Object} component like interface\n */\n\n\nfunction createComponent(_ref2) {\n  let {\n    css,\n    template,\n    exports,\n    name\n  } = _ref2;\n  const templateFn = template ? componentTemplateFactory(template, exports ? createSubcomponents(exports.components) : {}) : MOCKED_TEMPLATE_INTERFACE;\n  return (_ref3) => {\n    let {\n      slots,\n      attributes,\n      props\n    } = _ref3;\n    // pure components rendering will be managed by the end user\n    if (exports && exports[IS_PURE_SYMBOL]) return createPureComponent(exports, {\n      slots,\n      attributes,\n      props,\n      css,\n      template\n    });\n    const componentAPI = callOrAssign(exports) || {};\n    const component = defineComponent({\n      css,\n      template: templateFn,\n      componentAPI,\n      name\n    })({\n      slots,\n      attributes,\n      props\n    }); // notice that for the components create via tag binding\n    // we need to invert the mount (state/parentScope) arguments\n    // the template bindings will only forward the parentScope updates\n    // and never deal with the component state\n\n    return {\n      mount(element, parentScope, state) {\n        return component.mount(element, state, parentScope);\n      },\n\n      update(parentScope, state) {\n        return component.update(state, parentScope);\n      },\n\n      unmount(preserveRoot) {\n        return component.unmount(preserveRoot);\n      }\n\n    };\n  };\n}\n/**\n * Component definition function\n * @param   {Object} implementation - the componen implementation will be generated via compiler\n * @param   {Object} component - the component initial properties\n * @returns {Object} a new component implementation object\n */\n\nfunction defineComponent(_ref4) {\n  let {\n    css,\n    template,\n    componentAPI,\n    name\n  } = _ref4;\n  // add the component css into the DOM\n  if (css && name) cssManager.add(name, css);\n  return curry(enhanceComponentAPI)(defineProperties( // set the component defaults without overriding the original component API\n  defineDefaults(componentAPI, Object.assign({}, COMPONENT_LIFECYCLE_METHODS, {\n    [STATE_KEY]: {}\n  })), Object.assign({\n    // defined during the component creation\n    [SLOTS_KEY]: null,\n    [ROOT_KEY]: null\n  }, COMPONENT_CORE_HELPERS, {\n    name,\n    css,\n    template\n  })));\n}\n/**\n * Create the bindings to update the component attributes\n * @param   {HTMLElement} node - node where we will bind the expressions\n * @param   {Array} attributes - list of attribute bindings\n * @returns {TemplateChunk} - template bindings object\n */\n\nfunction createAttributeBindings(node, attributes) {\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  const expressions = attributes.map(a => create$2(node, a));\n  const binding = {};\n  return Object.assign(binding, Object.assign({\n    expressions\n  }, createCoreAPIMethods(method => scope => {\n    expressions.forEach(e => e[method](scope));\n    return binding;\n  })));\n}\n/**\n * Create the subcomponents that can be included inside a tag in runtime\n * @param   {Object} components - components imported in runtime\n * @returns {Object} all the components transformed into Riot.Component factory functions\n */\n\n\nfunction createSubcomponents(components) {\n  if (components === void 0) {\n    components = {};\n  }\n\n  return Object.entries(callOrAssign(components)).reduce((acc, _ref5) => {\n    let [key, value] = _ref5;\n    acc[camelToDashCase(key)] = createComponent(value);\n    return acc;\n  }, {});\n}\n/**\n * Run the component instance through all the plugins set by the user\n * @param   {Object} component - component instance\n * @returns {Object} the component enhanced by the plugins\n */\n\n\nfunction runPlugins(component) {\n  return [...PLUGINS_SET].reduce((c, fn) => fn(c) || c, component);\n}\n/**\n * Compute the component current state merging it with its previous state\n * @param   {Object} oldState - previous state object\n * @param   {Object} newState - new state givent to the `update` call\n * @returns {Object} new object state\n */\n\n\nfunction computeState(oldState, newState) {\n  return Object.assign({}, oldState, callOrAssign(newState));\n}\n/**\n * Add eventually the \"is\" attribute to link this DOM node to its css\n * @param {HTMLElement} element - target root node\n * @param {string} name - name of the component mounted\n * @returns {undefined} it's a void function\n */\n\n\nfunction addCssHook(element, name) {\n  if (getName(element) !== name) {\n    set(element, IS_DIRECTIVE, name);\n  }\n}\n/**\n * Component creation factory function that will enhance the user provided API\n * @param   {Object} component - a component implementation previously defined\n * @param   {Array} options.slots - component slots generated via riot compiler\n * @param   {Array} options.attributes - attribute expressions generated via riot compiler\n * @returns {Riot.Component} a riot component instance\n */\n\n\nfunction enhanceComponentAPI(component, _ref6) {\n  let {\n    slots,\n    attributes,\n    props\n  } = _ref6;\n  return autobindMethods(runPlugins(defineProperties(Object.create(component), {\n    mount(element, state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      this[ATTRIBUTES_KEY_SYMBOL] = createAttributeBindings(element, attributes).mount(parentScope);\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, evaluateInitialProps(element, props), evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions))));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[TEMPLATE_KEY_SYMBOL] = this.template.createDOM(element).clone(); // link this object to the DOM node\n\n      bindDOMNodeToComponentObject(element, this); // add eventually the 'is' attribute\n\n      component.name && addCssHook(element, component.name); // define the root element\n\n      defineProperty(this, ROOT_KEY, element); // define the slots array\n\n      defineProperty(this, SLOTS_KEY, slots); // before mount lifecycle event\n\n      this[ON_BEFORE_MOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[PARENT_KEY_SYMBOL] = parentScope; // mount the template\n\n      this[TEMPLATE_KEY_SYMBOL].mount(element, this, parentScope);\n      this[ON_MOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    update(state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      if (parentScope) {\n        this[PARENT_KEY_SYMBOL] = parentScope;\n        this[ATTRIBUTES_KEY_SYMBOL].update(parentScope);\n      }\n\n      const newProps = evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions);\n      if (this[SHOULD_UPDATE_KEY](newProps, this[PROPS_KEY]) === false) return;\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, this[PROPS_KEY], newProps)));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[ON_BEFORE_UPDATE_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[TEMPLATE_KEY_SYMBOL].update(this, this[PARENT_KEY_SYMBOL]);\n      this[ON_UPDATED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    unmount(preserveRoot) {\n      this[ON_BEFORE_UNMOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[ATTRIBUTES_KEY_SYMBOL].unmount(); // if the preserveRoot is null the template html will be left untouched\n      // in that case the DOM cleanup will happen differently from a parent node\n\n      this[TEMPLATE_KEY_SYMBOL].unmount(this, this[PARENT_KEY_SYMBOL], preserveRoot === null ? null : !preserveRoot);\n      this[ON_UNMOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    }\n\n  })), Object.keys(component).filter(prop => isFunction(component[prop])));\n}\n/**\n * Component initialization function starting from a DOM node\n * @param   {HTMLElement} element - element to upgrade\n * @param   {Object} initialProps - initial component properties\n * @param   {string} componentName - component id\n * @returns {Object} a new component instance bound to a DOM node\n */\n\nfunction mountComponent(element, initialProps, componentName) {\n  const name = componentName || getName(element);\n  if (!COMPONENTS_IMPLEMENTATION_MAP.has(name)) panic(`The component named \"${name}\" was never registered`);\n  const component = COMPONENTS_IMPLEMENTATION_MAP.get(name)({\n    props: initialProps\n  });\n  return component.mount(element);\n}\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst {\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY$1,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP$1,\n  PLUGINS_SET: PLUGINS_SET$1\n} = globals;\n/**\n * Riot public api\n */\n\n/**\n * Register a custom tag by name\n * @param   {string} name - component name\n * @param   {Object} implementation - tag implementation\n * @returns {Map} map containing all the components implementations\n */\n\nfunction register(name, _ref) {\n  let {\n    css,\n    template,\n    exports\n  } = _ref;\n  if (COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was already registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.set(name, createComponent({\n    name,\n    css,\n    template,\n    exports\n  }));\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Unregister a riot web component\n * @param   {string} name - component name\n * @returns {Map} map containing all the components implementations\n */\n\nfunction unregister(name) {\n  if (!COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was never registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.delete(name);\n  cssManager.remove(name);\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Mounting function that will work only for the components that were globally registered\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {Object} initialProps - the initial component properties\n * @param   {string} name - optional component name\n * @returns {Array} list of nodes upgraded\n */\n\nfunction mount(selector, initialProps, name) {\n  return $(selector).map(element => mountComponent(element, initialProps, name));\n}\n/**\n * Sweet unmounting helper function for the DOM node mounted manually by the user\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {boolean|null} keepRootElement - if true keep the root element\n * @returns {Array} list of nodes unmounted\n */\n\nfunction unmount(selector, keepRootElement) {\n  return $(selector).map(element => {\n    if (element[DOM_COMPONENT_INSTANCE_PROPERTY$1]) {\n      element[DOM_COMPONENT_INSTANCE_PROPERTY$1].unmount(keepRootElement);\n    }\n\n    return element;\n  });\n}\n/**\n * Define a riot plugin\n * @param   {Function} plugin - function that will receive all the components created\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction install(plugin) {\n  if (!isFunction(plugin)) panic('Plugins must be of type function');\n  if (PLUGINS_SET$1.has(plugin)) panic('This plugin was already installed');\n  PLUGINS_SET$1.add(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Uninstall a riot plugin\n * @param   {Function} plugin - plugin previously installed\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction uninstall(plugin) {\n  if (!PLUGINS_SET$1.has(plugin)) panic('This plugin was never installed');\n  PLUGINS_SET$1.delete(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Helper method to create component without relying on the registered ones\n * @param   {Object} implementation - component implementation\n * @returns {Function} function that will allow you to mount a riot component on a DOM node\n */\n\nfunction component(implementation) {\n  return function (el, props, _temp) {\n    let {\n      slots,\n      attributes,\n      parentScope\n    } = _temp === void 0 ? {} : _temp;\n    return compose(c => c.mount(el, parentScope), c => c({\n      props,\n      slots,\n      attributes\n    }), createComponent)(implementation);\n  };\n}\n/**\n * Lift a riot component Interface into a pure riot object\n * @param   {Function} func - RiotPureComponent factory function\n * @returns {Function} the lifted original function received as argument\n */\n\nfunction pure(func) {\n  if (!isFunction(func)) panic('riot.pure accepts only arguments of type \"function\"');\n  func[IS_PURE_SYMBOL] = true;\n  return func;\n}\n/** @type {string} current riot version */\n\nconst version = 'v4.13.4'; // expose some internal stuff that might be used from external tools\n\nconst __ = {\n  cssManager,\n  DOMBindings,\n  createComponent,\n  defineComponent,\n  globals\n};\n\nexport { __, component, install, mount, pure, register, uninstall, unmount, unregister, version };\n","import App from './Book.riot'\nimport {component} from 'riot'\n\ncomponent(App)(document.querySelector('#root'), {\n  message: 'Hello there'\n})","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","\n            module.exports = function( bundle ) {\n                function __initialize( __wasm_module, __load_asynchronously ) {\n    return (function( module_factory ) {\n        var instance = module_factory();\n        if( __load_asynchronously ) {\n            return WebAssembly.instantiate( __wasm_module, instance.imports )\n                .then( function( wasm_instance ) {\n                    var exports = instance.initialize( wasm_instance );\n                    console.log( \"Finished loading Rust wasm module 'riot_rs_wasm'\" );\n                    return exports;\n                })\n                .catch( function( error ) {\n                    console.log( \"Error loading Rust wasm module 'riot_rs_wasm':\", error );\n                    throw error;\n                });\n        } else {\n            var instance = new WebAssembly.Instance( __wasm_module, instance.imports );\n            return instance.initialize( wasm_instance );\n        }\n    }( function() {\n    var Module = {};\n\n    Module.STDWEB_PRIVATE = {};\n\n// This is based on code from Emscripten's preamble.js.\nModule.STDWEB_PRIVATE.to_utf8 = function to_utf8( str, addr ) {\n    var HEAPU8 = Module.HEAPU8;\n    for( var i = 0; i < str.length; ++i ) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description and https://www.ietf.org/rfc/rfc2279.txt and https://tools.ietf.org/html/rfc3629\n        var u = str.charCodeAt( i ); // possibly a lead surrogate\n        if( u >= 0xD800 && u <= 0xDFFF ) {\n            u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt( ++i ) & 0x3FF);\n        }\n\n        if( u <= 0x7F ) {\n            HEAPU8[ addr++ ] = u;\n        } else if( u <= 0x7FF ) {\n            HEAPU8[ addr++ ] = 0xC0 | (u >> 6);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0xFFFF ) {\n            HEAPU8[ addr++ ] = 0xE0 | (u >> 12);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0x1FFFFF ) {\n            HEAPU8[ addr++ ] = 0xF0 | (u >> 18);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0x3FFFFFF ) {\n            HEAPU8[ addr++ ] = 0xF8 | (u >> 24);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 18) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else {\n            HEAPU8[ addr++ ] = 0xFC | (u >> 30);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 24) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 18) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        }\n    }\n};\n\nModule.STDWEB_PRIVATE.noop = function() {};\nModule.STDWEB_PRIVATE.to_js = function to_js( address ) {\n    var kind = Module.HEAPU8[ address + 12 ];\n    if( kind === 0 ) {\n        return undefined;\n    } else if( kind === 1 ) {\n        return null;\n    } else if( kind === 2 ) {\n        return Module.HEAP32[ address / 4 ];\n    } else if( kind === 3 ) {\n        return Module.HEAPF64[ address / 8 ];\n    } else if( kind === 4 ) {\n        var pointer = Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        return Module.STDWEB_PRIVATE.to_js_string( pointer, length );\n    } else if( kind === 5 ) {\n        return false;\n    } else if( kind === 6 ) {\n        return true;\n    } else if( kind === 7 ) {\n        var pointer = Module.STDWEB_PRIVATE.arena + Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var output = [];\n        for( var i = 0; i < length; ++i ) {\n            output.push( Module.STDWEB_PRIVATE.to_js( pointer + i * 16 ) );\n        }\n        return output;\n    } else if( kind === 8 ) {\n        var arena = Module.STDWEB_PRIVATE.arena;\n        var value_array_pointer = arena + Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var key_array_pointer = arena + Module.HEAPU32[ (address + 8) / 4 ];\n        var output = {};\n        for( var i = 0; i < length; ++i ) {\n            var key_pointer = Module.HEAPU32[ (key_array_pointer + i * 8) / 4 ];\n            var key_length = Module.HEAPU32[ (key_array_pointer + 4 + i * 8) / 4 ];\n            var key = Module.STDWEB_PRIVATE.to_js_string( key_pointer, key_length );\n            var value = Module.STDWEB_PRIVATE.to_js( value_array_pointer + i * 16 );\n            output[ key ] = value;\n        }\n        return output;\n    } else if( kind === 9 ) {\n        return Module.STDWEB_PRIVATE.acquire_js_reference( Module.HEAP32[ address / 4 ] );\n    } else if( kind === 10 || kind === 12 || kind === 13 ) {\n        var adapter_pointer = Module.HEAPU32[ address / 4 ];\n        var pointer = Module.HEAPU32[ (address + 4) / 4 ];\n        var deallocator_pointer = Module.HEAPU32[ (address + 8) / 4 ];\n        var num_ongoing_calls = 0;\n        var drop_queued = false;\n        var output = function() {\n            if( pointer === 0 || drop_queued === true ) {\n                if (kind === 10) {\n                    throw new ReferenceError( \"Already dropped Rust function called!\" );\n                } else if (kind === 12) {\n                    throw new ReferenceError( \"Already dropped FnMut function called!\" );\n                } else {\n                    throw new ReferenceError( \"Already called or dropped FnOnce function called!\" );\n                }\n            }\n\n            var function_pointer = pointer;\n            if (kind === 13) {\n                output.drop = Module.STDWEB_PRIVATE.noop;\n                pointer = 0;\n            }\n\n            if (num_ongoing_calls !== 0) {\n                if (kind === 12 || kind === 13) {\n                    throw new ReferenceError( \"FnMut function called multiple times concurrently!\" );\n                }\n            }\n\n            var args = Module.STDWEB_PRIVATE.alloc( 16 );\n            Module.STDWEB_PRIVATE.serialize_array( args, arguments );\n\n            try {\n                num_ongoing_calls += 1;\n                Module.STDWEB_PRIVATE.dyncall( \"vii\", adapter_pointer, [function_pointer, args] );\n                var result = Module.STDWEB_PRIVATE.tmp;\n                Module.STDWEB_PRIVATE.tmp = null;\n            } finally {\n                num_ongoing_calls -= 1;\n            }\n\n            if( drop_queued === true && num_ongoing_calls === 0 ) {\n                output.drop();\n            }\n\n            return result;\n        };\n\n        output.drop = function() {\n            if (num_ongoing_calls !== 0) {\n                drop_queued = true;\n                return;\n            }\n\n            output.drop = Module.STDWEB_PRIVATE.noop;\n            var function_pointer = pointer;\n            pointer = 0;\n\n            if (function_pointer != 0) {\n                Module.STDWEB_PRIVATE.dyncall( \"vi\", deallocator_pointer, [function_pointer] );\n            }\n        };\n\n        return output;\n    } else if( kind === 14 ) {\n        var pointer = Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var array_kind = Module.HEAPU32[ (address + 8) / 4 ];\n        var pointer_end = pointer + length;\n\n        switch( array_kind ) {\n            case 0:\n                return Module.HEAPU8.subarray( pointer, pointer_end );\n            case 1:\n                return Module.HEAP8.subarray( pointer, pointer_end );\n            case 2:\n                return Module.HEAPU16.subarray( pointer, pointer_end );\n            case 3:\n                return Module.HEAP16.subarray( pointer, pointer_end );\n            case 4:\n                return Module.HEAPU32.subarray( pointer, pointer_end );\n            case 5:\n                return Module.HEAP32.subarray( pointer, pointer_end );\n            case 6:\n                return Module.HEAPF32.subarray( pointer, pointer_end );\n            case 7:\n                return Module.HEAPF64.subarray( pointer, pointer_end );\n        }\n    } else if( kind === 15 ) {\n        return Module.STDWEB_PRIVATE.get_raw_value( Module.HEAPU32[ address / 4 ] );\n    }\n};\n\nModule.STDWEB_PRIVATE.serialize_object = function serialize_object( address, value ) {\n    var keys = Object.keys( value );\n    var length = keys.length;\n    var key_array_pointer = Module.STDWEB_PRIVATE.alloc( length * 8 );\n    var value_array_pointer = Module.STDWEB_PRIVATE.alloc( length * 16 );\n    Module.HEAPU8[ address + 12 ] = 8;\n    Module.HEAPU32[ address / 4 ] = value_array_pointer;\n    Module.HEAPU32[ (address + 4) / 4 ] = length;\n    Module.HEAPU32[ (address + 8) / 4 ] = key_array_pointer;\n    for( var i = 0; i < length; ++i ) {\n        var key = keys[ i ];\n        var key_address = key_array_pointer + i * 8;\n        Module.STDWEB_PRIVATE.to_utf8_string( key_address, key );\n\n        Module.STDWEB_PRIVATE.from_js( value_array_pointer + i * 16, value[ key ] );\n    }\n};\n\nModule.STDWEB_PRIVATE.serialize_array = function serialize_array( address, value ) {\n    var length = value.length;\n    var pointer = Module.STDWEB_PRIVATE.alloc( length * 16 );\n    Module.HEAPU8[ address + 12 ] = 7;\n    Module.HEAPU32[ address / 4 ] = pointer;\n    Module.HEAPU32[ (address + 4) / 4 ] = length;\n    for( var i = 0; i < length; ++i ) {\n        Module.STDWEB_PRIVATE.from_js( pointer + i * 16, value[ i ] );\n    }\n};\n\n// New browsers and recent Node\nvar cachedEncoder = ( typeof TextEncoder === \"function\"\n    ? new TextEncoder( \"utf-8\" )\n    // Old Node (before v11)\n    : ( typeof util === \"object\" && util && typeof util.TextEncoder === \"function\"\n        ? new util.TextEncoder( \"utf-8\" )\n        // Old browsers\n        : null ) );\n\nif ( cachedEncoder != null ) {\n    Module.STDWEB_PRIVATE.to_utf8_string = function to_utf8_string( address, value ) {\n        var buffer = cachedEncoder.encode( value );\n        var length = buffer.length;\n        var pointer = 0;\n\n        if ( length > 0 ) {\n            pointer = Module.STDWEB_PRIVATE.alloc( length );\n            Module.HEAPU8.set( buffer, pointer );\n        }\n\n        Module.HEAPU32[ address / 4 ] = pointer;\n        Module.HEAPU32[ (address + 4) / 4 ] = length;\n    };\n\n} else {\n    Module.STDWEB_PRIVATE.to_utf8_string = function to_utf8_string( address, value ) {\n        var length = Module.STDWEB_PRIVATE.utf8_len( value );\n        var pointer = 0;\n\n        if ( length > 0 ) {\n            pointer = Module.STDWEB_PRIVATE.alloc( length );\n            Module.STDWEB_PRIVATE.to_utf8( value, pointer );\n        }\n\n        Module.HEAPU32[ address / 4 ] = pointer;\n        Module.HEAPU32[ (address + 4) / 4 ] = length;\n    };\n}\n\nModule.STDWEB_PRIVATE.from_js = function from_js( address, value ) {\n    var kind = Object.prototype.toString.call( value );\n    if( kind === \"[object String]\" ) {\n        Module.HEAPU8[ address + 12 ] = 4;\n        Module.STDWEB_PRIVATE.to_utf8_string( address, value );\n    } else if( kind === \"[object Number]\" ) {\n        if( value === (value|0) ) {\n            Module.HEAPU8[ address + 12 ] = 2;\n            Module.HEAP32[ address / 4 ] = value;\n        } else {\n            Module.HEAPU8[ address + 12 ] = 3;\n            Module.HEAPF64[ address / 8 ] = value;\n        }\n    } else if( value === null ) {\n        Module.HEAPU8[ address + 12 ] = 1;\n    } else if( value === undefined ) {\n        Module.HEAPU8[ address + 12 ] = 0;\n    } else if( value === false ) {\n        Module.HEAPU8[ address + 12 ] = 5;\n    } else if( value === true ) {\n        Module.HEAPU8[ address + 12 ] = 6;\n    } else if( kind === \"[object Symbol]\" ) {\n        var id = Module.STDWEB_PRIVATE.register_raw_value( value );\n        Module.HEAPU8[ address + 12 ] = 15;\n        Module.HEAP32[ address / 4 ] = id;\n    } else {\n        var refid = Module.STDWEB_PRIVATE.acquire_rust_reference( value );\n        Module.HEAPU8[ address + 12 ] = 9;\n        Module.HEAP32[ address / 4 ] = refid;\n    }\n};\n\n// New browsers and recent Node\nvar cachedDecoder = ( typeof TextDecoder === \"function\"\n    ? new TextDecoder( \"utf-8\" )\n    // Old Node (before v11)\n    : ( typeof util === \"object\" && util && typeof util.TextDecoder === \"function\"\n        ? new util.TextDecoder( \"utf-8\" )\n        // Old browsers\n        : null ) );\n\nif ( cachedDecoder != null ) {\n    Module.STDWEB_PRIVATE.to_js_string = function to_js_string( index, length ) {\n        return cachedDecoder.decode( Module.HEAPU8.subarray( index, index + length ) );\n    };\n\n} else {\n    // This is ported from Rust's stdlib; it's faster than\n    // the string conversion from Emscripten.\n    Module.STDWEB_PRIVATE.to_js_string = function to_js_string( index, length ) {\n        var HEAPU8 = Module.HEAPU8;\n        index = index|0;\n        length = length|0;\n        var end = (index|0) + (length|0);\n        var output = \"\";\n        while( index < end ) {\n            var x = HEAPU8[ index++ ];\n            if( x < 128 ) {\n                output += String.fromCharCode( x );\n                continue;\n            }\n            var init = (x & (0x7F >> 2));\n            var y = 0;\n            if( index < end ) {\n                y = HEAPU8[ index++ ];\n            }\n            var ch = (init << 6) | (y & 63);\n            if( x >= 0xE0 ) {\n                var z = 0;\n                if( index < end ) {\n                    z = HEAPU8[ index++ ];\n                }\n                var y_z = ((y & 63) << 6) | (z & 63);\n                ch = init << 12 | y_z;\n                if( x >= 0xF0 ) {\n                    var w = 0;\n                    if( index < end ) {\n                        w = HEAPU8[ index++ ];\n                    }\n                    ch = (init & 7) << 18 | ((y_z << 6) | (w & 63));\n\n                    output += String.fromCharCode( 0xD7C0 + (ch >> 10) );\n                    ch = 0xDC00 + (ch & 0x3FF);\n                }\n            }\n            output += String.fromCharCode( ch );\n            continue;\n        }\n        return output;\n    };\n}\n\nModule.STDWEB_PRIVATE.id_to_ref_map = {};\nModule.STDWEB_PRIVATE.id_to_refcount_map = {};\nModule.STDWEB_PRIVATE.ref_to_id_map = new WeakMap();\n// Not all types can be stored in a WeakMap\nModule.STDWEB_PRIVATE.ref_to_id_map_fallback = new Map();\nModule.STDWEB_PRIVATE.last_refid = 1;\n\nModule.STDWEB_PRIVATE.id_to_raw_value_map = {};\nModule.STDWEB_PRIVATE.last_raw_value_id = 1;\n\nModule.STDWEB_PRIVATE.acquire_rust_reference = function( reference ) {\n    if( reference === undefined || reference === null ) {\n        return 0;\n    }\n\n    var id_to_refcount_map = Module.STDWEB_PRIVATE.id_to_refcount_map;\n    var id_to_ref_map = Module.STDWEB_PRIVATE.id_to_ref_map;\n    var ref_to_id_map = Module.STDWEB_PRIVATE.ref_to_id_map;\n    var ref_to_id_map_fallback = Module.STDWEB_PRIVATE.ref_to_id_map_fallback;\n\n    var refid = ref_to_id_map.get( reference );\n    if( refid === undefined ) {\n        refid = ref_to_id_map_fallback.get( reference );\n    }\n    if( refid === undefined ) {\n        refid = Module.STDWEB_PRIVATE.last_refid++;\n        try {\n            ref_to_id_map.set( reference, refid );\n        } catch (e) {\n            ref_to_id_map_fallback.set( reference, refid );\n        }\n    }\n\n    if( refid in id_to_ref_map ) {\n        id_to_refcount_map[ refid ]++;\n    } else {\n        id_to_ref_map[ refid ] = reference;\n        id_to_refcount_map[ refid ] = 1;\n    }\n\n    return refid;\n};\n\nModule.STDWEB_PRIVATE.acquire_js_reference = function( refid ) {\n    return Module.STDWEB_PRIVATE.id_to_ref_map[ refid ];\n};\n\nModule.STDWEB_PRIVATE.increment_refcount = function( refid ) {\n    Module.STDWEB_PRIVATE.id_to_refcount_map[ refid ]++;\n};\n\nModule.STDWEB_PRIVATE.decrement_refcount = function( refid ) {\n    var id_to_refcount_map = Module.STDWEB_PRIVATE.id_to_refcount_map;\n    if( 0 == --id_to_refcount_map[ refid ] ) {\n        var id_to_ref_map = Module.STDWEB_PRIVATE.id_to_ref_map;\n        var ref_to_id_map_fallback = Module.STDWEB_PRIVATE.ref_to_id_map_fallback;\n        var reference = id_to_ref_map[ refid ];\n        delete id_to_ref_map[ refid ];\n        delete id_to_refcount_map[ refid ];\n        ref_to_id_map_fallback.delete(reference);\n    }\n};\n\nModule.STDWEB_PRIVATE.register_raw_value = function( value ) {\n    var id = Module.STDWEB_PRIVATE.last_raw_value_id++;\n    Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ] = value;\n    return id;\n};\n\nModule.STDWEB_PRIVATE.unregister_raw_value = function( id ) {\n    delete Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ];\n};\n\nModule.STDWEB_PRIVATE.get_raw_value = function( id ) {\n    return Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ];\n};\n\nModule.STDWEB_PRIVATE.alloc = function alloc( size ) {\n    return Module.web_malloc( size );\n};\n\nModule.STDWEB_PRIVATE.dyncall = function( signature, ptr, args ) {\n    return Module.web_table.get( ptr ).apply( null, args );\n};\n\n// This is based on code from Emscripten's preamble.js.\nModule.STDWEB_PRIVATE.utf8_len = function utf8_len( str ) {\n    var len = 0;\n    for( var i = 0; i < str.length; ++i ) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var u = str.charCodeAt( i ); // possibly a lead surrogate\n        if( u >= 0xD800 && u <= 0xDFFF ) {\n            u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt( ++i ) & 0x3FF);\n        }\n\n        if( u <= 0x7F ) {\n            ++len;\n        } else if( u <= 0x7FF ) {\n            len += 2;\n        } else if( u <= 0xFFFF ) {\n            len += 3;\n        } else if( u <= 0x1FFFFF ) {\n            len += 4;\n        } else if( u <= 0x3FFFFFF ) {\n            len += 5;\n        } else {\n            len += 6;\n        }\n    }\n    return len;\n};\n\nModule.STDWEB_PRIVATE.prepare_any_arg = function( value ) {\n    var arg = Module.STDWEB_PRIVATE.alloc( 16 );\n    Module.STDWEB_PRIVATE.from_js( arg, value );\n    return arg;\n};\n\nModule.STDWEB_PRIVATE.acquire_tmp = function( dummy ) {\n    var value = Module.STDWEB_PRIVATE.tmp;\n    Module.STDWEB_PRIVATE.tmp = null;\n    return value;\n};\n\n\n\n    var HEAP8 = null;\n    var HEAP16 = null;\n    var HEAP32 = null;\n    var HEAPU8 = null;\n    var HEAPU16 = null;\n    var HEAPU32 = null;\n    var HEAPF32 = null;\n    var HEAPF64 = null;\n\n    Object.defineProperty( Module, 'exports', { value: {} } );\n\n    function __web_on_grow() {\n        var buffer = Module.instance.exports.memory.buffer;\n        HEAP8 = new Int8Array( buffer );\n        HEAP16 = new Int16Array( buffer );\n        HEAP32 = new Int32Array( buffer );\n        HEAPU8 = new Uint8Array( buffer );\n        HEAPU16 = new Uint16Array( buffer );\n        HEAPU32 = new Uint32Array( buffer );\n        HEAPF32 = new Float32Array( buffer );\n        HEAPF64 = new Float64Array( buffer );\n        Module.HEAP8 = HEAP8;\n        Module.HEAP16 = HEAP16;\n        Module.HEAP32 = HEAP32;\n        Module.HEAPU8 = HEAPU8;\n        Module.HEAPU16 = HEAPU16;\n        Module.HEAPU32 = HEAPU32;\n        Module.HEAPF32 = HEAPF32;\n        Module.HEAPF64 = HEAPF64;\n    }\n\n    return {\n        imports: {\n            env: {\n                \"__cargo_web_snippet_14097f70c739ef4a180a6ad82cadc458d11e85dc\": function($0) {\n                $0 = Module.STDWEB_PRIVATE.to_js($0);alert(($0));\n            },\n            \"__cargo_web_snippet_285aac3fba72d67cb459d37d4d21aa4fb62598ba\": function($0) {\n                Module.STDWEB_PRIVATE.arena = $0;\n            },\n            \"__cargo_web_snippet_4d66721dd755374fa177d86d1c818bf74cc0be84\": function($0, $1) {\n                $1 = Module.STDWEB_PRIVATE.to_js($1);Module.STDWEB_PRIVATE.from_js($0, (function(){return($1);})());\n            },\n            \"__cargo_web_snippet_515598dacc2aae3ba84e7207f3f75bd28fcbbd15\": function($0) {\n                var o = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );return (o instanceof Object);\n            },\n            \"__cargo_web_snippet_5c3091ae7fa9c42123eec37f64de99a5808e7ef2\": function($0) {\n                var o = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );return (o instanceof Array);\n            },\n            \"__cargo_web_snippet_80d6d56760c65e49b7be8b6b01c1ea861b046bf0\": function($0) {\n                Module.STDWEB_PRIVATE.decrement_refcount( $0 );\n            },\n            \"__cargo_web_snippet_8c32019649bb581b1b742eeedfc410e2bedd56a6\": function($0, $1) {\n                var array = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );Module.STDWEB_PRIVATE.serialize_array( $1, array );\n            },\n            \"__cargo_web_snippet_e9638d6405ab65f78daf4a5af9c9de14ecf1e2ec\": function($0) {\n                $0 = Module.STDWEB_PRIVATE.to_js($0);Module.STDWEB_PRIVATE.unregister_raw_value(($0));\n            },\n            \"__cargo_web_snippet_f814fda503cb20016f78481f85431d48a7c4e731\": function($0, $1) {\n                var object = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );Module.STDWEB_PRIVATE.serialize_object( $1, object );\n            },\n            \"__cargo_web_snippet_ff5103e6cc179d13b4c7a785bdce2708fd559fc0\": function($0) {\n                Module.STDWEB_PRIVATE.tmp = Module.STDWEB_PRIVATE.to_js( $0 );\n            },\n                \"__web_on_grow\": __web_on_grow\n            }\n        },\n        initialize: function( instance ) {\n            Object.defineProperty( Module, 'instance', { value: instance } );\n            Object.defineProperty( Module, 'web_malloc', { value: Module.instance.exports.__web_malloc } );\n            Object.defineProperty( Module, 'web_free', { value: Module.instance.exports.__web_free } );\n            Object.defineProperty( Module, 'web_table', { value: Module.instance.exports.__indirect_function_table } );\n\n            Module.exports.call = function call() {\n    Module.instance.exports.call();\n}\n;\n                Module.exports.books_state = function books_state() {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.books_state());\n}\n;\n                Module.exports.books_dispatch = function books_dispatch(state, action) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.books_dispatch(Module.STDWEB_PRIVATE.prepare_any_arg(state), Module.STDWEB_PRIVATE.prepare_any_arg(action)));\n}\n;\n                Module.exports.store_state = function store_state() {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.store_state());\n}\n;\n                Module.exports.store_dispatch = function store_dispatch(state, action) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.store_dispatch(Module.STDWEB_PRIVATE.prepare_any_arg(state), Module.STDWEB_PRIVATE.prepare_any_arg(action)));\n}\n;\n            __web_on_grow();\n            \n\n            return Module.exports;\n        }\n    };\n}\n ));\n}\n\n                return fetch( bundle )\n                    .then( response => response.arrayBuffer() )\n                    .then( bytes => WebAssembly.compile( bytes ) )\n                    .then( mod => __initialize( mod, true ) );\n            };\n        ","\n                            module.exports = function( bundle ) {\n                                var loader = require( \"./loader-d20feded5cd4b4e8741163e1095849df.js\" );\n                                return loader( bundle );\n                            };\n                        "]}