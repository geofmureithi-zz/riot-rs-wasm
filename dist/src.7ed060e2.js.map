{"version":3,"sources":["../src/App.riot","../node_modules/riot/riot.esm.js","../src/index.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","../.cache/.cargo-web/loader-be7369a0583e756f576c1b722e6d7668.js","../.cache/.cargo-web/bundle-loader-be7369a0583e756f576c1b722e6d7668.js"],"names":["add","update","state","arguments","increment","decrement","onMounted","template","expressionTypes","bindingTypes","getComponent","TEXT","scope","counter","EVENT","camelToDashCase","string","replace","toLowerCase","dashToCamelCase","_","c","toUpperCase","DOMattributesToObject","element","Array","from","attributes","reduce","acc","attribute","name","value","moveChildren","source","target","firstChild","appendChild","cleanNode","node","clearChildren","childNodes","children","forEach","removeNode","parentNode","remove","removeChild","EACH","IF","SIMPLE","TAG","SLOT","ATTRIBUTE","VALUE","createTemplateMeta","componentTemplate","fragment","dom","cloneNode","avoidDOMInjection","indexOf","slice","append","get","parent","start","end","before","isSelect","noSelection","child","insertBefore","selected","selectedIndex","call","querySelectorAll","eqeq","a","b","identity","O","indexOf$1","moreNodes","moreStart","moreEnd","lessNodes","lessStart","lessEnd","compare","length","m","l","isReversed","futureNodes","futureEnd","currentNodes","currentStart","currentEnd","next","list","i","nextSibling","drop","DELETION","INSERTION","SKIP","SKIP_OND","HS","futureStart","futureChanges","currentChanges","k","minLen","link","tresh","nodes","index","idxInOld","findK","newi","oldi","prev","diff","ptr","OND","rows","cols","v","d","r","pv","cv","pd","outer","diffIdx","applyDiff","currentLength","live","currentIndex","push","ktr","j","lo","hi","mid","smartDiff","dropChild","domdiff","options","currentSame","futureSame","checkType","type","isSvg","el","owner","ownerSVGElement","isTemplate","isNil","content","isFunction","isBoolean","isObject","undefined","UNMOUNT_SCOPE","Symbol","EachBinding","Object","seal","mount","parentScope","placeholder","childrenMap","collection","evaluate","items","createPatch","newChildrenMap","batches","patch","values","fn","unmount","redundant","item","info","pop","context","mustFilterItem","condition","Boolean","extendScope","_ref","itemName","indexName","binding","getKey","root","isTemplateTag","Map","create","key","oldItem","clone","mustMount","meta","delete","set","_ref2","document","createTextNode","assign","createDOM","IfBinding","mustUnmount","pristine","create$1","panic","message","Error","memoize","cache","cached","val","has","evaluateAttributeExpressions","REMOVE_ATTRIBUTE","SET_ATTIBUTE","ElementProto","Element","prototype","isNativeHtmlProperty","hasOwnProperty","setAllAttributes","entries","attributeExpression","removeAllAttributes","newAttributes","oldAttributes","newKeys","keys","filter","includes","removeAttribute","oldValue","getMethod","normalizeValue","RE_EVENTS_PREFIX","getCallbackAndOptions","isArray","EventListener","handleEvent","event","ListenersWeakMap","WeakMap","createListener","listener","eventExpression","normalizedEventName","eventListener","callback","handler","mustRemoveEvent","mustAddEvent","removeEventListener","addEventListener","normalizeStringValue","getTextNode","childNodeIndex","nodeType","Node","COMMENT_NODE","textNode","replaceChild","textExpression","data","valueExpression","expression","expressions","Expression","apply","create$2","flattenCollectionMethods","methods","method","map","create$3","COMPONENTS_IMPLEMENTATION_MAP","DOM_COMPONENT_INSTANCE_PROPERTY","PLUGINS_SET","Set","IS_DIRECTIVE","VALUE_ATTRIBUTE","MOUNT_METHOD_KEY","UPDATE_METHOD_KEY","UNMOUNT_METHOD_KEY","SHOULD_UPDATE_KEY","ON_BEFORE_MOUNT_KEY","ON_MOUNTED_KEY","ON_BEFORE_UPDATE_KEY","ON_UPDATED_KEY","ON_BEFORE_UNMOUNT_KEY","ON_UNMOUNTED_KEY","PROPS_KEY","STATE_KEY","SLOTS_KEY","ROOT_KEY","IS_PURE_SYMBOL","for","PARENT_KEY_SYMBOL","ATTRIBUTES_KEY_SYMBOL","TEMPLATE_KEY_SYMBOL","globals","freeze","__proto__","extendParentScope","attr","getRealParent","SlotBinding","getTemplateScope","templateData","slots","find","id","realParent","create$6","html","bindings","moveSlotInnerContent","mustRemoveRoot","slot","createSlot","getTag","component","slotsToMarkup","slotBindings","concat","TagBinding","tag","keepRootTag","create$4","fixTextExpressionsOffset","textExpressionsOffset","e","create$5","templateTagOffset","selector","redundantAttribute","querySelector","bindingExpressions","createHTMLTree","createElement","innerHTML","createSVGTree","container","svgNode","ownerDocument","importNode","window","DOMParser","parseFromString","documentElement","createDOMTree","injectDOM","createTemplateDOM","TemplateChunk","Math","max","bindingsData","DOMBindings","createBinding","createExpression","noop","autobindMethods","bind","callOrAssign","constructor","defineProperty","enumerable","writable","configurable","defineProperties","properties","defineDefaults","defaults","domToArray","els","test","toString","$","ctx","normalize","parseNodes","names","n","attrs","props","prop","setAttribute","CSS_BY_NAME","STYLE_NODE_SELECTOR","getStyleNode","style","head","cssManager","css","inject","join","curry","_len","_key","_len2","args","_key2","getName","tagName","COMPONENT_CORE_HELPERS","$$","PURE_COMPONENT_API","COMPONENT_LIFECYCLE_METHODS","MOCKED_TEMPLATE_INTERFACE","evaluateInitialProps","initialProps","bindDOMNodeToComponentObject","createCoreAPIMethods","mapFunction","componentTemplateFactory","components","createPureComponent","pureFactoryFunction","createComponent","exports","templateFn","createSubcomponents","_ref3","componentAPI","defineComponent","preserveRoot","_ref4","enhanceComponentAPI","createAttributeBindings","_ref5","runPlugins","computeState","oldState","newState","addCssHook","_ref6","newProps","mountComponent","componentName","compose","fns","f","g","DOM_COMPONENT_INSTANCE_PROPERTY$1","COMPONENTS_IMPLEMENTATION_MAP$1","PLUGINS_SET$1","register","unregister","keepRootElement","install","plugin","uninstall","implementation","_temp","pure","func","version","__","App","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","stack","overlay","createErrorOverlay","body","getElementById","stackTrace","innerText","getParents","modules","parents","dep","Function","deps","some","cb","bundleURL","getBundleURLCached","getBundleURL","err","matches","match","getBaseURL","url","require","loadBundlesLazy","bundles","Promise","resolve","code","LazyPromise","reject","loadBundles","then","all","loadBundle","bundleLoaders","registerBundleLoader","loader","load","substring","lastIndexOf","bundleLoader","resolved","catch","executor","promise","onSuccess","onError","__initialize","__wasm_module","__load_asynchronously","module_factory","instance","WebAssembly","instantiate","imports","wasm_instance","initialize","Instance","STDWEB_PRIVATE","to_utf8","str","addr","HEAPU8","u","charCodeAt","to_js","address","kind","HEAP32","HEAPF64","pointer","HEAPU32","to_js_string","arena","output","value_array_pointer","key_array_pointer","key_pointer","key_length","acquire_js_reference","adapter_pointer","deallocator_pointer","num_ongoing_calls","drop_queued","ReferenceError","function_pointer","alloc","serialize_array","dyncall","result","tmp","array_kind","pointer_end","subarray","HEAP8","HEAPU16","HEAP16","HEAPF32","get_raw_value","serialize_object","key_address","to_utf8_string","from_js","cachedEncoder","TextEncoder","util","buffer","encode","utf8_len","register_raw_value","refid","acquire_rust_reference","cachedDecoder","TextDecoder","decode","x","String","fromCharCode","init","y","ch","z","y_z","w","id_to_ref_map","id_to_refcount_map","ref_to_id_map","ref_to_id_map_fallback","last_refid","id_to_raw_value_map","last_raw_value_id","reference","increment_refcount","decrement_refcount","unregister_raw_value","size","web_malloc","signature","web_table","len","prepare_any_arg","arg","acquire_tmp","dummy","__web_on_grow","memory","Int8Array","Int16Array","Int32Array","Uint8Array","Uint16Array","Uint32Array","Float32Array","Float64Array","env","$0","$1","o","array","object","__web_malloc","__web_free","__indirect_function_table","fetch","response","arrayBuffer","bytes","compile","mod"],"mappings":"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","file":"src.7ed060e2.js","sourceRoot":"../public","sourcesContent":["import { add, state, increment, decrement} from '../rustess/Cargo.toml'\n\nexport default {\n  'css': null,\n\n  'exports': {\n    add(){\n        this.update(add(this.state, ...arguments))\n    },\n\n    increment(){\n        this.update(increment(this.state,...arguments))\n    },\n\n    decrement(){\n        this.update(decrement(this.state,...arguments))\n    },\n\n    onMounted(){\n        this.update(state())\n    }\n  },\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template(\n      '<p expr16=\"expr16\"> </p><button expr17=\"expr17\">Add 2</button><button expr18=\"expr18\">Add +</button><button expr19=\"expr19\">Subtract -</button>',\n      [{\n        'redundantAttribute': 'expr16',\n        'selector': '[expr16]',\n\n        'expressions': [{\n          'type': expressionTypes.TEXT,\n          'childNodeIndex': 0,\n\n          'evaluate': function(scope) {\n            return scope.state.counter;\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr17',\n        'selector': '[expr17]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return () => scope.add(2);\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr18',\n        'selector': '[expr18]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return scope.increment;\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr19',\n        'selector': '[expr19]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return scope.decrement;\n          }\n        }]\n      }]\n    );\n  },\n\n  'name': 'app'\n};","/* Riot v4.13.4, @license MIT */\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\nfunction camelToDashCase(string) {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n\n/**\n * Get all the element attributes as object\n * @param   {HTMLElement} element - DOM node we want to parse\n * @returns {Object} all the attributes found as a key value pairs\n */\n\nfunction DOMattributesToObject(element) {\n  return Array.from(element.attributes).reduce((acc, attribute) => {\n    acc[dashToCamelCase(attribute.name)] = attribute.value;\n    return acc;\n  }, {});\n}\n/**\n * Move all the child nodes from a source tag to another\n * @param   {HTMLElement} source - source node\n * @param   {HTMLElement} target - target node\n * @returns {undefined} it's a void method ¯\\_(ツ)_/¯\n */\n// Ignore this helper because it's needed only for svg tags\n\nfunction moveChildren(source, target) {\n  if (source.firstChild) {\n    target.appendChild(source.firstChild);\n    moveChildren(source, target);\n  }\n}\n/**\n * Remove the child nodes from any DOM node\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction cleanNode(node) {\n  clearChildren(node.childNodes);\n}\n/**\n * Clear multiple children in a node\n * @param   {HTMLElement[]} children - direct children nodes\n * @returns {undefined}\n */\n\nfunction clearChildren(children) {\n  Array.from(children).forEach(removeNode);\n}\n/**\n * Remove a node from the DOM\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\nfunction removeNode(node) {\n  const {\n    parentNode\n  } = node;\n  if (node.remove) node.remove();\n  /* istanbul ignore else */\n  else if (parentNode) parentNode.removeChild(node);\n}\n\nconst EACH = 0;\nconst IF = 1;\nconst SIMPLE = 2;\nconst TAG = 3;\nconst SLOT = 4;\nvar bindingTypes = {\n  EACH,\n  IF,\n  SIMPLE,\n  TAG,\n  SLOT\n};\n\nconst ATTRIBUTE = 0;\nconst EVENT = 1;\nconst TEXT = 2;\nconst VALUE = 3;\nvar expressionTypes = {\n  ATTRIBUTE,\n  EVENT,\n  TEXT,\n  VALUE\n};\n\n/**\n * Create the template meta object in case of <template> fragments\n * @param   {TemplateChunk} componentTemplate - template chunk object\n * @returns {Object} the meta property that will be passed to the mount function of the TemplateChunk\n */\nfunction createTemplateMeta(componentTemplate) {\n  const fragment = componentTemplate.dom.cloneNode(true);\n  return {\n    avoidDOMInjection: true,\n    fragment,\n    children: Array.from(fragment.childNodes)\n  };\n}\n\nconst {\n  indexOf,\n  slice\n} = [];\n\nconst append = (get, parent, children, start, end, before) => {\n  const isSelect = ('selectedIndex' in parent);\n  let noSelection = isSelect;\n\n  while (start < end) {\n    const child = get(children[start], 1);\n    parent.insertBefore(child, before);\n\n    if (isSelect && noSelection && child.selected) {\n      noSelection = !noSelection;\n      let {\n        selectedIndex\n      } = parent;\n      parent.selectedIndex = selectedIndex < 0 ? start : indexOf.call(parent.querySelectorAll('option'), child);\n    }\n\n    start++;\n  }\n};\nconst eqeq = (a, b) => a == b;\nconst identity = O => O;\nconst indexOf$1 = (moreNodes, moreStart, moreEnd, lessNodes, lessStart, lessEnd, compare) => {\n  const length = lessEnd - lessStart;\n  /* istanbul ignore if */\n\n  if (length < 1) return -1;\n\n  while (moreEnd - moreStart >= length) {\n    let m = moreStart;\n    let l = lessStart;\n\n    while (m < moreEnd && l < lessEnd && compare(moreNodes[m], lessNodes[l])) {\n      m++;\n      l++;\n    }\n\n    if (l === lessEnd) return moreStart;\n    moreStart = m + 1;\n  }\n\n  return -1;\n};\nconst isReversed = (futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare) => {\n  while (currentStart < currentEnd && compare(currentNodes[currentStart], futureNodes[futureEnd - 1])) {\n    currentStart++;\n    futureEnd--;\n  }\n  return futureEnd === 0;\n};\nconst next = (get, list, i, length, before) => i < length ? get(list[i], 0) : 0 < i ? get(list[i - 1], -0).nextSibling : before;\nconst remove = (get, children, start, end) => {\n  while (start < end) drop(get(children[start++], -1));\n}; // - - - - - - - - - - - - - - - - - - -\n// diff related constants and utilities\n// - - - - - - - - - - - - - - - - - - -\n\nconst DELETION = -1;\nconst INSERTION = 1;\nconst SKIP = 0;\nconst SKIP_OND = 50;\n\nconst HS = (futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges) => {\n  let k = 0;\n  /* istanbul ignore next */\n\n  let minLen = futureChanges < currentChanges ? futureChanges : currentChanges;\n  const link = Array(minLen++);\n  const tresh = Array(minLen);\n  tresh[0] = -1;\n\n  for (let i = 1; i < minLen; i++) tresh[i] = currentEnd;\n\n  const nodes = currentNodes.slice(currentStart, currentEnd);\n\n  for (let i = futureStart; i < futureEnd; i++) {\n    const index = nodes.indexOf(futureNodes[i]);\n\n    if (-1 < index) {\n      const idxInOld = index + currentStart;\n      k = findK(tresh, minLen, idxInOld);\n      /* istanbul ignore else */\n\n      if (-1 < k) {\n        tresh[k] = idxInOld;\n        link[k] = {\n          newi: i,\n          oldi: idxInOld,\n          prev: link[k - 1]\n        };\n      }\n    }\n  }\n\n  k = --minLen;\n  --currentEnd;\n\n  while (tresh[k] > currentEnd) --k;\n\n  minLen = currentChanges + futureChanges - k;\n  const diff = Array(minLen);\n  let ptr = link[k];\n  --futureEnd;\n\n  while (ptr) {\n    const {\n      newi,\n      oldi\n    } = ptr;\n\n    while (futureEnd > newi) {\n      diff[--minLen] = INSERTION;\n      --futureEnd;\n    }\n\n    while (currentEnd > oldi) {\n      diff[--minLen] = DELETION;\n      --currentEnd;\n    }\n\n    diff[--minLen] = SKIP;\n    --futureEnd;\n    --currentEnd;\n    ptr = ptr.prev;\n  }\n\n  while (futureEnd >= futureStart) {\n    diff[--minLen] = INSERTION;\n    --futureEnd;\n  }\n\n  while (currentEnd >= currentStart) {\n    diff[--minLen] = DELETION;\n    --currentEnd;\n  }\n\n  return diff;\n}; // this is pretty much the same petit-dom code without the delete map part\n// https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L556-L561\n\n\nconst OND = (futureNodes, futureStart, rows, currentNodes, currentStart, cols, compare) => {\n  const length = rows + cols;\n  const v = [];\n  let d, k, r, c, pv, cv, pd;\n\n  outer: for (d = 0; d <= length; d++) {\n    /* istanbul ignore if */\n    if (d > SKIP_OND) return null;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    cv = v[d] = [];\n\n    for (k = -d; k <= d; k += 2) {\n      if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n        c = pv[pd + k + 1];\n      } else {\n        c = pv[pd + k - 1] + 1;\n      }\n\n      r = c - k;\n\n      while (c < cols && r < rows && compare(currentNodes[currentStart + c], futureNodes[futureStart + r])) {\n        c++;\n        r++;\n      }\n\n      if (c === cols && r === rows) {\n        break outer;\n      }\n\n      cv[d + k] = c;\n    }\n  }\n\n  const diff = Array(d / 2 + length / 2);\n  let diffIdx = diff.length - 1;\n\n  for (d = v.length - 1; d >= 0; d--) {\n    while (c > 0 && r > 0 && compare(currentNodes[currentStart + c - 1], futureNodes[futureStart + r - 1])) {\n      // diagonal edge = equality\n      diff[diffIdx--] = SKIP;\n      c--;\n      r--;\n    }\n\n    if (!d) break;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    k = c - r;\n\n    if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n      // vertical edge = insertion\n      r--;\n      diff[diffIdx--] = INSERTION;\n    } else {\n      // horizontal edge = deletion\n      c--;\n      diff[diffIdx--] = DELETION;\n    }\n  }\n\n  return diff;\n};\n\nconst applyDiff = (diff, get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before) => {\n  const live = [];\n  const length = diff.length;\n  let currentIndex = currentStart;\n  let i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        futureStart++;\n        currentIndex++;\n        break;\n\n      case INSERTION:\n        // TODO: bulk appends for sequential nodes\n        live.push(futureNodes[futureStart]);\n        append(get, parentNode, futureNodes, futureStart++, futureStart, currentIndex < currentLength ? get(currentNodes[currentIndex], 0) : before);\n        break;\n\n      case DELETION:\n        currentIndex++;\n        break;\n    }\n  }\n\n  i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        currentStart++;\n        break;\n\n      case DELETION:\n        // TODO: bulk removes for sequential nodes\n        if (-1 < live.indexOf(currentNodes[currentStart])) currentStart++;else remove(get, currentNodes, currentStart++, currentStart);\n        break;\n    }\n  }\n};\n\nconst findK = (ktr, length, j) => {\n  let lo = 1;\n  let hi = length;\n\n  while (lo < hi) {\n    const mid = (lo + hi) / 2 >>> 0;\n    if (j < ktr[mid]) hi = mid;else lo = mid + 1;\n  }\n\n  return lo;\n};\n\nconst smartDiff = (get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before) => {\n  applyDiff(OND(futureNodes, futureStart, futureChanges, currentNodes, currentStart, currentChanges, compare) || HS(futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges), get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before);\n};\n\nconst drop = node => (node.remove || dropChild).call(node);\n\nfunction dropChild() {\n  const {\n    parentNode\n  } = this;\n  /* istanbul ignore else */\n\n  if (parentNode) parentNode.removeChild(this);\n}\n\n/*! (c) 2018 Andrea Giammarchi (ISC) */\n\nconst domdiff = (parentNode, // where changes happen\ncurrentNodes, // Array of current items/nodes\nfutureNodes, // Array of future items/nodes\noptions // optional object with one of the following properties\n//  before: domNode\n//  compare(generic, generic) => true if same generic\n//  node(generic) => Node\n) => {\n  if (!options) options = {};\n  const compare = options.compare || eqeq;\n  const get = options.node || identity;\n  const before = options.before == null ? null : get(options.before, 0);\n  const currentLength = currentNodes.length;\n  let currentEnd = currentLength;\n  let currentStart = 0;\n  let futureEnd = futureNodes.length;\n  let futureStart = 0; // common prefix\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentStart], futureNodes[futureStart])) {\n    currentStart++;\n    futureStart++;\n  } // common suffix\n\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentEnd - 1], futureNodes[futureEnd - 1])) {\n    currentEnd--;\n    futureEnd--;\n  }\n\n  const currentSame = currentStart === currentEnd;\n  const futureSame = futureStart === futureEnd; // same list\n\n  if (currentSame && futureSame) return futureNodes; // only stuff to add\n\n  if (currentSame && futureStart < futureEnd) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentStart, currentLength, before));\n    return futureNodes;\n  } // only stuff to remove\n\n\n  if (futureSame && currentStart < currentEnd) {\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  }\n\n  const currentChanges = currentEnd - currentStart;\n  const futureChanges = futureEnd - futureStart;\n  let i = -1; // 2 simple indels: the shortest sequence is a subsequence of the longest\n\n  if (currentChanges < futureChanges) {\n    i = indexOf$1(futureNodes, futureStart, futureEnd, currentNodes, currentStart, currentEnd, compare); // inner diff\n\n    if (-1 < i) {\n      append(get, parentNode, futureNodes, futureStart, i, get(currentNodes[currentStart], 0));\n      append(get, parentNode, futureNodes, i + currentChanges, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n      return futureNodes;\n    }\n  }\n  /* istanbul ignore else */\n  else if (futureChanges < currentChanges) {\n      i = indexOf$1(currentNodes, currentStart, currentEnd, futureNodes, futureStart, futureEnd, compare); // outer diff\n\n      if (-1 < i) {\n        remove(get, currentNodes, currentStart, i);\n        remove(get, currentNodes, i + futureChanges, currentEnd);\n        return futureNodes;\n      }\n    } // common case with one replacement for many nodes\n  // or many nodes replaced for a single one\n\n  /* istanbul ignore else */\n\n\n  if (currentChanges < 2 || futureChanges < 2) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, get(currentNodes[currentStart], 0));\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  } // the half match diff part has been skipped in petit-dom\n  // https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L391-L397\n  // accordingly, I think it's safe to skip in here too\n  // if one day it'll come out like the speediest thing ever to do\n  // then I might add it in here too\n  // Extra: before going too fancy, what about reversed lists ?\n  //        This should bail out pretty quickly if that's not the case.\n\n\n  if (currentChanges === futureChanges && isReversed(futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare)) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n    return futureNodes;\n  } // last resort through a smart diff\n\n\n  smartDiff(get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before);\n  return futureNodes;\n};\n\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\nfunction checkType(element, type) {\n  return typeof element === type;\n}\n/**\n * Check if an element is part of an svg\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if we are in an svg context\n */\n\nfunction isSvg(el) {\n  const owner = el.ownerSVGElement;\n  return !!owner || owner === null;\n}\n/**\n * Check if an element is a template tag\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if it's a <template>\n */\n\nfunction isTemplate(el) {\n  return !isNil(el.content);\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\nfunction isFunction(value) {\n  return checkType(value, 'function');\n}\n/**\n * Check if a value is a Boolean\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is a boolean\n */\n\nfunction isBoolean(value) {\n  return checkType(value, 'boolean');\n}\n/**\n * Check if a value is an Object\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is an object\n */\n\nfunction isObject(value) {\n  return !isNil(value) && checkType(value, 'object');\n}\n/**\n * Check if a value is null or undefined\n * @param   {*}  value - anything\n * @returns {boolean} true only for the 'undefined' and 'null' types\n */\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nconst UNMOUNT_SCOPE = Symbol('unmount');\nconst EachBinding = Object.seal({\n  // dynamic binding properties\n  // childrenMap: null,\n  // node: null,\n  // root: null,\n  // condition: null,\n  // evaluate: null,\n  // template: null,\n  // isTemplateTag: false,\n  nodes: [],\n\n  // getKey: null,\n  // indexName: null,\n  // itemName: null,\n  // afterPlaceholder: null,\n  // placeholder: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const {\n      placeholder,\n      nodes,\n      childrenMap\n    } = this;\n    const collection = scope === UNMOUNT_SCOPE ? null : this.evaluate(scope);\n    const items = collection ? Array.from(collection) : [];\n    const parent = placeholder.parentNode; // prepare the diffing\n\n    const {\n      newChildrenMap,\n      batches,\n      futureNodes\n    } = createPatch(items, scope, parentScope, this); // patch the DOM only if there are new nodes\n\n    domdiff(parent, nodes, futureNodes, {\n      before: placeholder,\n      node: patch(Array.from(childrenMap.values()), parentScope)\n    }); // trigger the mounts and the updates\n\n    batches.forEach(fn => fn()); // update the children map\n\n    this.childrenMap = newChildrenMap;\n    this.nodes = futureNodes;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.update(UNMOUNT_SCOPE, parentScope);\n    return this;\n  }\n\n});\n/**\n * Patch the DOM while diffing\n * @param   {TemplateChunk[]} redundant - redundant tepmplate chunks\n * @param   {*} parentScope - scope of the parent template\n * @returns {Function} patch function used by domdiff\n */\n\nfunction patch(redundant, parentScope) {\n  return (item, info) => {\n    if (info < 0) {\n      const element = redundant.pop();\n\n      if (element) {\n        const {\n          template,\n          context\n        } = element; // notice that we pass null as last argument because\n        // the root node and its children will be removed by domdiff\n\n        template.unmount(context, parentScope, null);\n      }\n    }\n\n    return item;\n  };\n}\n/**\n * Check whether a template must be filtered from a loop\n * @param   {Function} condition - filter function\n * @param   {Object} context - argument passed to the filter function\n * @returns {boolean} true if this item should be skipped\n */\n\n\nfunction mustFilterItem(condition, context) {\n  return condition ? Boolean(condition(context)) === false : false;\n}\n/**\n * Extend the scope of the looped template\n * @param   {Object} scope - current template scope\n * @param   {string} options.itemName - key to identify the looped item in the new context\n * @param   {string} options.indexName - key to identify the index of the looped item\n * @param   {number} options.index - current index\n * @param   {*} options.item - collection item looped\n * @returns {Object} enhanced scope object\n */\n\n\nfunction extendScope(scope, _ref) {\n  let {\n    itemName,\n    indexName,\n    index,\n    item\n  } = _ref;\n  scope[itemName] = item;\n  if (indexName) scope[indexName] = index;\n  return scope;\n}\n/**\n * Loop the current template items\n * @param   {Array} items - expression collection value\n * @param   {*} scope - template scope\n * @param   {*} parentScope - scope of the parent template\n * @param   {EeachBinding} binding - each binding object instance\n * @returns {Object} data\n * @returns {Map} data.newChildrenMap - a Map containing the new children template structure\n * @returns {Array} data.batches - array containing the template lifecycle functions to trigger\n * @returns {Array} data.futureNodes - array containing the nodes we need to diff\n */\n\n\nfunction createPatch(items, scope, parentScope, binding) {\n  const {\n    condition,\n    template,\n    childrenMap,\n    itemName,\n    getKey,\n    indexName,\n    root,\n    isTemplateTag\n  } = binding;\n  const newChildrenMap = new Map();\n  const batches = [];\n  const futureNodes = [];\n  items.forEach((item, index) => {\n    const context = extendScope(Object.create(scope), {\n      itemName,\n      indexName,\n      index,\n      item\n    });\n    const key = getKey ? getKey(context) : index;\n    const oldItem = childrenMap.get(key);\n\n    if (mustFilterItem(condition, context)) {\n      return;\n    }\n\n    const componentTemplate = oldItem ? oldItem.template : template.clone();\n    const el = oldItem ? componentTemplate.el : root.cloneNode();\n    const mustMount = !oldItem;\n    const meta = isTemplateTag && mustMount ? createTemplateMeta(componentTemplate) : {};\n\n    if (mustMount) {\n      batches.push(() => componentTemplate.mount(el, context, parentScope, meta));\n    } else {\n      batches.push(() => componentTemplate.update(context, parentScope));\n    } // create the collection of nodes to update or to add\n    // in case of template tags we need to add all its children nodes\n\n\n    if (isTemplateTag) {\n      const children = meta.children || componentTemplate.children;\n      futureNodes.push(...children);\n    } else {\n      futureNodes.push(el);\n    } // delete the old item from the children map\n\n\n    childrenMap.delete(key); // update the children map\n\n    newChildrenMap.set(key, {\n      template: componentTemplate,\n      context,\n      index\n    });\n  });\n  return {\n    newChildrenMap,\n    batches,\n    futureNodes\n  };\n}\n\nfunction create(node, _ref2) {\n  let {\n    evaluate,\n    condition,\n    itemName,\n    indexName,\n    getKey,\n    template\n  } = _ref2;\n  const placeholder = document.createTextNode('');\n  const parent = node.parentNode;\n  const root = node.cloneNode();\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, EachBinding, {\n    childrenMap: new Map(),\n    node,\n    root,\n    condition,\n    evaluate,\n    isTemplateTag: isTemplate(root),\n    template: template.createDOM(node),\n    getKey,\n    indexName,\n    itemName,\n    placeholder\n  });\n}\n\n/**\n * Binding responsible for the `if` directive\n */\n\nconst IfBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // isTemplateTag: false,\n  // placeholder: null,\n  // template: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const value = !!this.evaluate(scope);\n    const mustMount = !this.value && value;\n    const mustUnmount = this.value && !value;\n\n    const mount = () => {\n      const pristine = this.node.cloneNode();\n      this.placeholder.parentNode.insertBefore(pristine, this.placeholder);\n      this.template = this.template.clone();\n      this.template.mount(pristine, scope, parentScope);\n    };\n\n    switch (true) {\n      case mustMount:\n        mount();\n        break;\n\n      case mustUnmount:\n        this.unmount(scope);\n        break;\n\n      default:\n        if (value) this.template.update(scope, parentScope);\n    }\n\n    this.value = value;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.template.unmount(scope, parentScope, true);\n    return this;\n  }\n\n});\nfunction create$1(node, _ref) {\n  let {\n    evaluate,\n    template\n  } = _ref;\n  const parent = node.parentNode;\n  const placeholder = document.createTextNode('');\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, IfBinding, {\n    node,\n    evaluate,\n    placeholder,\n    template: template.createDOM(node)\n  });\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Returns the memoized (cached) function.\n * // borrowed from https://www.30secondsofcode.org/js/s/memoize\n * @param {Function} fn - function to memoize\n * @returns {Function} memoize function\n */\n\nfunction memoize(fn) {\n  const cache = new Map();\n\n  const cached = val => {\n    return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) && cache.get(val);\n  };\n\n  cached.cache = cache;\n  return cached;\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\nfunction evaluateAttributeExpressions(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const {\n      value,\n      type\n    } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE:\n        return Object.assign({}, acc, value);\n      // value attribute\n\n      case type === VALUE:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nconst REMOVE_ATTRIBUTE = 'removeAttribute';\nconst SET_ATTIBUTE = 'setAttribute';\nconst ElementProto = typeof Element === 'undefined' ? {} : Element.prototype;\nconst isNativeHtmlProperty = memoize(name => ElementProto.hasOwnProperty(name)); // eslint-disable-line\n\n/**\n * Add all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing the attributes names and values\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction setAllAttributes(node, attributes) {\n  Object.entries(attributes).forEach((_ref) => {\n    let [name, value] = _ref;\n    return attributeExpression(node, {\n      name\n    }, value);\n  });\n}\n/**\n * Remove all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} newAttributes - object containing all the new attribute names\n * @param   {Object} oldAttributes - object containing all the old attribute names\n * @returns {undefined} sorry it's a void function :(\n */\n\n\nfunction removeAllAttributes(node, newAttributes, oldAttributes) {\n  const newKeys = newAttributes ? Object.keys(newAttributes) : [];\n  Object.keys(oldAttributes).filter(name => !newKeys.includes(name)).forEach(attribute => node.removeAttribute(attribute));\n}\n/**\n * This methods handles the DOM attributes updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - attribute name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - the old expression cached value\n * @returns {undefined}\n */\n\n\nfunction attributeExpression(node, _ref2, value, oldValue) {\n  let {\n    name\n  } = _ref2;\n\n  // is it a spread operator? {...attributes}\n  if (!name) {\n    if (oldValue) {\n      // remove all the old attributes\n      removeAllAttributes(node, value, oldValue);\n    } // is the value still truthy?\n\n\n    if (value) {\n      setAllAttributes(node, value);\n    }\n\n    return;\n  } // handle boolean attributes\n\n\n  if (!isNativeHtmlProperty(name) && (isBoolean(value) || isObject(value) || isFunction(value))) {\n    node[name] = value;\n  }\n\n  node[getMethod(value)](name, normalizeValue(name, value));\n}\n/**\n * Get the attribute modifier method\n * @param   {*} value - if truthy we return `setAttribute` othewise `removeAttribute`\n * @returns {string} the node attribute modifier method name\n */\n\nfunction getMethod(value) {\n  return isNil(value) || value === false || value === '' || isObject(value) || isFunction(value) ? REMOVE_ATTRIBUTE : SET_ATTIBUTE;\n}\n/**\n * Get the value as string\n * @param   {string} name - attribute name\n * @param   {*} value - user input value\n * @returns {string} input value as string\n */\n\n\nfunction normalizeValue(name, value) {\n  // be sure that expressions like selected={ true } will be always rendered as selected='selected'\n  if (value === true) return name;\n  return value;\n}\n\nconst RE_EVENTS_PREFIX = /^on/;\n\nconst getCallbackAndOptions = value => Array.isArray(value) ? value : [value, false]; // see also https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38\n\n\nconst EventListener = {\n  handleEvent(event) {\n    this[event.type](event);\n  }\n\n};\nconst ListenersWeakMap = new WeakMap();\n\nconst createListener = node => {\n  const listener = Object.create(EventListener);\n  ListenersWeakMap.set(node, listener);\n  return listener;\n};\n/**\n * Set a new event listener\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - event name\n * @param   {*} value - new expression value\n * @returns {value} the callback just received\n */\n\n\nfunction eventExpression(node, _ref, value) {\n  let {\n    name\n  } = _ref;\n  const normalizedEventName = name.replace(RE_EVENTS_PREFIX, '');\n  const eventListener = ListenersWeakMap.get(node) || createListener(node);\n  const [callback, options] = getCallbackAndOptions(value);\n  const handler = eventListener[normalizedEventName];\n  const mustRemoveEvent = handler && !callback;\n  const mustAddEvent = callback && !handler;\n\n  if (mustRemoveEvent) {\n    node.removeEventListener(normalizedEventName, eventListener);\n  }\n\n  if (mustAddEvent) {\n    node.addEventListener(normalizedEventName, eventListener, options);\n  }\n\n  eventListener[normalizedEventName] = callback;\n}\n\n/**\n * Normalize the user value in order to render a empty string in case of falsy values\n * @param   {*} value - user input value\n * @returns {string} hopefully a string\n */\n\nfunction normalizeStringValue(value) {\n  return isNil(value) ? '' : value;\n}\n\n/**\n * Get the the target text node to update or create one from of a comment node\n * @param   {HTMLElement} node - any html element containing childNodes\n * @param   {number} childNodeIndex - index of the text node in the childNodes list\n * @returns {HTMLTextNode} the text node to update\n */\n\nconst getTextNode = (node, childNodeIndex) => {\n  const target = node.childNodes[childNodeIndex];\n\n  if (target.nodeType === Node.COMMENT_NODE) {\n    const textNode = document.createTextNode('');\n    node.replaceChild(textNode, target);\n    return textNode;\n  }\n\n  return target;\n};\n/**\n * This methods handles a simple text expression update\n * @param   {HTMLElement} node - target node\n * @param   {Object} data - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction textExpression(node, data, value) {\n  node.data = normalizeStringValue(value);\n}\n\n/**\n * This methods handles the input fileds value updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\nfunction valueExpression(node, expression, value) {\n  node.value = normalizeStringValue(value);\n}\n\nvar expressions = {\n  [ATTRIBUTE]: attributeExpression,\n  [EVENT]: eventExpression,\n  [TEXT]: textExpression,\n  [VALUE]: valueExpression\n};\n\nconst Expression = Object.seal({\n  // Static props\n  // node: null,\n  // value: null,\n  // API methods\n\n  /**\n   * Mount the expression evaluating its initial value\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  mount(scope) {\n    // hopefully a pure function\n    this.value = this.evaluate(scope); // IO() DOM updates\n\n    apply(this, this.value);\n    return this;\n  },\n\n  /**\n   * Update the expression if its value changed\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  update(scope) {\n    // pure function\n    const value = this.evaluate(scope);\n\n    if (this.value !== value) {\n      // IO() DOM updates\n      apply(this, value);\n      this.value = value;\n    }\n\n    return this;\n  },\n\n  /**\n   * Expression teardown method\n   * @returns {Expression} self\n   */\n  unmount() {\n    // unmount only the event handling expressions\n    if (this.type === EVENT) apply(this, null);\n    return this;\n  }\n\n});\n/**\n * IO() function to handle the DOM updates\n * @param {Expression} expression - expression object\n * @param {*} value - current expression value\n * @returns {undefined}\n */\n\nfunction apply(expression, value) {\n  return expressions[expression.type](expression.node, expression, value, expression.value);\n}\n\nfunction create$2(node, data) {\n  return Object.assign({}, Expression, data, {\n    node: data.type === TEXT ? getTextNode(node, data.childNodeIndex) : node\n  });\n}\n\n/**\n * Create a flat object having as keys a list of methods that if dispatched will propagate\n * on the whole collection\n * @param   {Array} collection - collection to iterate\n * @param   {Array<string>} methods - methods to execute on each item of the collection\n * @param   {*} context - context returned by the new methods created\n * @returns {Object} a new object to simplify the the nested methods dispatching\n */\nfunction flattenCollectionMethods(collection, methods, context) {\n  return methods.reduce((acc, method) => {\n    return Object.assign({}, acc, {\n      [method]: scope => {\n        return collection.map(item => item[method](scope)) && context;\n      }\n    });\n  }, {});\n}\n\nfunction create$3(node, _ref) {\n  let {\n    expressions\n  } = _ref;\n  return Object.assign({}, flattenCollectionMethods(expressions.map(expression => create$2(node, expression)), ['mount', 'update', 'unmount']));\n}\n\n// Riot.js constants that can be used accross more modules\nconst COMPONENTS_IMPLEMENTATION_MAP = new Map(),\n      DOM_COMPONENT_INSTANCE_PROPERTY = Symbol('riot-component'),\n      PLUGINS_SET = new Set(),\n      IS_DIRECTIVE = 'is',\n      VALUE_ATTRIBUTE = 'value',\n      MOUNT_METHOD_KEY = 'mount',\n      UPDATE_METHOD_KEY = 'update',\n      UNMOUNT_METHOD_KEY = 'unmount',\n      SHOULD_UPDATE_KEY = 'shouldUpdate',\n      ON_BEFORE_MOUNT_KEY = 'onBeforeMount',\n      ON_MOUNTED_KEY = 'onMounted',\n      ON_BEFORE_UPDATE_KEY = 'onBeforeUpdate',\n      ON_UPDATED_KEY = 'onUpdated',\n      ON_BEFORE_UNMOUNT_KEY = 'onBeforeUnmount',\n      ON_UNMOUNTED_KEY = 'onUnmounted',\n      PROPS_KEY = 'props',\n      STATE_KEY = 'state',\n      SLOTS_KEY = 'slots',\n      ROOT_KEY = 'root',\n      IS_PURE_SYMBOL = Symbol.for('pure'),\n      PARENT_KEY_SYMBOL = Symbol('parent'),\n      ATTRIBUTES_KEY_SYMBOL = Symbol('attributes'),\n      TEMPLATE_KEY_SYMBOL = Symbol('template');\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP,\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY,\n  PLUGINS_SET: PLUGINS_SET,\n  IS_DIRECTIVE: IS_DIRECTIVE,\n  VALUE_ATTRIBUTE: VALUE_ATTRIBUTE,\n  MOUNT_METHOD_KEY: MOUNT_METHOD_KEY,\n  UPDATE_METHOD_KEY: UPDATE_METHOD_KEY,\n  UNMOUNT_METHOD_KEY: UNMOUNT_METHOD_KEY,\n  SHOULD_UPDATE_KEY: SHOULD_UPDATE_KEY,\n  ON_BEFORE_MOUNT_KEY: ON_BEFORE_MOUNT_KEY,\n  ON_MOUNTED_KEY: ON_MOUNTED_KEY,\n  ON_BEFORE_UPDATE_KEY: ON_BEFORE_UPDATE_KEY,\n  ON_UPDATED_KEY: ON_UPDATED_KEY,\n  ON_BEFORE_UNMOUNT_KEY: ON_BEFORE_UNMOUNT_KEY,\n  ON_UNMOUNTED_KEY: ON_UNMOUNTED_KEY,\n  PROPS_KEY: PROPS_KEY,\n  STATE_KEY: STATE_KEY,\n  SLOTS_KEY: SLOTS_KEY,\n  ROOT_KEY: ROOT_KEY,\n  IS_PURE_SYMBOL: IS_PURE_SYMBOL,\n  PARENT_KEY_SYMBOL: PARENT_KEY_SYMBOL,\n  ATTRIBUTES_KEY_SYMBOL: ATTRIBUTES_KEY_SYMBOL,\n  TEMPLATE_KEY_SYMBOL: TEMPLATE_KEY_SYMBOL\n});\n\nfunction extendParentScope(attributes, scope, parentScope) {\n  if (!attributes || !attributes.length) return parentScope;\n  const expressions = attributes.map(attr => Object.assign({}, attr, {\n    value: attr.evaluate(scope)\n  }));\n  return Object.assign(Object.create(parentScope || null), evaluateAttributeExpressions(expressions));\n} // this function is only meant to fix an edge case\n// https://github.com/riot/riot/issues/2842\n\n\nconst getRealParent = (scope, parentScope) => parentScope ? parentScope === scope ? scope[PARENT_KEY_SYMBOL] : parentScope : undefined;\n\nconst SlotBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // name: null,\n  attributes: [],\n\n  // template: null,\n  getTemplateScope(scope, parentScope) {\n    return extendParentScope(this.attributes, scope, parentScope);\n  },\n\n  // API methods\n  mount(scope, parentScope) {\n    const templateData = scope.slots ? scope.slots.find((_ref) => {\n      let {\n        id\n      } = _ref;\n      return id === this.name;\n    }) : false;\n    const {\n      parentNode\n    } = this.node;\n    const realParent = getRealParent(scope, parentScope);\n    this.template = templateData && create$6(templateData.html, templateData.bindings).createDOM(parentNode);\n\n    if (this.template) {\n      this.template.mount(this.node, this.getTemplateScope(scope, realParent), realParent);\n      this.template.children = moveSlotInnerContent(this.node);\n    }\n\n    removeNode(this.node);\n    return this;\n  },\n\n  update(scope, parentScope) {\n    if (this.template) {\n      const realParent = getRealParent(scope, parentScope);\n      this.template.update(this.getTemplateScope(scope, realParent), realParent);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.template) {\n      this.template.unmount(this.getTemplateScope(scope, parentScope), null, mustRemoveRoot);\n    }\n\n    return this;\n  }\n\n});\n/**\n * Move the inner content of the slots outside of them\n * @param   {HTMLNode} slot - slot node\n * @param   {HTMLElement} children - array to fill with the child nodes detected\n * @returns {HTMLElement[]} list of the node moved\n */\n\nfunction moveSlotInnerContent(slot, children) {\n  if (children === void 0) {\n    children = [];\n  }\n\n  const child = slot.firstChild;\n\n  if (child) {\n    slot.parentNode.insertBefore(child, slot);\n    return [child, ...moveSlotInnerContent(slot)];\n  }\n\n  return children;\n}\n/**\n * Create a single slot binding\n * @param   {HTMLElement} node - slot node\n * @param   {string} options.name - slot id\n * @returns {Object} Slot binding object\n */\n\n\nfunction createSlot(node, _ref2) {\n  let {\n    name,\n    attributes\n  } = _ref2;\n  return Object.assign({}, SlotBinding, {\n    attributes,\n    node,\n    name\n  });\n}\n\n/**\n * Create a new tag object if it was registered before, otherwise fallback to the simple\n * template chunk\n * @param   {Function} component - component factory function\n * @param   {Array<Object>} slots - array containing the slots markup\n * @param   {Array} attributes - dynamic attributes that will be received by the tag element\n * @returns {TagImplementation|TemplateChunk} a tag implementation or a template chunk as fallback\n */\n\nfunction getTag(component, slots, attributes) {\n  if (slots === void 0) {\n    slots = [];\n  }\n\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  // if this tag was registered before we will return its implementation\n  if (component) {\n    return component({\n      slots,\n      attributes\n    });\n  } // otherwise we return a template chunk\n\n\n  return create$6(slotsToMarkup(slots), [...slotBindings(slots), {\n    // the attributes should be registered as binding\n    // if we fallback to a normal template chunk\n    expressions: attributes.map(attr => {\n      return Object.assign({\n        type: ATTRIBUTE\n      }, attr);\n    })\n  }]);\n}\n/**\n * Merge all the slots bindings into a single array\n * @param   {Array<Object>} slots - slots collection\n * @returns {Array<Bindings>} flatten bindings array\n */\n\n\nfunction slotBindings(slots) {\n  return slots.reduce((acc, _ref) => {\n    let {\n      bindings\n    } = _ref;\n    return acc.concat(bindings);\n  }, []);\n}\n/**\n * Merge all the slots together in a single markup string\n * @param   {Array<Object>} slots - slots collection\n * @returns {string} markup of all the slots in a single string\n */\n\n\nfunction slotsToMarkup(slots) {\n  return slots.reduce((acc, slot) => {\n    return acc + slot.html;\n  }, '');\n}\n\nconst TagBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // name: null,\n  // slots: null,\n  // tag: null,\n  // attributes: null,\n  // getComponent: null,\n  mount(scope) {\n    return this.update(scope);\n  },\n\n  update(scope, parentScope) {\n    const name = this.evaluate(scope); // simple update\n\n    if (name === this.name) {\n      this.tag.update(scope);\n    } else {\n      // unmount the old tag if it exists\n      this.unmount(scope, parentScope, true); // mount the new tag\n\n      this.name = name;\n      this.tag = getTag(this.getComponent(name), this.slots, this.attributes);\n      this.tag.mount(this.node, scope);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, keepRootTag) {\n    if (this.tag) {\n      // keep the root tag\n      this.tag.unmount(keepRootTag);\n    }\n\n    return this;\n  }\n\n});\nfunction create$4(node, _ref2) {\n  let {\n    evaluate,\n    getComponent,\n    slots,\n    attributes\n  } = _ref2;\n  return Object.assign({}, TagBinding, {\n    node,\n    evaluate,\n    slots,\n    attributes,\n    getComponent\n  });\n}\n\nvar bindings = {\n  [IF]: create$1,\n  [SIMPLE]: create$3,\n  [EACH]: create,\n  [TAG]: create$4,\n  [SLOT]: createSlot\n};\n\n/**\n * Text expressions in a template tag will get childNodeIndex value normalized\n * depending on the position of the <template> tag offset\n * @param   {Expression[]} expressions - riot expressions array\n * @param   {number} textExpressionsOffset - offset of the <template> tag\n * @returns {Expression[]} expressions containing the text expressions normalized\n */\n\nfunction fixTextExpressionsOffset(expressions, textExpressionsOffset) {\n  return expressions.map(e => e.type === TEXT ? Object.assign({}, e, {\n    childNodeIndex: e.childNodeIndex + textExpressionsOffset\n  }) : e);\n}\n/**\n * Bind a new expression object to a DOM node\n * @param   {HTMLElement} root - DOM node where to bind the expression\n * @param   {Object} binding - binding data\n * @param   {number|null} templateTagOffset - if it's defined we need to fix the text expressions childNodeIndex offset\n * @returns {Binding} Binding object\n */\n\n\nfunction create$5(root, binding, templateTagOffset) {\n  const {\n    selector,\n    type,\n    redundantAttribute,\n    expressions\n  } = binding; // find the node to apply the bindings\n\n  const node = selector ? root.querySelector(selector) : root; // remove eventually additional attributes created only to select this node\n\n  if (redundantAttribute) node.removeAttribute(redundantAttribute);\n  const bindingExpressions = expressions || []; // init the binding\n\n  return (bindings[type] || bindings[SIMPLE])(node, Object.assign({}, binding, {\n    expressions: templateTagOffset && !selector ? fixTextExpressionsOffset(bindingExpressions, templateTagOffset) : bindingExpressions\n  }));\n}\n\nfunction createHTMLTree(html, root) {\n  const template = isTemplate(root) ? root : document.createElement('template');\n  template.innerHTML = html;\n  return template.content;\n} // for svg nodes we need a bit more work\n\n\nfunction createSVGTree(html, container) {\n  // create the SVGNode\n  const svgNode = container.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns=\"http://www.w3.org/2000/svg\">${html}</svg>`, 'application/xml').documentElement, true);\n  return svgNode;\n}\n/**\n * Create the DOM that will be injected\n * @param {Object} root - DOM node to find out the context where the fragment will be created\n * @param   {string} html - DOM to create as string\n * @returns {HTMLDocumentFragment|HTMLElement} a new html fragment\n */\n\n\nfunction createDOMTree(root, html) {\n  if (isSvg(root)) return createSVGTree(html, root);\n  return createHTMLTree(html, root);\n}\n\n/**\n * Inject the DOM tree into a target node\n * @param   {HTMLElement} el - target element\n * @param   {HTMLFragment|SVGElement} dom - dom tree to inject\n * @returns {undefined}\n */\n\nfunction injectDOM(el, dom) {\n  switch (true) {\n    case isSvg(el):\n      moveChildren(dom, el);\n      break;\n\n    case isTemplate(el):\n      el.parentNode.replaceChild(dom, el);\n      break;\n\n    default:\n      el.appendChild(dom);\n  }\n}\n\n/**\n * Create the Template DOM skeleton\n * @param   {HTMLElement} el - root node where the DOM will be injected\n * @param   {string} html - markup that will be injected into the root node\n * @returns {HTMLFragment} fragment that will be injected into the root node\n */\n\nfunction createTemplateDOM(el, html) {\n  return html && (typeof html === 'string' ? createDOMTree(el, html) : html);\n}\n/**\n * Template Chunk model\n * @type {Object}\n */\n\n\nconst TemplateChunk = Object.freeze({\n  // Static props\n  // bindings: null,\n  // bindingsData: null,\n  // html: null,\n  // isTemplateTag: false,\n  // fragment: null,\n  // children: null,\n  // dom: null,\n  // el: null,\n\n  /**\n   * Create the template DOM structure that will be cloned on each mount\n   * @param   {HTMLElement} el - the root node\n   * @returns {TemplateChunk} self\n   */\n  createDOM(el) {\n    // make sure that the DOM gets created before cloning the template\n    this.dom = this.dom || createTemplateDOM(el, this.html);\n    return this;\n  },\n\n  // API methods\n\n  /**\n   * Attach the template to a DOM node\n   * @param   {HTMLElement} el - target DOM node\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n   * @returns {TemplateChunk} self\n   */\n  mount(el, scope, parentScope, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    if (!el) throw new Error('Please provide DOM node to mount properly your template');\n    if (this.el) this.unmount(scope); // <template> tags require a bit more work\n    // the template fragment might be already created via meta outside of this call\n\n    const {\n      fragment,\n      children,\n      avoidDOMInjection\n    } = meta; // <template> bindings of course can not have a root element\n    // so we check the parent node to set the query selector bindings\n\n    const {\n      parentNode\n    } = children ? children[0] : el;\n    const isTemplateTag = isTemplate(el);\n    const templateTagOffset = isTemplateTag ? Math.max(Array.from(parentNode.childNodes).indexOf(el), 0) : null;\n    this.isTemplateTag = isTemplateTag; // create the DOM if it wasn't created before\n\n    this.createDOM(el);\n\n    if (this.dom) {\n      // create the new template dom fragment if it want already passed in via meta\n      this.fragment = fragment || this.dom.cloneNode(true);\n    } // store root node\n    // notice that for template tags the root note will be the parent tag\n\n\n    this.el = this.isTemplateTag ? parentNode : el; // create the children array only for the <template> fragments\n\n    this.children = this.isTemplateTag ? children || Array.from(this.fragment.childNodes) : null; // inject the DOM into the el only if a fragment is available\n\n    if (!avoidDOMInjection && this.fragment) injectDOM(el, this.fragment); // create the bindings\n\n    this.bindings = this.bindingsData.map(binding => create$5(this.el, binding, templateTagOffset));\n    this.bindings.forEach(b => b.mount(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Update the template with fresh data\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @returns {TemplateChunk} self\n   */\n  update(scope, parentScope) {\n    this.bindings.forEach(b => b.update(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Remove the template from the node where it was initially mounted\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {boolean|null} mustRemoveRoot - if true remove the root element,\n   * if false or undefined clean the root tag content, if null don't touch the DOM\n   * @returns {TemplateChunk} self\n   */\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.el) {\n      this.bindings.forEach(b => b.unmount(scope, parentScope, mustRemoveRoot));\n\n      switch (true) {\n        // <template> tags should be treated a bit differently\n        // we need to clear their children only if it's explicitly required by the caller\n        // via mustRemoveRoot !== null\n        case this.children && mustRemoveRoot !== null:\n          clearChildren(this.children);\n          break;\n        // remove the root node only if the mustRemoveRoot === true\n\n        case mustRemoveRoot === true:\n          removeNode(this.el);\n          break;\n        // otherwise we clean the node children\n\n        case mustRemoveRoot !== null:\n          cleanNode(this.el);\n          break;\n      }\n\n      this.el = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Clone the template chunk\n   * @returns {TemplateChunk} a clone of this object resetting the this.el property\n   */\n  clone() {\n    return Object.assign({}, this, {\n      el: null\n    });\n  }\n\n});\n/**\n * Create a template chunk wiring also the bindings\n * @param   {string|HTMLElement} html - template string\n * @param   {Array} bindings - bindings collection\n * @returns {TemplateChunk} a new TemplateChunk copy\n */\n\nfunction create$6(html, bindings) {\n  if (bindings === void 0) {\n    bindings = [];\n  }\n\n  return Object.assign({}, TemplateChunk, {\n    html,\n    bindingsData: bindings\n  });\n}\n\n/**\n * Method used to bind expressions to a DOM node\n * @param   {string|HTMLElement} html - your static template html structure\n * @param   {Array} bindings - list of the expressions to bind to update the markup\n * @returns {TemplateChunk} a new TemplateChunk object having the `update`,`mount`, `unmount` and `clone` methods\n *\n * @example\n *\n * riotDOMBindings\n *  .template(\n *   `<div expr0><!----></div><div><p expr1><!----><section expr2></section></p>`,\n *   [\n *     {\n *       selector: '[expr0]',\n *       redundantAttribute: 'expr0',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.time;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr1]',\n *       redundantAttribute: 'expr1',\n *       expressions: [\n *         {\n *           type: expressionTypes.TEXT,\n *           childNodeIndex: 0,\n *           evaluate(scope) {\n *             return scope.name;\n *           },\n *         },\n *         {\n *           type: 'attribute',\n *           name: 'style',\n *           evaluate(scope) {\n *             return scope.style;\n *           },\n *         },\n *       ],\n *     },\n *     {\n *       selector: '[expr2]',\n *       redundantAttribute: 'expr2',\n *       type: bindingTypes.IF,\n *       evaluate(scope) {\n *         return scope.isVisible;\n *       },\n *       template: riotDOMBindings.template('hello there'),\n *     },\n *   ]\n * )\n */\n\nvar DOMBindings = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  template: create$6,\n  createBinding: create$5,\n  createExpression: create$2,\n  bindingTypes: bindingTypes,\n  expressionTypes: expressionTypes\n});\n\nfunction noop() {\n  return this;\n}\n/**\n * Autobind the methods of a source object to itself\n * @param   {Object} source - probably a riot tag instance\n * @param   {Array<string>} methods - list of the methods to autobind\n * @returns {Object} the original object received\n */\n\nfunction autobindMethods(source, methods) {\n  methods.forEach(method => {\n    source[method] = source[method].bind(source);\n  });\n  return source;\n}\n/**\n * Call the first argument received only if it's a function otherwise return it as it is\n * @param   {*} source - anything\n * @returns {*} anything\n */\n\nfunction callOrAssign(source) {\n  return isFunction(source) ? source.prototype && source.prototype.constructor ? new source() : source() : source;\n}\n\n/**\n * Helper function to set an immutable property\n * @param   {Object} source - object where the new property will be set\n * @param   {string} key - object key where the new property will be stored\n * @param   {*} value - value of the new property\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} - the original object modified\n */\nfunction defineProperty(source, key, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  /* eslint-disable fp/no-mutating-methods */\n  Object.defineProperty(source, key, Object.assign({\n    value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  /* eslint-enable fp/no-mutating-methods */\n\n  return source;\n}\n/**\n * Define multiple properties on a target object\n * @param   {Object} source - object where the new properties will be set\n * @param   {Object} properties - object containing as key pair the key + value properties\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} the original object modified\n */\n\nfunction defineProperties(source, properties, options) {\n  Object.entries(properties).forEach((_ref) => {\n    let [key, value] = _ref;\n    defineProperty(source, key, value, options);\n  });\n  return source;\n}\n/**\n * Define default properties if they don't exist on the source object\n * @param   {Object} source - object that will receive the default properties\n * @param   {Object} defaults - object containing additional optional keys\n * @returns {Object} the original object received enhanced\n */\n\nfunction defineDefaults(source, defaults) {\n  Object.entries(defaults).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    if (!source[key]) source[key] = value;\n  });\n  return source;\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\n\nfunction $(selector, ctx) {\n  return domToArray(typeof selector === 'string' ? (ctx || document).querySelectorAll(selector) : selector);\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Object }              name  - either the name of the attribute to set\n *                                                 or a list of properties as object key - value\n * @param   { string }                     value - the new value of the attribute (optional)\n * @returns { HTMLElement|NodeList|Array } the original array of elements passed to this function\n *\n * @example\n *\n * import { set } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * set(img, 'width', 100)\n *\n * // or also\n * set(img, {\n *   width: 300,\n *   height: 300\n * })\n *\n */\n\n\nfunction set(els, name, value) {\n  const attrs = typeof name === 'object' ? name : {\n    [name]: value\n  };\n  const props = Object.keys(attrs);\n  domToArray(els).forEach(el => {\n    props.forEach(prop => el.setAttribute(prop, attrs[prop]));\n  });\n  return els;\n}\n/**\n * Get any attribute from a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to get\n * @returns { Array|string } list of the attributes found\n *\n * @example\n *\n * import { get } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * get(img, 'width') // => '200'\n *\n * // or also\n * get(img, ['width', 'height']) // => ['200', '300']\n *\n * // or also\n * get([img1, img2], ['width', 'height']) // => [['200', '300'], ['500', '200']]\n */\n\nfunction get(els, name) {\n  return parseNodes(els, name, 'getAttribute');\n}\n\nconst CSS_BY_NAME = new Map();\nconst STYLE_NODE_SELECTOR = 'style[riot]'; // memoized curried function\n\nconst getStyleNode = (style => {\n  return () => {\n    // lazy evaluation:\n    // if this function was already called before\n    // we return its cached result\n    if (style) return style; // create a new style element or use an existing one\n    // and cache it internally\n\n    style = $(STYLE_NODE_SELECTOR)[0] || document.createElement('style');\n    set(style, 'type', 'text/css');\n    /* istanbul ignore next */\n\n    if (!style.parentNode) document.head.appendChild(style);\n    return style;\n  };\n})();\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\n\n\nvar cssManager = {\n  CSS_BY_NAME,\n\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { string } name - if it's passed we will map the css to a tagname\n   * @param { string } css - css string\n   * @returns {Object} self\n   */\n  add(name, css) {\n    if (!CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.set(name, css);\n      this.inject();\n    }\n\n    return this;\n  },\n\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   * @returns {Object} self\n   */\n  inject() {\n    getStyleNode().innerHTML = [...CSS_BY_NAME.values()].join('\\n');\n    return this;\n  },\n\n  /**\n   * Remove a tag style from the DOM\n   * @param {string} name a registered tagname\n   * @returns {Object} self\n   */\n  remove(name) {\n    if (CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.delete(name);\n      this.inject();\n    }\n\n    return this;\n  }\n\n};\n\n/**\n * Function to curry any javascript method\n * @param   {Function}  fn - the target function we want to curry\n * @param   {...[args]} acc - initial arguments\n * @returns {Function|*} it will return a function until the target function\n *                       will receive all of its arguments\n */\nfunction curry(fn) {\n  for (var _len = arguments.length, acc = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    acc[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args = [...acc, ...args];\n    return args.length < fn.length ? curry(fn, ...args) : fn(...args);\n  };\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   {HTMLElement} element - DOM node we want to inspect\n * @returns {string} name to identify this dom node in riot\n */\n\nfunction getName(element) {\n  return get(element, IS_DIRECTIVE) || element.tagName.toLowerCase();\n}\n\nconst COMPONENT_CORE_HELPERS = Object.freeze({\n  // component helpers\n  $(selector) {\n    return $(selector, this.root)[0];\n  },\n\n  $$(selector) {\n    return $(selector, this.root);\n  }\n\n});\nconst PURE_COMPONENT_API = Object.freeze({\n  [MOUNT_METHOD_KEY]: noop,\n  [UPDATE_METHOD_KEY]: noop,\n  [UNMOUNT_METHOD_KEY]: noop\n});\nconst COMPONENT_LIFECYCLE_METHODS = Object.freeze({\n  [SHOULD_UPDATE_KEY]: noop,\n  [ON_BEFORE_MOUNT_KEY]: noop,\n  [ON_MOUNTED_KEY]: noop,\n  [ON_BEFORE_UPDATE_KEY]: noop,\n  [ON_UPDATED_KEY]: noop,\n  [ON_BEFORE_UNMOUNT_KEY]: noop,\n  [ON_UNMOUNTED_KEY]: noop\n});\nconst MOCKED_TEMPLATE_INTERFACE = Object.assign({}, PURE_COMPONENT_API, {\n  clone: noop,\n  createDOM: noop\n});\n/**\n * Evaluate the component properties either from its real attributes or from its initial user properties\n * @param   {HTMLElement} element - component root\n * @param   {Object}  initialProps - initial props\n * @returns {Object} component props key value pairs\n */\n\nfunction evaluateInitialProps(element, initialProps) {\n  if (initialProps === void 0) {\n    initialProps = {};\n  }\n\n  return Object.assign({}, DOMattributesToObject(element), callOrAssign(initialProps));\n}\n/**\n * Bind a DOM node to its component object\n * @param   {HTMLElement} node - html node mounted\n * @param   {Object} component - Riot.js component object\n * @returns {Object} the component object received as second argument\n */\n\n\nconst bindDOMNodeToComponentObject = (node, component) => node[DOM_COMPONENT_INSTANCE_PROPERTY] = component;\n/**\n * Wrap the Riot.js core API methods using a mapping function\n * @param   {Function} mapFunction - lifting function\n * @returns {Object} an object having the { mount, update, unmount } functions\n */\n\n\nfunction createCoreAPIMethods(mapFunction) {\n  return [MOUNT_METHOD_KEY, UPDATE_METHOD_KEY, UNMOUNT_METHOD_KEY].reduce((acc, method) => {\n    acc[method] = mapFunction(method);\n    return acc;\n  }, {});\n}\n/**\n * Factory function to create the component templates only once\n * @param   {Function} template - component template creation function\n * @param   {Object} components - object containing the nested components\n * @returns {TemplateChunk} template chunk object\n */\n\n\nfunction componentTemplateFactory(template, components) {\n  return template(create$6, expressionTypes, bindingTypes, name => {\n    return components[name] || COMPONENTS_IMPLEMENTATION_MAP.get(name);\n  });\n}\n/**\n * Create a pure component\n * @param   {Function} pureFactoryFunction - pure component factory function\n * @param   {Array} options.slots - component slots\n * @param   {Array} options.attributes - component attributes\n * @param   {Array} options.template - template factory function\n * @param   {Array} options.template - template factory function\n * @param   {any} options.props - initial component properties\n * @returns {Object} pure component object\n */\n\n\nfunction createPureComponent(pureFactoryFunction, _ref) {\n  let {\n    slots,\n    attributes,\n    props,\n    css,\n    template\n  } = _ref;\n  if (template) panic('Pure components can not have html');\n  if (css) panic('Pure components do not have css');\n  const component = defineDefaults(pureFactoryFunction({\n    slots,\n    attributes,\n    props\n  }), PURE_COMPONENT_API);\n  return createCoreAPIMethods(method => function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // intercept the mount calls to bind the DOM node to the pure object created\n    // see also https://github.com/riot/riot/issues/2806\n    if (method === MOUNT_METHOD_KEY) {\n      const [el] = args;\n      bindDOMNodeToComponentObject(el, component);\n    }\n\n    component[method](...args);\n    return component;\n  });\n}\n/**\n * Create the component interface needed for the @riotjs/dom-bindings tag bindings\n * @param   {string} options.css - component css\n * @param   {Function} options.template - functon that will return the dom-bindings template function\n * @param   {Object} options.exports - component interface\n * @param   {string} options.name - component name\n * @returns {Object} component like interface\n */\n\n\nfunction createComponent(_ref2) {\n  let {\n    css,\n    template,\n    exports,\n    name\n  } = _ref2;\n  const templateFn = template ? componentTemplateFactory(template, exports ? createSubcomponents(exports.components) : {}) : MOCKED_TEMPLATE_INTERFACE;\n  return (_ref3) => {\n    let {\n      slots,\n      attributes,\n      props\n    } = _ref3;\n    // pure components rendering will be managed by the end user\n    if (exports && exports[IS_PURE_SYMBOL]) return createPureComponent(exports, {\n      slots,\n      attributes,\n      props,\n      css,\n      template\n    });\n    const componentAPI = callOrAssign(exports) || {};\n    const component = defineComponent({\n      css,\n      template: templateFn,\n      componentAPI,\n      name\n    })({\n      slots,\n      attributes,\n      props\n    }); // notice that for the components create via tag binding\n    // we need to invert the mount (state/parentScope) arguments\n    // the template bindings will only forward the parentScope updates\n    // and never deal with the component state\n\n    return {\n      mount(element, parentScope, state) {\n        return component.mount(element, state, parentScope);\n      },\n\n      update(parentScope, state) {\n        return component.update(state, parentScope);\n      },\n\n      unmount(preserveRoot) {\n        return component.unmount(preserveRoot);\n      }\n\n    };\n  };\n}\n/**\n * Component definition function\n * @param   {Object} implementation - the componen implementation will be generated via compiler\n * @param   {Object} component - the component initial properties\n * @returns {Object} a new component implementation object\n */\n\nfunction defineComponent(_ref4) {\n  let {\n    css,\n    template,\n    componentAPI,\n    name\n  } = _ref4;\n  // add the component css into the DOM\n  if (css && name) cssManager.add(name, css);\n  return curry(enhanceComponentAPI)(defineProperties( // set the component defaults without overriding the original component API\n  defineDefaults(componentAPI, Object.assign({}, COMPONENT_LIFECYCLE_METHODS, {\n    [STATE_KEY]: {}\n  })), Object.assign({\n    // defined during the component creation\n    [SLOTS_KEY]: null,\n    [ROOT_KEY]: null\n  }, COMPONENT_CORE_HELPERS, {\n    name,\n    css,\n    template\n  })));\n}\n/**\n * Create the bindings to update the component attributes\n * @param   {HTMLElement} node - node where we will bind the expressions\n * @param   {Array} attributes - list of attribute bindings\n * @returns {TemplateChunk} - template bindings object\n */\n\nfunction createAttributeBindings(node, attributes) {\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  const expressions = attributes.map(a => create$2(node, a));\n  const binding = {};\n  return Object.assign(binding, Object.assign({\n    expressions\n  }, createCoreAPIMethods(method => scope => {\n    expressions.forEach(e => e[method](scope));\n    return binding;\n  })));\n}\n/**\n * Create the subcomponents that can be included inside a tag in runtime\n * @param   {Object} components - components imported in runtime\n * @returns {Object} all the components transformed into Riot.Component factory functions\n */\n\n\nfunction createSubcomponents(components) {\n  if (components === void 0) {\n    components = {};\n  }\n\n  return Object.entries(callOrAssign(components)).reduce((acc, _ref5) => {\n    let [key, value] = _ref5;\n    acc[camelToDashCase(key)] = createComponent(value);\n    return acc;\n  }, {});\n}\n/**\n * Run the component instance through all the plugins set by the user\n * @param   {Object} component - component instance\n * @returns {Object} the component enhanced by the plugins\n */\n\n\nfunction runPlugins(component) {\n  return [...PLUGINS_SET].reduce((c, fn) => fn(c) || c, component);\n}\n/**\n * Compute the component current state merging it with its previous state\n * @param   {Object} oldState - previous state object\n * @param   {Object} newState - new state givent to the `update` call\n * @returns {Object} new object state\n */\n\n\nfunction computeState(oldState, newState) {\n  return Object.assign({}, oldState, callOrAssign(newState));\n}\n/**\n * Add eventually the \"is\" attribute to link this DOM node to its css\n * @param {HTMLElement} element - target root node\n * @param {string} name - name of the component mounted\n * @returns {undefined} it's a void function\n */\n\n\nfunction addCssHook(element, name) {\n  if (getName(element) !== name) {\n    set(element, IS_DIRECTIVE, name);\n  }\n}\n/**\n * Component creation factory function that will enhance the user provided API\n * @param   {Object} component - a component implementation previously defined\n * @param   {Array} options.slots - component slots generated via riot compiler\n * @param   {Array} options.attributes - attribute expressions generated via riot compiler\n * @returns {Riot.Component} a riot component instance\n */\n\n\nfunction enhanceComponentAPI(component, _ref6) {\n  let {\n    slots,\n    attributes,\n    props\n  } = _ref6;\n  return autobindMethods(runPlugins(defineProperties(Object.create(component), {\n    mount(element, state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      this[ATTRIBUTES_KEY_SYMBOL] = createAttributeBindings(element, attributes).mount(parentScope);\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, evaluateInitialProps(element, props), evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions))));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[TEMPLATE_KEY_SYMBOL] = this.template.createDOM(element).clone(); // link this object to the DOM node\n\n      bindDOMNodeToComponentObject(element, this); // add eventually the 'is' attribute\n\n      component.name && addCssHook(element, component.name); // define the root element\n\n      defineProperty(this, ROOT_KEY, element); // define the slots array\n\n      defineProperty(this, SLOTS_KEY, slots); // before mount lifecycle event\n\n      this[ON_BEFORE_MOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[PARENT_KEY_SYMBOL] = parentScope; // mount the template\n\n      this[TEMPLATE_KEY_SYMBOL].mount(element, this, parentScope);\n      this[ON_MOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    update(state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      if (parentScope) {\n        this[PARENT_KEY_SYMBOL] = parentScope;\n        this[ATTRIBUTES_KEY_SYMBOL].update(parentScope);\n      }\n\n      const newProps = evaluateAttributeExpressions(this[ATTRIBUTES_KEY_SYMBOL].expressions);\n      if (this[SHOULD_UPDATE_KEY](newProps, this[PROPS_KEY]) === false) return;\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, this[PROPS_KEY], newProps)));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[ON_BEFORE_UPDATE_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[TEMPLATE_KEY_SYMBOL].update(this, this[PARENT_KEY_SYMBOL]);\n      this[ON_UPDATED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    unmount(preserveRoot) {\n      this[ON_BEFORE_UNMOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[ATTRIBUTES_KEY_SYMBOL].unmount(); // if the preserveRoot is null the template html will be left untouched\n      // in that case the DOM cleanup will happen differently from a parent node\n\n      this[TEMPLATE_KEY_SYMBOL].unmount(this, this[PARENT_KEY_SYMBOL], preserveRoot === null ? null : !preserveRoot);\n      this[ON_UNMOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    }\n\n  })), Object.keys(component).filter(prop => isFunction(component[prop])));\n}\n/**\n * Component initialization function starting from a DOM node\n * @param   {HTMLElement} element - element to upgrade\n * @param   {Object} initialProps - initial component properties\n * @param   {string} componentName - component id\n * @returns {Object} a new component instance bound to a DOM node\n */\n\nfunction mountComponent(element, initialProps, componentName) {\n  const name = componentName || getName(element);\n  if (!COMPONENTS_IMPLEMENTATION_MAP.has(name)) panic(`The component named \"${name}\" was never registered`);\n  const component = COMPONENTS_IMPLEMENTATION_MAP.get(name)({\n    props: initialProps\n  });\n  return component.mount(element);\n}\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst {\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY$1,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP$1,\n  PLUGINS_SET: PLUGINS_SET$1\n} = globals;\n/**\n * Riot public api\n */\n\n/**\n * Register a custom tag by name\n * @param   {string} name - component name\n * @param   {Object} implementation - tag implementation\n * @returns {Map} map containing all the components implementations\n */\n\nfunction register(name, _ref) {\n  let {\n    css,\n    template,\n    exports\n  } = _ref;\n  if (COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was already registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.set(name, createComponent({\n    name,\n    css,\n    template,\n    exports\n  }));\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Unregister a riot web component\n * @param   {string} name - component name\n * @returns {Map} map containing all the components implementations\n */\n\nfunction unregister(name) {\n  if (!COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was never registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.delete(name);\n  cssManager.remove(name);\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Mounting function that will work only for the components that were globally registered\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {Object} initialProps - the initial component properties\n * @param   {string} name - optional component name\n * @returns {Array} list of nodes upgraded\n */\n\nfunction mount(selector, initialProps, name) {\n  return $(selector).map(element => mountComponent(element, initialProps, name));\n}\n/**\n * Sweet unmounting helper function for the DOM node mounted manually by the user\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {boolean|null} keepRootElement - if true keep the root element\n * @returns {Array} list of nodes unmounted\n */\n\nfunction unmount(selector, keepRootElement) {\n  return $(selector).map(element => {\n    if (element[DOM_COMPONENT_INSTANCE_PROPERTY$1]) {\n      element[DOM_COMPONENT_INSTANCE_PROPERTY$1].unmount(keepRootElement);\n    }\n\n    return element;\n  });\n}\n/**\n * Define a riot plugin\n * @param   {Function} plugin - function that will receive all the components created\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction install(plugin) {\n  if (!isFunction(plugin)) panic('Plugins must be of type function');\n  if (PLUGINS_SET$1.has(plugin)) panic('This plugin was already installed');\n  PLUGINS_SET$1.add(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Uninstall a riot plugin\n * @param   {Function} plugin - plugin previously installed\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction uninstall(plugin) {\n  if (!PLUGINS_SET$1.has(plugin)) panic('This plugin was never installed');\n  PLUGINS_SET$1.delete(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Helper method to create component without relying on the registered ones\n * @param   {Object} implementation - component implementation\n * @returns {Function} function that will allow you to mount a riot component on a DOM node\n */\n\nfunction component(implementation) {\n  return function (el, props, _temp) {\n    let {\n      slots,\n      attributes,\n      parentScope\n    } = _temp === void 0 ? {} : _temp;\n    return compose(c => c.mount(el, parentScope), c => c({\n      props,\n      slots,\n      attributes\n    }), createComponent)(implementation);\n  };\n}\n/**\n * Lift a riot component Interface into a pure riot object\n * @param   {Function} func - RiotPureComponent factory function\n * @returns {Function} the lifted original function received as argument\n */\n\nfunction pure(func) {\n  if (!isFunction(func)) panic('riot.pure accepts only arguments of type \"function\"');\n  func[IS_PURE_SYMBOL] = true;\n  return func;\n}\n/** @type {string} current riot version */\n\nconst version = 'v4.13.4'; // expose some internal stuff that might be used from external tools\n\nconst __ = {\n  cssManager,\n  DOMBindings,\n  createComponent,\n  defineComponent,\n  globals\n};\n\nexport { __, component, install, mount, pure, register, uninstall, unmount, unregister, version };\n","import App from './App.riot'\nimport {component} from 'riot'\n\ncomponent(App)(document.querySelector('#root'), {\n  message: 'Hello there'\n})","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","\n            module.exports = function( bundle ) {\n                function __initialize( __wasm_module, __load_asynchronously ) {\n    return (function( module_factory ) {\n        var instance = module_factory();\n        if( __load_asynchronously ) {\n            return WebAssembly.instantiate( __wasm_module, instance.imports )\n                .then( function( wasm_instance ) {\n                    var exports = instance.initialize( wasm_instance );\n                    console.log( \"Finished loading Rust wasm module 'rustess'\" );\n                    return exports;\n                })\n                .catch( function( error ) {\n                    console.log( \"Error loading Rust wasm module 'rustess':\", error );\n                    throw error;\n                });\n        } else {\n            var instance = new WebAssembly.Instance( __wasm_module, instance.imports );\n            return instance.initialize( wasm_instance );\n        }\n    }( function() {\n    var Module = {};\n\n    Module.STDWEB_PRIVATE = {};\n\n// This is based on code from Emscripten's preamble.js.\nModule.STDWEB_PRIVATE.to_utf8 = function to_utf8( str, addr ) {\n    var HEAPU8 = Module.HEAPU8;\n    for( var i = 0; i < str.length; ++i ) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description and https://www.ietf.org/rfc/rfc2279.txt and https://tools.ietf.org/html/rfc3629\n        var u = str.charCodeAt( i ); // possibly a lead surrogate\n        if( u >= 0xD800 && u <= 0xDFFF ) {\n            u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt( ++i ) & 0x3FF);\n        }\n\n        if( u <= 0x7F ) {\n            HEAPU8[ addr++ ] = u;\n        } else if( u <= 0x7FF ) {\n            HEAPU8[ addr++ ] = 0xC0 | (u >> 6);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0xFFFF ) {\n            HEAPU8[ addr++ ] = 0xE0 | (u >> 12);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0x1FFFFF ) {\n            HEAPU8[ addr++ ] = 0xF0 | (u >> 18);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else if( u <= 0x3FFFFFF ) {\n            HEAPU8[ addr++ ] = 0xF8 | (u >> 24);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 18) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        } else {\n            HEAPU8[ addr++ ] = 0xFC | (u >> 30);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 24) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 18) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 12) & 63);\n            HEAPU8[ addr++ ] = 0x80 | ((u >> 6) & 63);\n            HEAPU8[ addr++ ] = 0x80 | (u & 63);\n        }\n    }\n};\n\nModule.STDWEB_PRIVATE.noop = function() {};\nModule.STDWEB_PRIVATE.to_js = function to_js( address ) {\n    var kind = Module.HEAPU8[ address + 12 ];\n    if( kind === 0 ) {\n        return undefined;\n    } else if( kind === 1 ) {\n        return null;\n    } else if( kind === 2 ) {\n        return Module.HEAP32[ address / 4 ];\n    } else if( kind === 3 ) {\n        return Module.HEAPF64[ address / 8 ];\n    } else if( kind === 4 ) {\n        var pointer = Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        return Module.STDWEB_PRIVATE.to_js_string( pointer, length );\n    } else if( kind === 5 ) {\n        return false;\n    } else if( kind === 6 ) {\n        return true;\n    } else if( kind === 7 ) {\n        var pointer = Module.STDWEB_PRIVATE.arena + Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var output = [];\n        for( var i = 0; i < length; ++i ) {\n            output.push( Module.STDWEB_PRIVATE.to_js( pointer + i * 16 ) );\n        }\n        return output;\n    } else if( kind === 8 ) {\n        var arena = Module.STDWEB_PRIVATE.arena;\n        var value_array_pointer = arena + Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var key_array_pointer = arena + Module.HEAPU32[ (address + 8) / 4 ];\n        var output = {};\n        for( var i = 0; i < length; ++i ) {\n            var key_pointer = Module.HEAPU32[ (key_array_pointer + i * 8) / 4 ];\n            var key_length = Module.HEAPU32[ (key_array_pointer + 4 + i * 8) / 4 ];\n            var key = Module.STDWEB_PRIVATE.to_js_string( key_pointer, key_length );\n            var value = Module.STDWEB_PRIVATE.to_js( value_array_pointer + i * 16 );\n            output[ key ] = value;\n        }\n        return output;\n    } else if( kind === 9 ) {\n        return Module.STDWEB_PRIVATE.acquire_js_reference( Module.HEAP32[ address / 4 ] );\n    } else if( kind === 10 || kind === 12 || kind === 13 ) {\n        var adapter_pointer = Module.HEAPU32[ address / 4 ];\n        var pointer = Module.HEAPU32[ (address + 4) / 4 ];\n        var deallocator_pointer = Module.HEAPU32[ (address + 8) / 4 ];\n        var num_ongoing_calls = 0;\n        var drop_queued = false;\n        var output = function() {\n            if( pointer === 0 || drop_queued === true ) {\n                if (kind === 10) {\n                    throw new ReferenceError( \"Already dropped Rust function called!\" );\n                } else if (kind === 12) {\n                    throw new ReferenceError( \"Already dropped FnMut function called!\" );\n                } else {\n                    throw new ReferenceError( \"Already called or dropped FnOnce function called!\" );\n                }\n            }\n\n            var function_pointer = pointer;\n            if (kind === 13) {\n                output.drop = Module.STDWEB_PRIVATE.noop;\n                pointer = 0;\n            }\n\n            if (num_ongoing_calls !== 0) {\n                if (kind === 12 || kind === 13) {\n                    throw new ReferenceError( \"FnMut function called multiple times concurrently!\" );\n                }\n            }\n\n            var args = Module.STDWEB_PRIVATE.alloc( 16 );\n            Module.STDWEB_PRIVATE.serialize_array( args, arguments );\n\n            try {\n                num_ongoing_calls += 1;\n                Module.STDWEB_PRIVATE.dyncall( \"vii\", adapter_pointer, [function_pointer, args] );\n                var result = Module.STDWEB_PRIVATE.tmp;\n                Module.STDWEB_PRIVATE.tmp = null;\n            } finally {\n                num_ongoing_calls -= 1;\n            }\n\n            if( drop_queued === true && num_ongoing_calls === 0 ) {\n                output.drop();\n            }\n\n            return result;\n        };\n\n        output.drop = function() {\n            if (num_ongoing_calls !== 0) {\n                drop_queued = true;\n                return;\n            }\n\n            output.drop = Module.STDWEB_PRIVATE.noop;\n            var function_pointer = pointer;\n            pointer = 0;\n\n            if (function_pointer != 0) {\n                Module.STDWEB_PRIVATE.dyncall( \"vi\", deallocator_pointer, [function_pointer] );\n            }\n        };\n\n        return output;\n    } else if( kind === 14 ) {\n        var pointer = Module.HEAPU32[ address / 4 ];\n        var length = Module.HEAPU32[ (address + 4) / 4 ];\n        var array_kind = Module.HEAPU32[ (address + 8) / 4 ];\n        var pointer_end = pointer + length;\n\n        switch( array_kind ) {\n            case 0:\n                return Module.HEAPU8.subarray( pointer, pointer_end );\n            case 1:\n                return Module.HEAP8.subarray( pointer, pointer_end );\n            case 2:\n                return Module.HEAPU16.subarray( pointer, pointer_end );\n            case 3:\n                return Module.HEAP16.subarray( pointer, pointer_end );\n            case 4:\n                return Module.HEAPU32.subarray( pointer, pointer_end );\n            case 5:\n                return Module.HEAP32.subarray( pointer, pointer_end );\n            case 6:\n                return Module.HEAPF32.subarray( pointer, pointer_end );\n            case 7:\n                return Module.HEAPF64.subarray( pointer, pointer_end );\n        }\n    } else if( kind === 15 ) {\n        return Module.STDWEB_PRIVATE.get_raw_value( Module.HEAPU32[ address / 4 ] );\n    }\n};\n\nModule.STDWEB_PRIVATE.serialize_object = function serialize_object( address, value ) {\n    var keys = Object.keys( value );\n    var length = keys.length;\n    var key_array_pointer = Module.STDWEB_PRIVATE.alloc( length * 8 );\n    var value_array_pointer = Module.STDWEB_PRIVATE.alloc( length * 16 );\n    Module.HEAPU8[ address + 12 ] = 8;\n    Module.HEAPU32[ address / 4 ] = value_array_pointer;\n    Module.HEAPU32[ (address + 4) / 4 ] = length;\n    Module.HEAPU32[ (address + 8) / 4 ] = key_array_pointer;\n    for( var i = 0; i < length; ++i ) {\n        var key = keys[ i ];\n        var key_address = key_array_pointer + i * 8;\n        Module.STDWEB_PRIVATE.to_utf8_string( key_address, key );\n\n        Module.STDWEB_PRIVATE.from_js( value_array_pointer + i * 16, value[ key ] );\n    }\n};\n\nModule.STDWEB_PRIVATE.serialize_array = function serialize_array( address, value ) {\n    var length = value.length;\n    var pointer = Module.STDWEB_PRIVATE.alloc( length * 16 );\n    Module.HEAPU8[ address + 12 ] = 7;\n    Module.HEAPU32[ address / 4 ] = pointer;\n    Module.HEAPU32[ (address + 4) / 4 ] = length;\n    for( var i = 0; i < length; ++i ) {\n        Module.STDWEB_PRIVATE.from_js( pointer + i * 16, value[ i ] );\n    }\n};\n\n// New browsers and recent Node\nvar cachedEncoder = ( typeof TextEncoder === \"function\"\n    ? new TextEncoder( \"utf-8\" )\n    // Old Node (before v11)\n    : ( typeof util === \"object\" && util && typeof util.TextEncoder === \"function\"\n        ? new util.TextEncoder( \"utf-8\" )\n        // Old browsers\n        : null ) );\n\nif ( cachedEncoder != null ) {\n    Module.STDWEB_PRIVATE.to_utf8_string = function to_utf8_string( address, value ) {\n        var buffer = cachedEncoder.encode( value );\n        var length = buffer.length;\n        var pointer = 0;\n\n        if ( length > 0 ) {\n            pointer = Module.STDWEB_PRIVATE.alloc( length );\n            Module.HEAPU8.set( buffer, pointer );\n        }\n\n        Module.HEAPU32[ address / 4 ] = pointer;\n        Module.HEAPU32[ (address + 4) / 4 ] = length;\n    };\n\n} else {\n    Module.STDWEB_PRIVATE.to_utf8_string = function to_utf8_string( address, value ) {\n        var length = Module.STDWEB_PRIVATE.utf8_len( value );\n        var pointer = 0;\n\n        if ( length > 0 ) {\n            pointer = Module.STDWEB_PRIVATE.alloc( length );\n            Module.STDWEB_PRIVATE.to_utf8( value, pointer );\n        }\n\n        Module.HEAPU32[ address / 4 ] = pointer;\n        Module.HEAPU32[ (address + 4) / 4 ] = length;\n    };\n}\n\nModule.STDWEB_PRIVATE.from_js = function from_js( address, value ) {\n    var kind = Object.prototype.toString.call( value );\n    if( kind === \"[object String]\" ) {\n        Module.HEAPU8[ address + 12 ] = 4;\n        Module.STDWEB_PRIVATE.to_utf8_string( address, value );\n    } else if( kind === \"[object Number]\" ) {\n        if( value === (value|0) ) {\n            Module.HEAPU8[ address + 12 ] = 2;\n            Module.HEAP32[ address / 4 ] = value;\n        } else {\n            Module.HEAPU8[ address + 12 ] = 3;\n            Module.HEAPF64[ address / 8 ] = value;\n        }\n    } else if( value === null ) {\n        Module.HEAPU8[ address + 12 ] = 1;\n    } else if( value === undefined ) {\n        Module.HEAPU8[ address + 12 ] = 0;\n    } else if( value === false ) {\n        Module.HEAPU8[ address + 12 ] = 5;\n    } else if( value === true ) {\n        Module.HEAPU8[ address + 12 ] = 6;\n    } else if( kind === \"[object Symbol]\" ) {\n        var id = Module.STDWEB_PRIVATE.register_raw_value( value );\n        Module.HEAPU8[ address + 12 ] = 15;\n        Module.HEAP32[ address / 4 ] = id;\n    } else {\n        var refid = Module.STDWEB_PRIVATE.acquire_rust_reference( value );\n        Module.HEAPU8[ address + 12 ] = 9;\n        Module.HEAP32[ address / 4 ] = refid;\n    }\n};\n\n// New browsers and recent Node\nvar cachedDecoder = ( typeof TextDecoder === \"function\"\n    ? new TextDecoder( \"utf-8\" )\n    // Old Node (before v11)\n    : ( typeof util === \"object\" && util && typeof util.TextDecoder === \"function\"\n        ? new util.TextDecoder( \"utf-8\" )\n        // Old browsers\n        : null ) );\n\nif ( cachedDecoder != null ) {\n    Module.STDWEB_PRIVATE.to_js_string = function to_js_string( index, length ) {\n        return cachedDecoder.decode( Module.HEAPU8.subarray( index, index + length ) );\n    };\n\n} else {\n    // This is ported from Rust's stdlib; it's faster than\n    // the string conversion from Emscripten.\n    Module.STDWEB_PRIVATE.to_js_string = function to_js_string( index, length ) {\n        var HEAPU8 = Module.HEAPU8;\n        index = index|0;\n        length = length|0;\n        var end = (index|0) + (length|0);\n        var output = \"\";\n        while( index < end ) {\n            var x = HEAPU8[ index++ ];\n            if( x < 128 ) {\n                output += String.fromCharCode( x );\n                continue;\n            }\n            var init = (x & (0x7F >> 2));\n            var y = 0;\n            if( index < end ) {\n                y = HEAPU8[ index++ ];\n            }\n            var ch = (init << 6) | (y & 63);\n            if( x >= 0xE0 ) {\n                var z = 0;\n                if( index < end ) {\n                    z = HEAPU8[ index++ ];\n                }\n                var y_z = ((y & 63) << 6) | (z & 63);\n                ch = init << 12 | y_z;\n                if( x >= 0xF0 ) {\n                    var w = 0;\n                    if( index < end ) {\n                        w = HEAPU8[ index++ ];\n                    }\n                    ch = (init & 7) << 18 | ((y_z << 6) | (w & 63));\n\n                    output += String.fromCharCode( 0xD7C0 + (ch >> 10) );\n                    ch = 0xDC00 + (ch & 0x3FF);\n                }\n            }\n            output += String.fromCharCode( ch );\n            continue;\n        }\n        return output;\n    };\n}\n\nModule.STDWEB_PRIVATE.id_to_ref_map = {};\nModule.STDWEB_PRIVATE.id_to_refcount_map = {};\nModule.STDWEB_PRIVATE.ref_to_id_map = new WeakMap();\n// Not all types can be stored in a WeakMap\nModule.STDWEB_PRIVATE.ref_to_id_map_fallback = new Map();\nModule.STDWEB_PRIVATE.last_refid = 1;\n\nModule.STDWEB_PRIVATE.id_to_raw_value_map = {};\nModule.STDWEB_PRIVATE.last_raw_value_id = 1;\n\nModule.STDWEB_PRIVATE.acquire_rust_reference = function( reference ) {\n    if( reference === undefined || reference === null ) {\n        return 0;\n    }\n\n    var id_to_refcount_map = Module.STDWEB_PRIVATE.id_to_refcount_map;\n    var id_to_ref_map = Module.STDWEB_PRIVATE.id_to_ref_map;\n    var ref_to_id_map = Module.STDWEB_PRIVATE.ref_to_id_map;\n    var ref_to_id_map_fallback = Module.STDWEB_PRIVATE.ref_to_id_map_fallback;\n\n    var refid = ref_to_id_map.get( reference );\n    if( refid === undefined ) {\n        refid = ref_to_id_map_fallback.get( reference );\n    }\n    if( refid === undefined ) {\n        refid = Module.STDWEB_PRIVATE.last_refid++;\n        try {\n            ref_to_id_map.set( reference, refid );\n        } catch (e) {\n            ref_to_id_map_fallback.set( reference, refid );\n        }\n    }\n\n    if( refid in id_to_ref_map ) {\n        id_to_refcount_map[ refid ]++;\n    } else {\n        id_to_ref_map[ refid ] = reference;\n        id_to_refcount_map[ refid ] = 1;\n    }\n\n    return refid;\n};\n\nModule.STDWEB_PRIVATE.acquire_js_reference = function( refid ) {\n    return Module.STDWEB_PRIVATE.id_to_ref_map[ refid ];\n};\n\nModule.STDWEB_PRIVATE.increment_refcount = function( refid ) {\n    Module.STDWEB_PRIVATE.id_to_refcount_map[ refid ]++;\n};\n\nModule.STDWEB_PRIVATE.decrement_refcount = function( refid ) {\n    var id_to_refcount_map = Module.STDWEB_PRIVATE.id_to_refcount_map;\n    if( 0 == --id_to_refcount_map[ refid ] ) {\n        var id_to_ref_map = Module.STDWEB_PRIVATE.id_to_ref_map;\n        var ref_to_id_map_fallback = Module.STDWEB_PRIVATE.ref_to_id_map_fallback;\n        var reference = id_to_ref_map[ refid ];\n        delete id_to_ref_map[ refid ];\n        delete id_to_refcount_map[ refid ];\n        ref_to_id_map_fallback.delete(reference);\n    }\n};\n\nModule.STDWEB_PRIVATE.register_raw_value = function( value ) {\n    var id = Module.STDWEB_PRIVATE.last_raw_value_id++;\n    Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ] = value;\n    return id;\n};\n\nModule.STDWEB_PRIVATE.unregister_raw_value = function( id ) {\n    delete Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ];\n};\n\nModule.STDWEB_PRIVATE.get_raw_value = function( id ) {\n    return Module.STDWEB_PRIVATE.id_to_raw_value_map[ id ];\n};\n\nModule.STDWEB_PRIVATE.alloc = function alloc( size ) {\n    return Module.web_malloc( size );\n};\n\nModule.STDWEB_PRIVATE.dyncall = function( signature, ptr, args ) {\n    return Module.web_table.get( ptr ).apply( null, args );\n};\n\n// This is based on code from Emscripten's preamble.js.\nModule.STDWEB_PRIVATE.utf8_len = function utf8_len( str ) {\n    var len = 0;\n    for( var i = 0; i < str.length; ++i ) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var u = str.charCodeAt( i ); // possibly a lead surrogate\n        if( u >= 0xD800 && u <= 0xDFFF ) {\n            u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt( ++i ) & 0x3FF);\n        }\n\n        if( u <= 0x7F ) {\n            ++len;\n        } else if( u <= 0x7FF ) {\n            len += 2;\n        } else if( u <= 0xFFFF ) {\n            len += 3;\n        } else if( u <= 0x1FFFFF ) {\n            len += 4;\n        } else if( u <= 0x3FFFFFF ) {\n            len += 5;\n        } else {\n            len += 6;\n        }\n    }\n    return len;\n};\n\nModule.STDWEB_PRIVATE.prepare_any_arg = function( value ) {\n    var arg = Module.STDWEB_PRIVATE.alloc( 16 );\n    Module.STDWEB_PRIVATE.from_js( arg, value );\n    return arg;\n};\n\nModule.STDWEB_PRIVATE.acquire_tmp = function( dummy ) {\n    var value = Module.STDWEB_PRIVATE.tmp;\n    Module.STDWEB_PRIVATE.tmp = null;\n    return value;\n};\n\n\n\n    var HEAP8 = null;\n    var HEAP16 = null;\n    var HEAP32 = null;\n    var HEAPU8 = null;\n    var HEAPU16 = null;\n    var HEAPU32 = null;\n    var HEAPF32 = null;\n    var HEAPF64 = null;\n\n    Object.defineProperty( Module, 'exports', { value: {} } );\n\n    function __web_on_grow() {\n        var buffer = Module.instance.exports.memory.buffer;\n        HEAP8 = new Int8Array( buffer );\n        HEAP16 = new Int16Array( buffer );\n        HEAP32 = new Int32Array( buffer );\n        HEAPU8 = new Uint8Array( buffer );\n        HEAPU16 = new Uint16Array( buffer );\n        HEAPU32 = new Uint32Array( buffer );\n        HEAPF32 = new Float32Array( buffer );\n        HEAPF64 = new Float64Array( buffer );\n        Module.HEAP8 = HEAP8;\n        Module.HEAP16 = HEAP16;\n        Module.HEAP32 = HEAP32;\n        Module.HEAPU8 = HEAPU8;\n        Module.HEAPU16 = HEAPU16;\n        Module.HEAPU32 = HEAPU32;\n        Module.HEAPF32 = HEAPF32;\n        Module.HEAPF64 = HEAPF64;\n    }\n\n    return {\n        imports: {\n            env: {\n                \"__cargo_web_snippet_285aac3fba72d67cb459d37d4d21aa4fb62598ba\": function($0) {\n                Module.STDWEB_PRIVATE.arena = $0;\n            },\n            \"__cargo_web_snippet_4d66721dd755374fa177d86d1c818bf74cc0be84\": function($0, $1) {\n                $1 = Module.STDWEB_PRIVATE.to_js($1);Module.STDWEB_PRIVATE.from_js($0, (function(){return($1);})());\n            },\n            \"__cargo_web_snippet_515598dacc2aae3ba84e7207f3f75bd28fcbbd15\": function($0) {\n                var o = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );return (o instanceof Object);\n            },\n            \"__cargo_web_snippet_5c3091ae7fa9c42123eec37f64de99a5808e7ef2\": function($0) {\n                var o = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );return (o instanceof Array);\n            },\n            \"__cargo_web_snippet_80d6d56760c65e49b7be8b6b01c1ea861b046bf0\": function($0) {\n                Module.STDWEB_PRIVATE.decrement_refcount( $0 );\n            },\n            \"__cargo_web_snippet_8c32019649bb581b1b742eeedfc410e2bedd56a6\": function($0, $1) {\n                var array = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );Module.STDWEB_PRIVATE.serialize_array( $1, array );\n            },\n            \"__cargo_web_snippet_e9638d6405ab65f78daf4a5af9c9de14ecf1e2ec\": function($0) {\n                $0 = Module.STDWEB_PRIVATE.to_js($0);Module.STDWEB_PRIVATE.unregister_raw_value(($0));\n            },\n            \"__cargo_web_snippet_f814fda503cb20016f78481f85431d48a7c4e731\": function($0, $1) {\n                var object = Module.STDWEB_PRIVATE.acquire_js_reference( $0 );Module.STDWEB_PRIVATE.serialize_object( $1, object );\n            },\n            \"__cargo_web_snippet_ff5103e6cc179d13b4c7a785bdce2708fd559fc0\": function($0) {\n                Module.STDWEB_PRIVATE.tmp = Module.STDWEB_PRIVATE.to_js( $0 );\n            },\n                \"__web_on_grow\": __web_on_grow\n            }\n        },\n        initialize: function( instance ) {\n            Object.defineProperty( Module, 'instance', { value: instance } );\n            Object.defineProperty( Module, 'web_malloc', { value: Module.instance.exports.__web_malloc } );\n            Object.defineProperty( Module, 'web_free', { value: Module.instance.exports.__web_free } );\n            Object.defineProperty( Module, 'web_table', { value: Module.instance.exports.__indirect_function_table } );\n\n            Module.exports.state = function state(counter) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.state(counter));\n}\n;\n                Module.exports.increment = function increment(state) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.increment(Module.STDWEB_PRIVATE.prepare_any_arg(state)));\n}\n;\n                Module.exports.decrement = function decrement(state) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.decrement(Module.STDWEB_PRIVATE.prepare_any_arg(state)));\n}\n;\n                Module.exports.add = function add(state, b) {\n    return Module.STDWEB_PRIVATE.acquire_tmp(Module.instance.exports.add(Module.STDWEB_PRIVATE.prepare_any_arg(state), b));\n}\n;\n            __web_on_grow();\n            \n\n            return Module.exports;\n        }\n    };\n}\n ));\n}\n\n                return fetch( bundle )\n                    .then( response => response.arrayBuffer() )\n                    .then( bytes => WebAssembly.compile( bytes ) )\n                    .then( mod => __initialize( mod, true ) );\n            };\n        ","\n                            module.exports = function( bundle ) {\n                                var loader = require( \"./loader-be7369a0583e756f576c1b722e6d7668.js\" );\n                                return loader( bundle );\n                            };\n                        "]}